import{n as _,p as u,O as c,d as y,s as E,E as L,v as O,b as P,r as l,o as R,e as q,g as a,w as n,c as e,i as x,k as C,L as j}from"./index-8a2cb146.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{F as w}from"./finance-4d2c7da5.js";import"./index-2bbe694f.js";const H=()=>[{title:"营业部名称",dataIndex:"departName",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:t})=>_(t.departName)},{title:"团号",dataIndex:"groupId",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:t})=>_(t.groupId)},{title:"报名订单总费用(元)",dataIndex:"signCost",show:!0,align:"right",render:({record:t})=>u("span",{class:"text-red text-price"},c(`${t.signCost??"0"}`))},{title:"保险总费用(元)",dataIndex:"insuranceCost",show:!0,align:"right",render:({record:t})=>u("span",{class:"text-red text-price"},c(`${t.insuranceCost??"0"}`))},{title:"报名总金额(元)",dataIndex:"money",show:!0,align:"right",render:({record:t})=>u("span",{class:"text-red text-price"},c(`${t.money??"0"}`))},{title:"实收报名总金额(元)",dataIndex:"actualCost",show:!0,align:"right",render:({record:t})=>u("span",{class:"text-red text-price"},c(`${t.actualCost??"0"}`))},{title:"实收保险总费用(元)",dataIndex:"actualInsurCost2",show:!0,align:"right",render:({record:t})=>u("span",{class:"text-red text-price"},c(`${t.actualInsurCost2??"0"}`))},{title:"实收总金额(元)",dataIndex:"actualMoney",show:!0,align:"right",render:({record:t})=>u("span",{class:"text-red text-price"},c(`${t.actualMoney??"0"}`))},{title:"状态",dataIndex:"isBillingName",show:!0,align:"center",render:({record:t})=>_(t.isBillingName)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],J=y({name:"FinancePaymentCertificate"}),ee=y({...J,setup(t){const{form:s,resetForm:I}=E(()=>({groupId:"",departName:"",departCode:""}),()=>b()),[V,f]=L(null),{columnsData:z,visibleColumnsData:N,tableBaseOptions:r,resetData:b,changeTableColumn:S,changeTableSize:T}=O(H(),()=>v()),{data:$,loading:k,initData:v}=P(async()=>{const{res:d,err:o}=await C(()=>w.getVoucherList({...s.value,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return o?[]:(r.pagination.total=d.data.totalCount,d==null?void 0:d.data.payVoucherList)}),B=async()=>{const{err:d,res:o}=await C(()=>w.exportVoucher({...s.value}),{after:()=>f(""),before:()=>f("导出缴费凭证")});d||j(o,"缴费凭证.xls")};return(d,o)=>{const p=l("a-input"),m=l("a-form-item"),g=l("a-grid-item"),D=l("a-grid"),F=l("a-form"),K=l("icon-download"),h=l("a-button"),A=l("a-space"),M=l("a-button-group"),U=l("a-table");return R(),q("div",null,[a(G,{"table-columns":e(z),"table-size":e(r).size,onResetSearch:e(I),onSearch:e(b),onChangeTableSize:e(T),onChangeTableColumn:e(S)},{form:n(()=>[a(F,{model:e(s),"label-align":"left",size:"large","auto-label-width":""},{default:n(()=>[a(D,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:n(()=>[a(g,null,{default:n(()=>[a(m,{field:"groupId",label:"团号:"},{default:n(()=>[a(p,{modelValue:e(s).groupId,"onUpdate:modelValue":o[0]||(o[0]=i=>e(s).groupId=i),placeholder:"请输入团号"},null,8,["modelValue"])]),_:1})]),_:1}),a(g,null,{default:n(()=>[a(m,{label:"部门名称:"},{default:n(()=>[a(p,{modelValue:e(s).departName,"onUpdate:modelValue":o[1]||(o[1]=i=>e(s).departName=i),modelModifiers:{trim:!0},placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1})]),_:1}),a(g,null,{default:n(()=>[a(m,{label:"部门代码:"},{default:n(()=>[a(p,{modelValue:e(s).departCode,"onUpdate:modelValue":o[2]||(o[2]=i=>e(s).departCode=i),modelModifiers:{trim:!0},placeholder:"请输入部门代码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:n(()=>[a(A,null,{default:n(()=>[a(h,{type:"outline",loading:e(V)==="导出缴费凭证",status:"warning",onClick:B},{icon:n(()=>[a(K)]),default:n(()=>[x(" 导出缴费凭证 ")]),_:1},8,["loading"])]),_:1})]),table:n(()=>[a(U,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":o[3]||(o[3]=i=>e(r).selectedKeys=i),class:"zs-table","row-key":"id",data:e($),"row-selection":e(r).rowSelection,bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(N),stripe:e(r).stripe,loading:e(k)},{operate:n(({record:i})=>[a(M,null,{default:n(()=>[a(h,{type:"text",status:"success",onClick:Q=>d.$router.push(`/finance/paymentCertificate/operate?id=${i.id}`)},{default:n(()=>[x("详情")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{ee as default};
