import{d as Z,g as be,z as we,h as de,i as ge,k as E,r as p,o as v,l as V,w as a,a as l,b as e,c as Y,A as te,F as ae,e as _,p as J,v as ze,s as X,m as L,M as j,t as oe,n as ue,j as ce,q as pe,u as he,x as Ce}from"./index-d007178a.js";import{f as u,b as ve,u as Se,e as Te,g as fe,_ as Ie}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as ie}from"./options-aafac76d.js";import{D as R}from"./data-30d5a842.js";import"./index-13860ba0.js";const Me=()=>[{title:"序号",width:100,dataIndex:"sortTableNo",show:!0,ellipsis:!0,tooltip:!0,align:"center"},{title:"用户昵称",dataIndex:"nicKname",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>u(o.nicKname)},{title:"用户手机号码",dataIndex:"phone",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>u(o.phone)},{title:"批次",dataIndex:"pc",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.pc)},{title:"志愿类型",dataIndex:"zyms",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.zyms)},{title:"用户省份",dataIndex:"province",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.province)},{title:"填报意向",dataIndex:"pattern",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.pattern)},{title:"是否已出方案",dataIndex:"schemeGeneration",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.schemeGeneration)},{title:"服务进度",dataIndex:"progress",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.progress)},{title:"志愿填写日期",dataIndex:"submtTime",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(ve(o.submtTime,"YYYY-MM-DD HH:mm:ss","-"))},{title:"下载",width:220,dataIndex:"download",slotName:"download",show:!0,align:"center"},{title:"操作",width:300,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],Ue=[{label:"专业+院校",value:"专业+院校"},{label:"院校+专业",value:"院校+专业"},{label:"院校+专业组",value:"院校+专业组"}],je=[{label:"保专业",value:"保专业"},{label:"保院校",value:"保院校"}],Le=[{label:"男",value:"男"},{label:"女",value:"女"}],Re=[{label:"提交方案",value:"1"},{label:"电话沟通",value:"2"},{label:"短信通知",value:"3"},{label:"下载方案",value:"4"}],De=[{label:"本科",value:"本科"},{label:"专科",value:"专科"}],re=[{label:"是",value:"是"},{label:"否",value:"否"}],Ee=[{value:"物",label:"物"},{value:"化",label:"化"},{value:"生",label:"生"},{value:"史",label:"史"},{value:"地",label:"地"},{value:"政",label:"政"}],Ke=[{value:"内蒙古",label:"内蒙古"},{value:"宁夏",label:"宁夏"},{value:"甘肃",label:"甘肃"},{value:"新疆",label:"新疆"},{value:"青海",label:"青海"},{value:"西藏",label:"西藏"},{value:"黑龙江",label:"黑龙江"},{value:"贵州",label:"贵州"}],$e={style:{width:"100%","max-height":"300px",border:"1px solid #999","overflow-y":"auto","border-radius":"12px",padding:"20px"}},qe={style:{display:"flex","align-items":"center"}},Oe={style:{height:"25px",width:"25px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",border:"1px solid #999"}},Ne={style:{"margin-left":"10px"}},Pe=Z({name:"zsAddExpertFill"}),Ae=Z({...Pe,props:{data:{default:()=>({})},list:{default:()=>({})}},emits:["close","success"],setup(o,{emit:S}){const T=o,K=be(),h=we(()=>{const m=T.data.submtTime;return ve(m,"YYYY-MM-DD HH:mm:ss","-")}),[y,I]=de(null),{form:t,formRef:Q}=ge(()=>({...T.data})),$=E(t.value.desiredDestination.split("/")),f=E(t.value.majorField.split("/")),d=E(t.value.xk.split("/")),W=E(t.value.bjsf?t.value.bjsf.split("/"):""),q=E([]),M=E([]),O=E([]),ne={score:{required:!0,message:"请输入用户分数"},phone:{required:!0,message:"请输入用户手机号码"},pc:{required:!0,message:"请选择批次"}},ee=async()=>{const{res:m,err:n}=await L(()=>R.getXklmList({cc:t.value.zylcc}),{successMsg:""});n||(q.value=m==null?void 0:m.data)},B=async()=>{const{res:m,err:n}=await L(()=>R.getOpenProvince({}),{successMsg:""});n||(M.value=m==null?void 0:m.data)},P=async()=>{const{res:m,err:n}=await L(()=>R.getPcList({province:t.value.province,xk:t.value.gkms=="文理科"?d.value[0]:d.value.join("/"),score:t.value.score}),{successMsg:""});n||(O.value=m==null?void 0:m.data)};ee(),B(),P();const G=m=>{t.value.gkms=M.value.find(n=>n.sf==m).gkms,t.value.zyms=M.value.find(n=>n.sf==m).zyms,t.value.xk="",t.value.pc="",O.value=[],d.value=[]},A=()=>{q.value=[],f.value=[],t.value.majorField="",ee()},N=()=>{j.error("最多选择3个科目")},k=()=>{j.error("主选科目可选1个,次选科目可选2个")},c=async()=>{t.value.pc="",O.value=[],await D()},i=async()=>{t.value.pc="",O.value=[],await D()},x=async()=>{await D()},D=()=>{if(!t.value.score){j.error("请输入分数");return}if(d.value.length==0){j.error("请选择选科");return}if(["3+1+2","3+3"].includes(t.value.gkms)&&d.value.length<3){j.error("请选择对应数量选科");return}P()},F=()=>{if(t.value.progress!=="电话沟通"){S("close");return}Q.value.validate(m=>{if(!m){if(!t.value.score){j.error("请输入分数");return}if(d.value.length==0){j.error("请选择选科");return}if(["3+1+2","3+3"].includes(t.value.gkms)&&d.value.length<3){j.error("请选择对应数量选科");return}if($.value.length==0){j.error("请选择期望去向");return}if(f.value.length==0){j.error("请选择专业方向");return}U()}})},U=async()=>{const{err:m}=await L(()=>R.callConfirmation({id:t.value.id,phone:t.value.phone,province:t.value.province,xk:t.value.gkms=="文理科"?d.value[0]:d.value.join("/"),sex:t.value.sex,majorField:f.value.join("/"),desiredDestination:$.value.join("/"),pattern:t.value.zyms=="专业+院校"?null:t.value.pattern=="保专业"?"1":"2",remark:t.value.remark,score:t.value.score,gkms:t.value.gkms,zyms:t.value.zyms,nicKname:t.value.nicKname,pc:t.value.pc,isSm:t.value.isSm,isSr:t.value.isSr,isZwhz:t.value.isZwhz,zylcc:t.value.zylcc,zymc:t.value.zymc,isDlzy:t.value.isDlzy,isZxjh:t.value.isZxjh,bjsf:W.value.join("/")}),{before:()=>I("okLoading"),after:()=>I(null)});m||(S("success"),S("close"))};return(m,n)=>{const z=p("a-input"),b=p("a-form-item"),g=p("a-grid-item"),w=p("a-select"),s=p("a-option"),H=p("a-optgroup"),me=p("a-textarea"),se=p("a-button"),ye=p("a-grid"),xe=p("a-form"),ke=p("a-modal");return v(),V(ke,{fullscreen:"",title:"专家填报详情","unmount-on-close":"",visible:"","align-center":!1,"mask-closable":!1,"ok-loading":e(y)==="okLoading",onCancel:n[27]||(n[27]=r=>S("close")),onOk:F},{default:a(()=>[l(xe,{ref_key:"formRef",ref:Q,model:e(t),"label-align":"left",size:"large",rules:ne,"auto-label-width":""},{default:a(()=>[l(ye,{cols:2,"col-gap":24},{default:a(()=>[l(g,null,{default:a(()=>[l(b,{field:"nicKname",label:"用户昵称:"},{default:a(()=>[l(z,{modelValue:e(t).nicKname,"onUpdate:modelValue":n[0]||(n[0]=r=>e(t).nicKname=r),modelModifiers:{trim:!0},placeholder:"请输入用户昵称",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"sex",label:"性别:",required:""},{default:a(()=>[l(w,{modelValue:e(t).sex,"onUpdate:modelValue":n[1]||(n[1]=r=>e(t).sex=r),options:[...e(Le)],placeholder:"请选择性别",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"score",label:"分数:",required:""},{default:a(()=>[l(z,{modelValue:e(t).score,"onUpdate:modelValue":n[2]||(n[2]=r=>e(t).score=r),modelModifiers:{trim:!0},placeholder:"请输入分数",onChange:c,disabled:e(t).progress!="电话沟通"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"wc",label:"位次:"},{default:a(()=>[l(z,{modelValue:e(t).wc,"onUpdate:modelValue":n[3]||(n[3]=r=>e(t).wc=r),modelModifiers:{trim:!0},placeholder:"请输入位次",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"phone",label:"用户手机号码:",required:""},{default:a(()=>[l(z,{modelValue:e(t).phone,"onUpdate:modelValue":n[4]||(n[4]=r=>e(t).phone=r),modelModifiers:{trim:!0},placeholder:"请输入用户手机号码",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"gkms",label:"高考模式:"},{default:a(()=>[l(z,{modelValue:e(t).gkms,"onUpdate:modelValue":n[5]||(n[5]=r=>e(t).gkms=r),modelModifiers:{trim:!0},placeholder:"请输入高考模式",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"province",label:"用户省份:",required:""},{default:a(()=>[l(w,{modelValue:e(t).province,"onUpdate:modelValue":n[6]||(n[6]=r=>e(t).province=r),placeholder:"请输入用户省份","allow-search":"",onChange:G,disabled:e(t).progress!="电话沟通"},{default:a(()=>[(v(!0),Y(ae,null,te(M.value,(r,C)=>(v(),V(s,{key:C},{default:a(()=>[_(oe(r.sf),1)]),_:2},1024))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"zyms",label:"志愿类型:"},{default:a(()=>[l(z,{modelValue:e(t).zyms,"onUpdate:modelValue":n[7]||(n[7]=r=>e(t).zyms=r),placeholder:"请输入志愿类型",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"选科:",required:""},{default:a(()=>[e(t).gkms=="文理科"?(v(),V(w,{key:0,modelValue:d.value,"onUpdate:modelValue":n[8]||(n[8]=r=>d.value=r),placeholder:"请输入选科",multiple:"",onChange:i,disabled:e(t).progress!="电话沟通"},{default:a(()=>[l(s,{disabled:d.value.includes("理")},{default:a(()=>[_("文")]),_:1},8,["disabled"]),l(s,{disabled:d.value.includes("文")},{default:a(()=>[_("理")]),_:1},8,["disabled"])]),_:1},8,["modelValue","disabled"])):J("",!0),e(t).gkms=="3+3"?(v(),V(w,{key:1,modelValue:d.value,"onUpdate:modelValue":n[9]||(n[9]=r=>d.value=r),placeholder:"请输入选科",multiple:"","allow-clear":"",limit:3,onExceedLimit:N,scrollbar:!0,onChange:i,disabled:e(t).progress!="电话沟通"},{default:a(()=>[(v(!0),Y(ae,null,te(e(Ee),(r,C)=>(v(),V(s,{key:C},{default:a(()=>[_(oe(r.label),1)]),_:2},1024))),128))]),_:1},8,["modelValue","disabled"])):J("",!0),e(t).gkms=="3+1+2"?(v(),V(w,{key:2,modelValue:d.value,"onUpdate:modelValue":n[10]||(n[10]=r=>d.value=r),placeholder:"请输入选科",multiple:"","allow-clear":"",limit:3,onExceedLimit:k,scrollbar:!0,onChange:i,disabled:e(t).progress!="电话沟通"},{default:a(()=>[l(H,{label:"首选"},{default:a(()=>[l(s,{disabled:d.value.includes("史")},{default:a(()=>[_("物")]),_:1},8,["disabled"]),l(s,{disabled:d.value.includes("物")},{default:a(()=>[_("史")]),_:1},8,["disabled"])]),_:1}),l(H,{label:"次选"},{default:a(()=>[l(s,null,{default:a(()=>[_("化")]),_:1}),l(s,null,{default:a(()=>[_("生")]),_:1}),l(s,null,{default:a(()=>[_("政")]),_:1}),l(s,null,{default:a(()=>[_("地")]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"])):J("",!0)]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"schemeGeneration",label:"是否已出方案:"},{default:a(()=>[l(z,{modelValue:e(t).schemeGeneration,"onUpdate:modelValue":n[11]||(n[11]=r=>e(t).schemeGeneration=r),modelModifiers:{trim:!0},placeholder:"请输入是否已出方案",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"pattern",label:"填报意向:"},{default:a(()=>[l(w,{modelValue:e(t).pattern,"onUpdate:modelValue":n[12]||(n[12]=r=>e(t).pattern=r),options:[...e(je)],placeholder:"请选择报意向",disabled:e(t).zyms=="专业+院校"||e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"progress",label:"进行步骤:"},{default:a(()=>[l(z,{modelValue:e(t).progress,"onUpdate:modelValue":n[13]||(n[13]=r=>e(t).progress=r),modelModifiers:{trim:!0},placeholder:"请输入进行步骤",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"pc",label:"批次:",required:""},{default:a(()=>[l(w,{modelValue:e(t).pc,"onUpdate:modelValue":n[14]||(n[14]=r=>e(t).pc=r),options:[...O.value],placeholder:"请选择批次",onClick:x,disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"submtTime",label:"志愿填写日期:"},{default:a(()=>[l(z,{modelValue:e(h),"onUpdate:modelValue":n[15]||(n[15]=r=>ze(h)?h.value=r:null),modelModifiers:{trim:!0},placeholder:"请输入志愿填写日期",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"是否色盲:"},{default:a(()=>[l(w,{modelValue:e(t).isSm,"onUpdate:modelValue":n[16]||(n[16]=r=>e(t).isSm=r),options:[...e(re)],placeholder:"请选择是否色盲",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"是否色弱:"},{default:a(()=>[l(w,{modelValue:e(t).isSr,"onUpdate:modelValue":n[17]||(n[17]=r=>e(t).isSr=r),options:[...e(re)],placeholder:"请选择是否色弱",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"是否接受中外合作:"},{default:a(()=>[l(w,{modelValue:e(t).isZwhz,"onUpdate:modelValue":n[18]||(n[18]=r=>e(t).isZwhz=r),options:[...e(re)],placeholder:"请选择是否接受中外合作",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"是否专项计划:"},{default:a(()=>[l(w,{modelValue:e(t).isZxjh,"onUpdate:modelValue":n[19]||(n[19]=r=>e(t).isZxjh=r),options:[...e(re)],placeholder:"请选择是否专项计划",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"是否单列专业:"},{default:a(()=>[l(w,{modelValue:e(t).isDlzy,"onUpdate:modelValue":n[20]||(n[20]=r=>e(t).isDlzy=r),options:[...e(re)],placeholder:"请选择是否单列专业",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"可去边疆省份 :"},{default:a(()=>[l(w,{modelValue:W.value,"onUpdate:modelValue":n[21]||(n[21]=r=>W.value=r),multiple:"",options:[...e(Ke)],placeholder:"请选择可去边疆省份 ",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{field:"remark",label:"备注:"},{default:a(()=>[l(me,{modelValue:e(t).remark,"onUpdate:modelValue":n[22]||(n[22]=r=>e(t).remark=r),modelModifiers:{trim:!0},placeholder:"请输入备注",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"期望去向:",required:""},{default:a(()=>[l(w,{modelValue:$.value,"onUpdate:modelValue":n[23]||(n[23]=r=>$.value=r),placeholder:"请输入期望去向",multiple:"","allow-clear":"",scrollbar:!0,disabled:e(t).progress!="电话沟通"},{default:a(()=>[(v(!0),Y(ae,null,te(e(K).provinceList,(r,C)=>(v(),V(s,{key:C},{default:a(()=>[_(oe(r.value),1)]),_:2},1024))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"专业类层次:"},{default:a(()=>[l(w,{modelValue:e(t).zylcc,"onUpdate:modelValue":n[24]||(n[24]=r=>e(t).zylcc=r),options:[...e(De)],placeholder:"请选择专业类层次",onChange:A,disabled:e(t).progress!="电话沟通"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(g,null,{default:a(()=>[l(b,{label:"专业方向:",required:""},{default:a(()=>[l(w,{modelValue:f.value,"onUpdate:modelValue":n[25]||(n[25]=r=>f.value=r),placeholder:"请输入专业方向",multiple:"","allow-clear":"",scrollbar:!0,disabled:e(t).progress!="电话沟通"},{default:a(()=>[(v(!0),Y(ae,null,te(q.value,(r,C)=>(v(),V(H,{key:C,label:r.xkml},{default:a(()=>[(v(!0),Y(ae,null,te(r.childs,(le,Ve)=>(v(),V(s,{key:Ve,value:le.zyl},{default:a(()=>[_(oe(le.zyl),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),l(b,{label:"专业名称:",field:"zymc"},{default:a(()=>[l(me,{modelValue:e(t).zymc,"onUpdate:modelValue":n[26]||(n[26]=r=>e(t).zymc=r),modelModifiers:{trim:!0},placeholder:"请输入专业名称（多个专业以' / '分割）",disabled:e(t).progress!="电话沟通"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),f.value.length>0?(v(),V(g,{key:0},{default:a(()=>[X("div",$e,[(v(!0),Y(ae,null,te(f.value,(r,C)=>(v(),Y("div",{key:C,style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"5px"}},[X("div",qe,[X("div",Oe,oe(C+1),1),X("div",Ne,oe(r),1)]),X("div",null,[l(se,{text:"",style:{"margin-right":"5px"},onClick:le=>e(Se)(f.value,C),type:"primary",disabled:e(t).progress!="电话沟通"},{default:a(()=>[_("上移")]),_:2},1032,["onClick","disabled"]),l(se,{text:"",style:{"margin-right":"5px"},onClick:le=>e(Te)(f.value,C),type:"primary",disabled:e(t).progress!="电话沟通"},{default:a(()=>[_("下移")]),_:2},1032,["onClick","disabled"]),l(se,{text:"",style:{"margin-right":"5px"},onClick:le=>e(fe)(f.value,C),type:"primary",disabled:e(t).progress!="电话沟通"},{default:a(()=>[_("置顶")]),_:2},1032,["onClick","disabled"]),l(se,{text:"",onClick:le=>e(fe)(f.value,C,"bottom"),type:"primary",disabled:e(t).progress!="电话沟通"},{default:a(()=>[_("置底")]),_:2},1032,["onClick","disabled"])])]))),128))])]),_:1})):J("",!0)]),_:1})]),_:1},8,["model"])]),_:1},8,["ok-loading"])}}});const _e=()=>[{title:"今年(招生计划)",children:[{title:"序号",dataIndex:"sortTableNo",align:"center"},{title:"院校录取概率",dataIndex:"yxLqgl",tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.yxLqgl)},{title:"院校代码",dataIndex:"yxdm",tooltip:!0,align:"center",render:({record:o})=>u(o.yxdm)},{title:"院校名称",dataIndex:"yxmc",align:"center",render:({record:o})=>u(o.yxmc)},{title:"层次",dataIndex:"cc",tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.cc)},{title:"地区/城市",dataIndex:"yxsf",tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.yxsf)},{title:"类型",dataIndex:"yxlx",tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.yxlx)},{title:"性质",dataIndex:"xz",tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>u(o.xz)},{title:"排名",dataIndex:"pm",tooltip:!0,align:"center",render:({record:o})=>u(o.pm)},{title:"专业录取概率",dataIndex:"zyLqgl",ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>u(o.zyLqgl)},{title:"专业代码",dataIndex:"zydm",tooltip:!0,align:"center",render:({record:o})=>u(o.zydm)},{title:"专业名称",dataIndex:"zymc",width:400,align:"center",render:({record:o})=>u(o.zymc)},{title:"计划人数",dataIndex:"lqrs",tooltip:!0,align:"center",render:({record:o})=>u(o.lqrs)},{title:"学费",dataIndex:"xf",tooltip:!0,align:"center",render:({record:o})=>u(o.xf)},{title:"学制",dataIndex:"xz",tooltip:!0,align:"center",render:({record:o})=>u(o.xz)},{title:"选科",dataIndex:"xk",tooltip:!0,align:"center",render:({record:o})=>u(o.xk)}]},{title:"去年(招生数据)",children:[{title:"录取人数",dataIndex:"lqrs1",tooltip:!0,align:"center",render:({record:o})=>u(o.lqrs1)},{title:"计划人数",dataIndex:"jhrs1",tooltip:!0,align:"center",render:({record:o})=>u(o.jhrs1)},{title:"最低分",dataIndex:"zdf1",tooltip:!0,align:"center",render:({record:o})=>u(o.zdf1)},{title:"最低位次",dataIndex:"zdfwc1",tooltip:!0,align:"center",render:({record:o})=>u(o.zdfwc1)}]},{title:"前年(招生数据)",children:[{title:"录取人数",dataIndex:"lqrs2",tooltip:!0,align:"center",render:({record:o})=>u(o.lqrs2)},{title:"计划人数",dataIndex:"jhrs2",tooltip:!0,align:"center",render:({record:o})=>u(o.jhrs2)},{title:"最低分",dataIndex:"zdf2",tooltip:!0,align:"center",render:({record:o})=>u(o.zdf2)},{title:"最低位次",dataIndex:"zdfwc2",tooltip:!0,align:"center",render:({record:o})=>u(o.zdfwc2)}]},{title:"大前年(招生数据)",children:[{title:"录取人数",dataIndex:"lqrs3",tooltip:!0,align:"center",render:({record:o})=>u(o.lqrs3)},{title:"计划人数",dataIndex:"jhrs3",tooltip:!0,align:"center",render:({record:o})=>u(o.jhrs3)},{title:"最低分",dataIndex:"zdf3",tooltip:!0,align:"center",render:({record:o})=>u(o.zdf3)},{title:"最低位次",dataIndex:"zdfwc3",tooltip:!0,align:"center",render:({record:o})=>u(o.zdfwc3)}]}],Fe=Z({name:"zsMajorSchool"}),Ye=Z({...Fe,props:{data:{default:()=>({})}},emits:["close","success"],setup(o,{emit:S}){const T=o,K=E(!0),h={x:3e3},{warningModal:y}=pe(),[I,t]=de(null),{selectRow:Q,columnsData:$,visibleColumnsData:f,tableBaseOptions:d,resetData:W,extendTableList:q,createRowNo:M,setSelectRow:O,changeTableColumn:ne,changeTableSize:ee}=ue(_e(),()=>N()),B=async()=>{const{res:k,err:c}=await L(()=>R.adjustTheResults({sid:T.data.id,ids:d.selectedKeys}),{before:()=>t("重新生成"),after:()=>t(null),successMsg:"操作成功"});c||(d.selectedKeys=[],k&&N())},P=()=>{y("确认生成报告吗",async k=>{await L(()=>R.confirmGenerationReport({id:T.data.id}),{after:()=>t(null),before:()=>t("确认生成报告"),successMsg:"操作成功"}),k(!0)})},{data:G,loading:A,initData:N}=ce(async()=>{const{res:k,err:c}=await L(()=>R.viewMajorSchoolResult({sid:T.data.id}));if(!c)return q(k.data)});return(k,c)=>{const i=p("icon-refresh"),x=p("a-button"),D=p("a-tooltip"),F=p("a-space"),U=p("a-table"),m=p("a-modal");return v(),V(m,{title:"填报结果(专业+院校)","unmount-on-close":"",visible:"",fullscreen:"","ok-text":"关闭","align-center":!1,"mask-closable":!1,"hide-cancel":"","ok-loading":e(I)==="okLoading",onCancel:c[1]||(c[1]=n=>S("close")),onOk:c[2]||(c[2]=n=>S("close"))},{default:a(()=>[l(F,{style:{"margin-bottom":"20px"}},{default:a(()=>[l(D,{content:"选中要屏蔽的院校专业，点击重新生成",position:"rb"},{default:a(()=>[l(x,{type:"outline",loading:e(I)==="重新生成",disabled:!e(d).selectedKeys.length,onClick:B},{icon:a(()=>[l(i)]),default:a(()=>[_(" 重新生成 ")]),_:1},8,["loading","disabled"])]),_:1}),l(x,{type:"outline",loading:e(I)==="确认生成报告",onClick:P},{default:a(()=>[_(" 确认生成报告 ")]),_:1},8,["loading"])]),_:1}),l(U,{"selected-keys":e(d).selectedKeys,"onUpdate:selectedKeys":c[0]||(c[0]=n=>e(d).selectedKeys=n),class:"zs-table","default-expand-all-rows":"","row-key":"id",data:e(G),scroll:h,scrollbar:K.value,bordered:{headerCell:!0},"row-selection":e(d).rowSelection,size:e(d).size,columns:e($),stripe:e(d).stripe,loading:e(A),pagination:e(d).pagination},null,8,["selected-keys","data","scrollbar","row-selection","size","columns","stripe","loading","pagination"])]),_:1},8,["ok-loading"])}}}),Ze=Z({name:"zsSchoolMajor"}),Be=Z({...Ze,props:{data:{default:()=>({})}},emits:["close","success"],setup(o,{emit:S}){const T=o,K=E(!0),h={x:3e3},{warningModal:y}=pe(),[I,t]=de(null),{selectRow:Q,columnsData:$,visibleColumnsData:f,tableBaseOptions:d,resetData:W,extendTableList:q,createRowNo:M,setSelectRow:O,changeTableColumn:ne,changeTableSize:ee}=ue(_e(),()=>N()),B=async()=>{const{res:k,err:c}=await L(()=>R.adjustTheResults({sid:T.data.id,ids:d.selectedKeys}),{before:()=>t("重新生成"),after:()=>t(null),successMsg:"操作成功"});c||(d.selectedKeys=[],k&&N())},P=()=>{y("确认生成报告吗",async k=>{await L(()=>R.confirmGenerationReport({id:T.data.id}),{after:()=>t(null),before:()=>t("确认生成报告"),successMsg:"操作成功"}),k(!0)})},{data:G,loading:A,initData:N}=ce(async()=>{const{res:k,err:c}=await L(()=>R.viewMajorSchoolResult({sid:T.data.id}));if(!c)return q(k.data.map(i=>(i.children=i.childs.map(x=>(x.disabled=!0,x)),i)))});return(k,c)=>{var n;const i=p("icon-refresh"),x=p("a-button"),D=p("a-tooltip"),F=p("a-space"),U=p("a-table"),m=p("a-modal");return v(),V(m,{title:((n=o.data)==null?void 0:n.zyms)=="院校+专业"?"填报结果(院校+专业)":"填报结果(院校+专业组)","unmount-on-close":"",visible:"",fullscreen:"","ok-text":"关闭","align-center":!1,"mask-closable":!1,"hide-cancel":"","ok-loading":e(I)==="okLoading",onCancel:c[1]||(c[1]=z=>S("close")),onOk:c[2]||(c[2]=z=>S("close"))},{default:a(()=>[l(F,{style:{"margin-bottom":"20px"}},{default:a(()=>[l(D,{content:"选中要屏蔽的院校专业，点击重新生成",position:"rb"},{default:a(()=>[l(x,{type:"outline",loading:e(I)==="重新生成",disabled:!e(d).selectedKeys.length,onClick:B},{icon:a(()=>[l(i)]),default:a(()=>[_(" 重新生成 ")]),_:1},8,["loading","disabled"])]),_:1}),l(x,{type:"outline",loading:e(I)==="确认生成报告",onClick:P},{default:a(()=>[_(" 确认生成报告 ")]),_:1},8,["loading"])]),_:1}),l(U,{"selected-keys":e(d).selectedKeys,"onUpdate:selectedKeys":c[0]||(c[0]=z=>e(d).selectedKeys=z),class:"zs-table","row-key":"id",data:e(G),scroll:h,scrollbar:K.value,"default-expand-all-rows":"",bordered:{headerCell:!0},"row-selection":e(d).rowSelection,size:e(d).size,columns:e($),stripe:e(d).stripe,loading:e(A),pagination:e(d).pagination,"show-empty-tree":"",style:{"margin-top":"20px"}},null,8,["selected-keys","data","scrollbar","row-selection","size","columns","stripe","loading","pagination"])]),_:1},8,["title","ok-loading"])}}}),Ge=["href","download"],He=["href","download"],Xe=Z({name:"ExpertFillList"}),tl=Z({...Xe,setup(o){he(),Ce();const S=be(),{warningModal:T}=pe(),[K,h]=de(null),{form:y,resetForm:I}=ge(()=>({userName:"",phone:"",createStartTime:"",createEndTime:"",province:"",zyms:"",isPlan:"",procedure:""}),()=>d()),{selectRow:t,columnsData:Q,visibleColumnsData:$,tableBaseOptions:f,resetData:d,extendTableList:W,createRowNo:q,setSelectRow:M,changeTableColumn:O,changeTableSize:ne}=ue(Me(),()=>k()),ee=async()=>{T(`确定选中的${f.selectedKeys.length}数据已电话沟通吗？`,async c=>{const{err:i}=await L(()=>R.getIsPhoneCom({ids:f.selectedKeys}),{successMsg:"操作成功"});i||(c(!0),f.selectedKeys=[],k())})},B=c=>{c.schemeLink||j.error("暂未上传报告")},P=c=>{c.tbExecl||j.error("暂未上传报告")},G=c=>{c.zyms=="专业+院校"?h("zsMajorSchool"):h("zsSchoolMajor")},{data:A,loading:N,initData:k}=ce(async()=>{const{res:c,err:i}=await L(()=>R.getExpertFillList({...y.value,createStartTime:y.value.createStartTime,createEndTime:y.value.createEndTime,currentPage:f.pagination.current,pageSize:f.pagination.pageSize,pagingOrNot:"1"}));return i?[]:(f.pagination.total=c.data.totalCount,c.data.resultList.map((x,D)=>({sortTableNo:q(D),score:x.score*1,wc:x.wc*1,...x})))});return E([]),E([]),(c,i)=>{const x=p("a-button"),D=p("a-space"),F=p("a-input"),U=p("a-form-item"),m=p("a-grid-item"),n=p("a-select"),z=p("a-date-picker"),b=p("a-grid"),g=p("a-form"),w=p("a-table");return v(),Y("div",null,[l(Ie,{fold:"","table-columns":e(Q),"table-size":e(f).size,onResetSearch:e(I),onSearch:e(d),onChangeTableSize:e(ne),onChangeTableColumn:e(O)},{operate:a(()=>[l(D,null,{default:a(()=>[l(x,{type:"outline",loading:e(K)==="已电话沟通",disabled:!e(f).selectedKeys.length,onClick:ee},{default:a(()=>[_(" 已电话沟通 ")]),_:1},8,["loading","disabled"])]),_:1})]),form:a(()=>[l(g,{model:e(y),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[l(b,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:a(()=>[l(m,null,{default:a(()=>[l(U,{label:"用户昵称:"},{default:a(()=>[l(F,{modelValue:e(y).userName,"onUpdate:modelValue":i[0]||(i[0]=s=>e(y).userName=s),modelModifiers:{trim:!0},placeholder:"请输入用户昵称"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(U,{label:"用户手机号码:"},{default:a(()=>[l(F,{modelValue:e(y).phone,"onUpdate:modelValue":i[1]||(i[1]=s=>e(y).phone=s),modelModifiers:{trim:!0},placeholder:"请输入用户手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(U,{label:"志愿类型:"},{default:a(()=>[l(n,{modelValue:e(y).zyms,"onUpdate:modelValue":i[2]||(i[2]=s=>e(y).zyms=s),options:[...e(ie),...e(Ue)],placeholder:"请选择志愿类型"},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(U,{label:"用户省份:"},{default:a(()=>[l(n,{modelValue:e(y).province,"onUpdate:modelValue":i[3]||(i[3]=s=>e(y).province=s),modelModifiers:{trim:!0},options:[...e(ie),...e(S).provinceList],placeholder:"请选择省份"},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(U,{label:"服务进度:"},{default:a(()=>[l(n,{modelValue:e(y).procedure,"onUpdate:modelValue":i[4]||(i[4]=s=>e(y).procedure=s),modelModifiers:{trim:!0},options:[...e(ie),...e(Re)],placeholder:"请选择服务进度"},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(U,{label:"志愿填写日期范围:"},{default:a(()=>[l(z,{style:{width:"200px"},modelValue:e(y).createStartTime,"onUpdate:modelValue":i[5]||(i[5]=s=>e(y).createStartTime=s)},null,8,["modelValue"]),l(z,{style:{width:"200px"},modelValue:e(y).createEndTime,"onUpdate:modelValue":i[6]||(i[6]=s=>e(y).createEndTime=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),table:a(()=>[l(w,{"selected-keys":e(f).selectedKeys,"onUpdate:selectedKeys":i[7]||(i[7]=s=>e(f).selectedKeys=s),class:"zs-table","row-key":"id",data:e(A),"row-selection":e(f).rowSelection,bordered:e(f).bordered,pagination:e(f).pagination,size:e(f).size,columns:e($),stripe:e(f).stripe,loading:e(N)},{download:a(({record:s})=>[s.schemeLink?(v(),V(x,{key:0,type:"text"},{default:a(()=>[X("a",{href:s.schemeLink,download:s.schemeLink},"下载报告",8,Ge)]),_:2},1024)):(v(),V(x,{key:1,type:"text",onClick:H=>B(s)},{default:a(()=>[_("下载报告")]),_:2},1032,["onClick"])),s.tbExecl?(v(),V(x,{key:2,type:"text"},{default:a(()=>[X("a",{href:s.tbExecl,download:s.tbExecl},"下载Execl",8,He)]),_:2},1024)):(v(),V(x,{key:3,type:"text",onClick:H=>P(s)},{default:a(()=>[_("下载Execl")]),_:2},1032,["onClick"]))]),operate:a(({record:s})=>[l(x,{type:"text",onClick:H=>e(M)(s,()=>e(h)("zsAddExpertFill"))},{default:a(()=>[_("确认填报信息")]),_:2},1032,["onClick"]),l(x,{type:"text",onClick:H=>e(M)(s,()=>G(s))},{default:a(()=>[_("确认生成报告")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(K)==="zsAddExpertFill"?(v(),V(Ae,{key:0,data:e(t),list:e(A),onSuccess:e(k),onClose:i[8]||(i[8]=s=>e(M)({},()=>e(h)(null)))},null,8,["data","list","onSuccess"])):J("",!0),e(K)==="zsMajorSchool"?(v(),V(Ye,{key:1,data:e(t),onSuccess:e(k),onClose:i[9]||(i[9]=s=>e(M)({},()=>e(h)(null)))},null,8,["data","onSuccess"])):J("",!0),e(K)==="zsSchoolMajor"?(v(),V(Be,{key:2,data:e(t),onSuccess:e(k),onClose:i[10]||(i[10]=s=>e(M)({},()=>e(h)(null)))},null,8,["data","onSuccess"])):J("",!0)])}}});export{tl as default};
