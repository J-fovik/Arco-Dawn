import{d as v,g as H,h as N,i as O,r as d,o as R,l as K,w as t,a as l,b as e,m as L,n as Y,j as Z,c as ee,e as q,p as M,q as le}from"./index-d007178a.js";import{f as w,c as P,_ as te}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as B}from"./options-aafac76d.js";import{R as $}from"./recruit-3c2f52ae.js";import"./index-13860ba0.js";const ae=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,tooltip:!0,ellipsis:!0,align:"center"},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:i})=>w(i.sf)},{title:"年份",dataIndex:"nf",show:!0,align:"center",render:({record:i})=>w(i.nf)},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:i})=>w(i.yxmc)},{title:"批次",dataIndex:"pc",show:!0,align:"center",render:({record:i})=>w(i.pc)},{title:"最低分",dataIndex:"zdf",show:!0,align:"right",render:({record:i})=>w(i.zdf)},{title:"最低分位次",dataIndex:"zdfwc",show:!0,align:"right",render:({record:i})=>w(i.zdfwc)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],oe=v({name:"zsAddProHistoricalData"}),ne=v({...oe,props:{data:{default:()=>({})}},emits:["close","success"],setup(i,{emit:y}){const g=i,b=H(),[S,m]=N(null),{form:n,formRef:V}=O(()=>({...g.data})),k={nf:{required:!0,message:"请输入年份"},sf:{required:!0,message:"请输入省份"},pc:{required:!0,message:"请输入批次"},kl:{required:!0,message:"请输入科类"},yxmc:{required:!0,message:"请输入院校名称"},zymc:{required:!0,message:"请输入专业名称"},zdfwc:{required:!0,message:"请输入最低分位次"},zdf:{required:!0,message:"请输入最低分"},zslx:{required:!0,message:"请输入招生类型"}},C=()=>{V.value.validate(_=>{_||(g.data.id?s("editSchoolHistory"):s("addSchoolHistory"))})},s=async _=>{const{err:o}=await L(()=>$[_](n.value),{before:()=>m("okLoading"),after:()=>m(null)});o||(y("success"),y("close"))};return(_,o)=>{const f=d("a-input"),r=d("a-form-item"),u=d("a-grid-item"),z=d("a-select"),U=d("a-textarea"),h=d("a-grid"),x=d("a-form"),c=d("a-modal");return R(),K(c,{title:e(P)("院校历史数据",!!g.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"60vw","align-center":!1,"mask-closable":!1,"ok-loading":e(S)==="okLoading",onCancel:o[11]||(o[11]=a=>y("close")),onOk:C},{default:t(()=>[l(x,{ref_key:"formRef",ref:V,model:e(n),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:t(()=>[l(h,{cols:2,"col-gap":24},{default:t(()=>[l(u,null,{default:t(()=>[l(r,{field:"nf",label:"年份:"},{default:t(()=>[l(f,{modelValue:e(n).nf,"onUpdate:modelValue":o[0]||(o[0]=a=>e(n).nf=a),placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"pc",label:"批次:"},{default:t(()=>[l(f,{modelValue:e(n).pc,"onUpdate:modelValue":o[1]||(o[1]=a=>e(n).pc=a),placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"sf",label:"省份:"},{default:t(()=>[l(z,{modelValue:e(n).sf,"onUpdate:modelValue":o[2]||(o[2]=a=>e(n).sf=a),placeholder:"请输入省份","allow-search":"",options:[...e(B),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"yxmc",label:"院校名称:"},{default:t(()=>[l(f,{modelValue:e(n).yxmc,"onUpdate:modelValue":o[3]||(o[3]=a=>e(n).yxmc=a),placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"zdfwc",label:"最低分位次:"},{default:t(()=>[l(f,{modelValue:e(n).zdfwc,"onUpdate:modelValue":o[4]||(o[4]=a=>e(n).zdfwc=a),placeholder:"请输入最低分位次"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"zdf",label:"最低分:"},{default:t(()=>[l(f,{modelValue:e(n).zdf,"onUpdate:modelValue":o[5]||(o[5]=a=>e(n).zdf=a),placeholder:"请输入最低分"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"yxdm",label:"院校代码:"},{default:t(()=>[l(f,{modelValue:e(n).yxdm,"onUpdate:modelValue":o[6]||(o[6]=a=>e(n).yxdm=a),placeholder:"请输入院校代码"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"xk",label:"首选科目:"},{default:t(()=>[l(f,{modelValue:e(n).xk,"onUpdate:modelValue":o[7]||(o[7]=a=>e(n).xk=a),placeholder:"请输入首选科目"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"zx",label:"再选科目:"},{default:t(()=>[l(f,{modelValue:e(n).zx,"onUpdate:modelValue":o[8]||(o[8]=a=>e(n).zx=a),placeholder:"请输入再选科目"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"zyz",label:"专业组:"},{default:t(()=>[l(f,{modelValue:e(n).zyz,"onUpdate:modelValue":o[9]||(o[9]=a=>e(n).zyz=a),placeholder:"请输入专业组"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:t(()=>[l(r,{field:"yxbz",label:"院校备注:"},{default:t(()=>[l(U,{modelValue:e(n).yxbz,"onUpdate:modelValue":o[10]||(o[10]=a=>e(n).yxbz=a),"auto-size":{minRows:8},placeholder:"请输入院校备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),de=v({name:"zsSummary"}),se=v({...de,props:{data:{default:()=>({})}},emits:["close","success"],setup(i,{emit:y}){const g=i,b=H(),[S,m]=N(null),{form:n,formRef:V}=O(()=>({nf:"2022",...g.data})),k={nf:{required:!0,message:"请输入年份"},province:{required:!0,message:"请输入省份"},yxId:{required:!0,message:"请选择院校名称"}},C=()=>{V.value.validate(_=>{_||g.data.id||s("summarySchoolHistory")})},s=async _=>{const{err:o}=await L(()=>$[_](n.value),{before:()=>m("okLoading"),after:()=>m(null)});o||(y("success"),y("close"))};return(_,o)=>{const f=d("a-input-number"),r=d("a-form-item"),u=d("a-grid-item"),z=d("a-select"),U=d("a-grid"),h=d("a-form"),x=d("a-modal");return R(),K(x,{title:e(P)("填写你想要汇总的数据",!!g.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"500px","align-center":!1,"mask-closable":!1,"ok-loading":e(S)==="okLoading",onCancel:o[3]||(o[3]=c=>y("close")),onOk:C},{default:t(()=>[l(h,{ref_key:"formRef",ref:V,model:e(n),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:t(()=>[l(U,{cols:1,"col-gap":24},{default:t(()=>[l(u,null,{default:t(()=>[l(r,{field:"nf",label:"年份:"},{default:t(()=>[l(f,{modelValue:e(n).nf,"onUpdate:modelValue":o[0]||(o[0]=c=>e(n).nf=c),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"province",label:"省份:"},{default:t(()=>[l(z,{modelValue:e(n).province,"onUpdate:modelValue":o[1]||(o[1]=c=>e(n).province=c),placeholder:"请输入省份","allow-search":"",options:[...e(B),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(u,null,{default:t(()=>[l(r,{field:"yxId",label:"院校名称:"},{default:t(()=>[l(z,{modelValue:e(n).yxId,"onUpdate:modelValue":o[2]||(o[2]=c=>e(n).yxId=c),options:e(b).schoolList,"virtual-list-props":{height:200},"allow-search":"","allow-clear":"",placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),re=v({name:"RecruitSchoolHistoricalData"}),_e=v({...re,setup(i){const{warningModal:y}=le(),[g,b]=N(null),S=H(),{form:m,resetForm:n}=O(()=>({sf:"",nf:"",yxmc:"",pc:"",zslx:""}),()=>_()),{selectRow:V,columnsData:k,visibleColumnsData:C,tableBaseOptions:s,resetData:_,extendTableList:o,setSelectRow:f,changeTableColumn:r,changeTableSize:u}=Y(ae(),()=>x()),z=()=>{y(`确定删除选中的${s.selectedKeys.length}数据吗？`,async c=>{const{err:a}=await L(()=>$.deleteSchoolHistory({ids:s.selectedKeys}),{successMsg:"操作成功"});a||(c(!0),s.selectedKeys=[],x())})},{data:U,loading:h,initData:x}=Z(async()=>{const{res:c,err:a}=await L(()=>$.getSchoolHistoryList({...m.value,currentPage:s.pagination.current,pageSize:s.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(s.pagination.total=c.data.totalCount,o(c==null?void 0:c.data.resultList))});return(c,a)=>{const E=d("a-select"),T=d("a-form-item"),D=d("a-grid-item"),A=d("a-input"),F=d("a-grid"),j=d("a-form"),G=d("icon-plus"),I=d("a-button"),J=d("icon-close"),Q=d("icon-upload"),W=d("a-space"),X=d("a-table");return R(),ee("div",null,[l(te,{"table-columns":e(k),"table-size":e(s).size,onResetSearch:e(n),onSearch:e(_),onChangeTableSize:e(u),onChangeTableColumn:e(r)},{form:t(()=>[l(j,{model:e(m),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[l(F,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:t(()=>[l(D,null,{default:t(()=>[l(T,{field:"sf",label:"省份:"},{default:t(()=>[l(E,{modelValue:e(m).sf,"onUpdate:modelValue":a[0]||(a[0]=p=>e(m).sf=p),placeholder:"请输入省份","allow-search":"",options:[...e(B),...e(S).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(D,null,{default:t(()=>[l(T,{label:"年份:"},{default:t(()=>[l(A,{modelValue:e(m).nf,"onUpdate:modelValue":a[1]||(a[1]=p=>e(m).nf=p),placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(D,null,{default:t(()=>[l(T,{label:"院校名称:"},{default:t(()=>[l(A,{modelValue:e(m).yxmc,"onUpdate:modelValue":a[2]||(a[2]=p=>e(m).yxmc=p),placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(D,null,{default:t(()=>[l(T,{label:"批次:"},{default:t(()=>[l(A,{modelValue:e(m).pc,"onUpdate:modelValue":a[3]||(a[3]=p=>e(m).pc=p),placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:t(()=>[l(W,null,{default:t(()=>[l(I,{type:"outline",onClick:a[4]||(a[4]=p=>e(b)("zsAddSchoolHistoricalData"))},{icon:t(()=>[l(G)]),default:t(()=>[q(" 新增 ")]),_:1}),l(I,{type:"outline",status:"danger",disabled:!e(s).selectedKeys.length,loading:e(g)==="删除",onClick:z},{icon:t(()=>[l(J)]),default:t(()=>[q(" 删除 ")]),_:1},8,["disabled","loading"]),l(I,{type:"outline",status:"warning",onClick:a[5]||(a[5]=p=>e(b)("zsSummary"))},{icon:t(()=>[l(Q)]),default:t(()=>[q(" 汇总 ")]),_:1})]),_:1})]),table:t(()=>[l(X,{"selected-keys":e(s).selectedKeys,"onUpdate:selectedKeys":a[6]||(a[6]=p=>e(s).selectedKeys=p),class:"zs-table","row-key":"id",data:e(U),"row-selection":e(s).rowSelection,bordered:e(s).bordered,pagination:e(s).pagination,size:e(s).size,columns:e(C),stripe:e(s).stripe,loading:e(h)},{operate:t(({record:p})=>[l(I,{type:"text",onClick:ue=>e(f)(p,()=>e(b)("zsAddSchoolHistoricalData"))},{default:t(()=>[q("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(g)==="zsAddSchoolHistoricalData"?(R(),K(ne,{key:0,data:e(V),onSuccess:e(x),onClose:a[7]||(a[7]=p=>e(f)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):M("",!0),e(g)==="zsSummary"?(R(),K(se,{key:1,data:e(V),onSuccess:e(x),onClose:a[8]||(a[8]=p=>e(f)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):M("",!0)])}}});export{_e as default};
