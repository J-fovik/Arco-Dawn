import{d as v,g as B,h as I,i as O,D as W,r as o,o as L,l as U,w as a,a as t,b as e,m as M,S as N,n as X,j as Z,c as ee,e as R,p as te,q as ae}from"./index-d007178a.js";import{A as q}from"./options-aafac76d.js";import{f as A,c as oe,_ as le}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import"./index-13860ba0.js";const ne=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:u})=>A(u.yxmc)},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:u})=>A(u.sf)},{title:"介绍",dataIndex:"js",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:u})=>A(u.js)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],se=v({name:"zsAddDiplomaMill"}),re=v({...se,props:{data:{default:()=>({})}},emits:["close","success"],setup(u,{emit:_}){const p=u,f=B(),[h,d]=I(null),{form:r,formRef:w}=O(()=>({...p.data})),k={yxmc:{required:!0,message:"请输入院校名称"}},C=()=>{w.value.validate(c=>{c||(p.data.id?l("editSchoolYj"):l("addSchoolYj"))})},l=async c=>{const{err:i}=await M(()=>N[c](r.value),{before:()=>d("okLoading"),after:()=>d(null)});i||(_("success"),_("close"))};return W(()=>r.value.nBl,c=>{r.value.vBl=100-c}),(c,i)=>{const x=o("a-input"),g=o("a-form-item"),b=o("a-grid-item"),z=o("a-select"),V=o("a-textarea"),T=o("a-grid"),D=o("a-form"),y=o("a-modal");return L(),U(y,{title:e(oe)("野鸡大学",!!p.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"80vw","align-center":!1,"mask-closable":!1,"ok-loading":e(h)==="okLoading",onCancel:i[3]||(i[3]=n=>_("close")),onOk:C},{default:a(()=>[t(D,{ref_key:"formRef",ref:w,model:e(r),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:a(()=>[t(T,{cols:2,"col-gap":24},{default:a(()=>[t(b,null,{default:a(()=>[t(g,{field:"yxmc",label:"院校名称:",required:""},{default:a(()=>[t(x,{modelValue:e(r).yxmc,"onUpdate:modelValue":i[0]||(i[0]=n=>e(r).yxmc=n),placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(g,{field:"sf",label:"省份:"},{default:a(()=>[t(z,{modelValue:e(r).sf,"onUpdate:modelValue":i[1]||(i[1]=n=>e(r).sf=n),placeholder:"请输入省份","allow-search":"",options:[...e(q),...e(f).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),t(b,{span:24},{default:a(()=>[t(g,{field:"remark",label:"介绍:"},{default:a(()=>[t(V,{modelValue:e(r).remark,"onUpdate:modelValue":i[2]||(i[2]=n=>e(r).remark=n),"auto-size":{minRows:4},placeholder:"请输入介绍"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),ie=v({name:"SchoolDiplomaMill"}),pe=v({...ie,setup(u){const{warningModal:_}=ae(),[p,f]=I(null),h=B(),{form:d,resetForm:r}=O(()=>({yxmc:"",sf:""}),()=>c()),{selectRow:w,columnsData:k,visibleColumnsData:C,tableBaseOptions:l,resetData:c,createRowNo:i,setSelectRow:x,extendTableList:g,changeTableColumn:b,changeTableSize:z}=X(ne(),()=>y()),V=()=>{_(`确定删除选中的${l.selectedKeys.length}数据吗？`,async n=>{const{err:s}=await M(()=>N.deleteSchoolYj({ids:l.selectedKeys}),{successMsg:"操作成功"});s||(n(!0),l.selectedKeys=[],y())})},{data:T,loading:D,initData:y}=Z(async()=>{const{res:n,err:s}=await M(()=>N.getSchoolYj({...d.value,currentPage:l.pagination.current,pageSize:l.pagination.pageSize,pagingOrNot:"1"}));return s?[]:(l.pagination.total=n.data.totalCount,g(n==null?void 0:n.data.resultList))});return(n,s)=>{const P=o("a-input"),$=o("a-form-item"),j=o("a-grid-item"),Y=o("a-select"),F=o("a-grid"),E=o("a-form"),H=o("icon-plus"),K=o("a-button"),G=o("icon-close"),J=o("a-space"),Q=o("a-table");return L(),ee("div",null,[t(le,{"table-columns":e(k),"table-size":e(l).size,onResetSearch:e(r),onSearch:e(c),onChangeTableSize:e(z),onChangeTableColumn:e(b)},{form:a(({collapsed:m})=>[t(E,{model:e(d),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[t(F,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!m},{default:a(()=>[t(j,null,{default:a(()=>[t($,{label:"院校名称:"},{default:a(()=>[t(P,{modelValue:e(d).yxmc,"onUpdate:modelValue":s[0]||(s[0]=S=>e(d).yxmc=S),placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(j,null,{default:a(()=>[t($,{field:"sf",label:"省份:"},{default:a(()=>[t(Y,{modelValue:e(d).sf,"onUpdate:modelValue":s[1]||(s[1]=S=>e(d).sf=S),placeholder:"请输入省份","allow-search":"",options:[...e(q),...e(h).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:a(()=>[t(J,null,{default:a(()=>[t(K,{type:"outline",onClick:s[2]||(s[2]=m=>e(f)("zsAddDiplomaMill"))},{icon:a(()=>[t(H)]),default:a(()=>[R(" 新增 ")]),_:1}),t(K,{type:"outline",status:"danger",disabled:!e(l).selectedKeys.length,loading:e(p)==="删除",onClick:V},{icon:a(()=>[t(G)]),default:a(()=>[R(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:a(()=>[t(Q,{"selected-keys":e(l).selectedKeys,"onUpdate:selectedKeys":s[3]||(s[3]=m=>e(l).selectedKeys=m),class:"zs-table","row-key":"id",data:e(T),"row-selection":e(l).rowSelection,bordered:e(l).bordered,pagination:e(l).pagination,size:e(l).size,columns:e(C),stripe:e(l).stripe,loading:e(D)},{operate:a(({record:m})=>[t(K,{type:"text",onClick:S=>e(x)(m,()=>e(f)("zsAddDiplomaMill"))},{default:a(()=>[R("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(p)==="zsAddDiplomaMill"?(L(),U(re,{key:0,data:e(w),onSuccess:e(y),onClose:s[4]||(s[4]=m=>e(x)({},()=>e(f)(null)))},null,8,["data","onSuccess"])):te("",!0)])}}});export{pe as default};
