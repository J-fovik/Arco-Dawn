import{d as z,g as D,h as E,i as N,r as n,o as R,l as P,w as t,a as l,b as e,m as I,n as X,j as Y,c as Z,e as A,p as B,q as ee}from"./index-d007178a.js";import{f as q,c as F,_ as le}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as O}from"./options-aafac76d.js";import{R as K}from"./recruit-3c2f52ae.js";import"./index-13860ba0.js";const te=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,tooltip:!0,ellipsis:!0,align:"center"},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:f})=>q(f.sf)},{title:"年份",dataIndex:"nf",show:!0,align:"center",render:({record:f})=>q(f.nf)},{title:"批次",dataIndex:"pc",show:!0,align:"center",render:({record:f})=>q(f.pc)},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:f})=>q(f.yxmc)},{title:"录取人数",dataIndex:"lqrs",show:!0,align:"right",render:({record:f})=>q(f.lqrs)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],oe=z({name:"zsAddProfessionalEnPlan"}),ae=z({...oe,props:{data:{default:()=>({})}},emits:["close","success"],setup(f,{emit:y}){const b=f,V=D(),[S,u]=E(null),{form:a,formRef:x}=N(()=>({...b.data})),k={nf:{required:!0,message:"请输入年份"},sf:{required:!0,message:"请输入省份"},pc:{required:!0,message:"请输入批次"},yxmc:{required:!0,message:"请输入院校名称"},lqrs:{required:!0,message:"请输入录取人数"}},C=()=>{x.value.validate(_=>{_||(b.data.id?r("editSchoolPlan"):r("addSchoolPlan"))})},r=async _=>{const{err:o}=await I(()=>K[_](a.value),{before:()=>u("okLoading"),after:()=>u(null)});o||(y("success"),y("close"))};return(_,o)=>{const g=n("a-input"),i=n("a-form-item"),m=n("a-grid-item"),w=n("a-input-number"),h=n("a-select"),U=n("a-textarea"),v=n("a-grid"),c=n("a-form"),d=n("a-modal");return R(),P(d,{title:e(F)("院校招生计划",!!b.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"60vw","align-center":!1,"mask-closable":!1,"ok-loading":e(S)==="okLoading",onCancel:o[10]||(o[10]=s=>y("close")),onOk:C},{default:t(()=>[l(c,{ref_key:"formRef",ref:x,model:e(a),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:t(()=>[l(v,{cols:2,"col-gap":24},{default:t(()=>[l(m,null,{default:t(()=>[l(i,{field:"nf",label:"年份:"},{default:t(()=>[l(g,{modelValue:e(a).nf,"onUpdate:modelValue":o[0]||(o[0]=s=>e(a).nf=s),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"lqrs",label:"录取人数:"},{default:t(()=>[l(w,{modelValue:e(a).lqrs,"onUpdate:modelValue":o[1]||(o[1]=s=>e(a).lqrs=s),modelModifiers:{trim:!0},placeholder:"请输入录取人数"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"sf",label:"省份:"},{default:t(()=>[l(h,{modelValue:e(a).sf,"onUpdate:modelValue":o[2]||(o[2]=s=>e(a).sf=s),modelModifiers:{trim:!0},placeholder:"请输入省份","allow-search":"",options:[...e(O),...e(V).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"pc",label:"批次:"},{default:t(()=>[l(g,{modelValue:e(a).pc,"onUpdate:modelValue":o[3]||(o[3]=s=>e(a).pc=s),modelModifiers:{trim:!0},placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"yxmc",label:"院校名称:"},{default:t(()=>[l(g,{modelValue:e(a).yxmc,"onUpdate:modelValue":o[4]||(o[4]=s=>e(a).yxmc=s),modelModifiers:{trim:!0},placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"yxdm",label:"院校代码:"},{default:t(()=>[l(g,{modelValue:e(a).yxdm,"onUpdate:modelValue":o[5]||(o[5]=s=>e(a).yxdm=s),modelModifiers:{trim:!0},placeholder:"请输入院校代码"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"zx",label:"再选:"},{default:t(()=>[l(g,{modelValue:e(a).zx,"onUpdate:modelValue":o[6]||(o[6]=s=>e(a).zx=s),modelModifiers:{trim:!0},placeholder:"请输入再选"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"zyz",label:"专业组:"},{default:t(()=>[l(g,{modelValue:e(a).zyz,"onUpdate:modelValue":o[7]||(o[7]=s=>e(a).zyz=s),modelModifiers:{trim:!0},placeholder:"请输入专业组"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"yc",label:"位次预测:"},{default:t(()=>[l(w,{modelValue:e(a).yc,"onUpdate:modelValue":o[8]||(o[8]=s=>e(a).yc=s),modelModifiers:{trim:!0},placeholder:"请输入位次预测"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:24},{default:t(()=>[l(i,{field:"yxbz",label:"院校备注:"},{default:t(()=>[l(U,{modelValue:e(a).yxbz,"onUpdate:modelValue":o[9]||(o[9]=s=>e(a).yxbz=s),modelModifiers:{trim:!0},"auto-size":{minRows:4},placeholder:"请输入院校备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),ne=z({name:"zsSummary"}),de=z({...ne,props:{data:{default:()=>({})}},emits:["close","success"],setup(f,{emit:y}){const b=f,V=D(),[S,u]=E(null),{form:a,formRef:x}=N(()=>({nf:"",...b.data})),k={nf:{required:!0,message:"请输入年份"},province:{required:!0,message:"请输入省份"},yxId:{required:!0,message:"请选择院校名称"}},C=()=>{x.value.validate(_=>{_||b.data.id||r("summarySchoolPlan")})},r=async _=>{const{err:o}=await I(()=>K[_](a.value),{before:()=>u("okLoading"),after:()=>u(null)});o||(y("success"),y("close"))};return(_,o)=>{const g=n("a-input-number"),i=n("a-form-item"),m=n("a-grid-item"),w=n("a-select"),h=n("a-grid"),U=n("a-form"),v=n("a-modal");return R(),P(v,{title:e(F)("填写你想要汇总的数据",!!b.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"500px","align-center":!1,"mask-closable":!1,"ok-loading":e(S)==="okLoading",onCancel:o[3]||(o[3]=c=>y("close")),onOk:C},{default:t(()=>[l(U,{ref_key:"formRef",ref:x,model:e(a),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:t(()=>[l(h,{cols:1,"col-gap":24},{default:t(()=>[l(m,null,{default:t(()=>[l(i,{field:"nf",label:"年份:"},{default:t(()=>[l(g,{modelValue:e(a).nf,"onUpdate:modelValue":o[0]||(o[0]=c=>e(a).nf=c),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"province",label:"省份:"},{default:t(()=>[l(w,{modelValue:e(a).province,"onUpdate:modelValue":o[1]||(o[1]=c=>e(a).province=c),placeholder:"请输入省份","allow-search":"",options:[...e(O),...e(V).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"yxId",label:"院校名称:"},{default:t(()=>[l(w,{modelValue:e(a).yxId,"onUpdate:modelValue":o[2]||(o[2]=c=>e(a).yxId=c),options:e(V).schoolList,"virtual-list-props":{height:200},"allow-search":"","allow-clear":"",placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),se=z({name:"RecruitSchoolEnrollmentPlan"}),pe=z({...se,setup(f){const{warningModal:y}=ee(),[b,V]=E(null),S=D(),{form:u,resetForm:a}=N(()=>({sf:"",nf:"",yxmc:"",pc:""}),()=>_()),{selectRow:x,columnsData:k,visibleColumnsData:C,tableBaseOptions:r,resetData:_,extendTableList:o,setSelectRow:g,changeTableColumn:i,changeTableSize:m}=X(te(),()=>v()),w=()=>{y(`确定删除选中的${r.selectedKeys.length}数据吗？`,async c=>{const{err:d}=await I(()=>K.deleteSchoolPlan({ids:r.selectedKeys}),{successMsg:"操作成功"});d||(c(!0),r.selectedKeys=[],v())})},{data:h,loading:U,initData:v}=Y(async()=>{const{res:c,err:d}=await I(()=>K.getSchoolPlanList({...u.value,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return d?[]:(r.pagination.total=c.data.totalCount,o(c==null?void 0:c.data.resultList))});return(c,d)=>{const s=n("a-select"),T=n("a-form-item"),M=n("a-grid-item"),L=n("a-input"),j=n("a-grid"),G=n("a-form"),H=n("icon-plus"),$=n("a-button"),J=n("icon-close"),Q=n("a-space"),W=n("a-table");return R(),Z("div",null,[l(le,{"table-columns":e(k),"table-size":e(r).size,onResetSearch:e(a),onSearch:e(_),onChangeTableSize:e(m),onChangeTableColumn:e(i)},{form:t(()=>[l(G,{model:e(u),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[l(j,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:t(()=>[l(M,null,{default:t(()=>[l(T,{field:"sf",label:"省份:"},{default:t(()=>[l(s,{modelValue:e(u).sf,"onUpdate:modelValue":d[0]||(d[0]=p=>e(u).sf=p),placeholder:"请输入省份","allow-search":"",options:[...e(O),...e(S).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(M,null,{default:t(()=>[l(T,{label:"年份:"},{default:t(()=>[l(L,{modelValue:e(u).nf,"onUpdate:modelValue":d[1]||(d[1]=p=>e(u).nf=p),placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(M,{field:"yxmc",label:"院校名称:"},{default:t(()=>[l(T,{field:"yxmc",label:"院校名称:"},{default:t(()=>[l(L,{modelValue:e(u).yxmc,"onUpdate:modelValue":d[2]||(d[2]=p=>e(u).yxmc=p),placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(M,null,{default:t(()=>[l(T,{label:"批次:"},{default:t(()=>[l(L,{modelValue:e(u).pc,"onUpdate:modelValue":d[3]||(d[3]=p=>e(u).pc=p),placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:t(()=>[l(Q,null,{default:t(()=>[l($,{type:"outline",onClick:d[4]||(d[4]=p=>e(V)("zsAddSchoolEnPlan"))},{icon:t(()=>[l(H)]),default:t(()=>[A(" 新增 ")]),_:1}),l($,{type:"outline",status:"danger",disabled:!e(r).selectedKeys.length,loading:e(b)==="删除",onClick:w},{icon:t(()=>[l(J)]),default:t(()=>[A(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:t(()=>[l(W,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":d[5]||(d[5]=p=>e(r).selectedKeys=p),class:"zs-table","row-key":"id",data:e(h),"row-selection":e(r).rowSelection,bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(C),stripe:e(r).stripe,loading:e(U)},{operate:t(({record:p})=>[l($,{type:"text",onClick:re=>e(g)(p,()=>e(V)("zsAddSchoolEnPlan"))},{default:t(()=>[A("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(b)==="zsAddSchoolEnPlan"?(R(),P(ae,{key:0,data:e(x),onSuccess:e(v),onClose:d[6]||(d[6]=p=>e(g)({},()=>e(V)(null)))},null,8,["data","onSuccess"])):B("",!0),e(b)==="zsSummary"?(R(),P(de,{key:1,data:e(x),onSuccess:e(v),onClose:d[7]||(d[7]=p=>e(g)({},()=>e(V)(null)))},null,8,["data","onSuccess"])):B("",!0)])}}});export{pe as default};
