import{d as v,h as O,g as U,i as $,r as n,o as K,l as N,w as a,a as t,b as e,m as A,S as L,n as G,j as J,c as Q,e as R,p as W,q as X}from"./index-d007178a.js";import{A as Y}from"./options-aafac76d.js";import{f as k,c as ee,_ as te}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import"./index-13860ba0.js";const ae=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:i})=>k(i.yxmc)},{title:"专业名称",dataIndex:"zymc",show:!0,align:"center",render:({record:i})=>k(i.zymc)},{title:"层次",dataIndex:"level",show:!0,align:"center",render:({record:i})=>k(i.level)},{title:"排序",dataIndex:"sort",show:!0,align:"center",render:({record:i})=>k(i.sort)},{title:"排名",dataIndex:"rank",show:!0,align:"center",render:({record:i})=>k(i.rank)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],le=v({name:"ZsAddThirdPartyRanking"}),oe=v({...le,props:{data:{default:()=>({})}},emits:["close","success"],setup(i,{emit:b}){const m=i,[y,w]=O(null),u=U(),{form:r,formRef:x}=$(()=>({...m.data})),T={yxId:{required:!0,message:"请选择院校名称"},zymc:{required:!0,message:"请输入专业名称"}},V=()=>{x.value.validate(p=>{p||(m.data.id?l("editSchoolThird"):l("addSchoolThird"))})},l=async p=>{const{err:s}=await A(()=>L[p](r.value),{before:()=>w("okLoading"),after:()=>w(null)});s||(b("success"),b("close"))};return(p,s)=>{const S=n("a-select"),_=n("a-form-item"),f=n("a-grid-item"),g=n("a-input"),z=n("a-grid"),C=n("a-form"),h=n("a-modal");return K(),N(h,{title:e(ee)("第三方排名",!!m.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"500px","align-center":!1,"mask-closable":!1,"ok-loading":e(y)==="okLoading",onCancel:s[5]||(s[5]=o=>b("close")),onOk:V},{default:a(()=>[t(C,{ref_key:"formRef",ref:x,model:e(r),"label-align":"left",size:"large","auto-label-width":"",rules:T},{default:a(()=>[t(z,{cols:1,"col-gap":24},{default:a(()=>[t(f,null,{default:a(()=>[t(_,{field:"yxId",label:"院校名称:"},{default:a(()=>[t(S,{modelValue:e(r).yxId,"onUpdate:modelValue":s[0]||(s[0]=o=>e(r).yxId=o),options:e(u).schoolList,"virtual-list-props":{height:200},disabled:!!m.data.id,"allow-search":"","allow-clear":"",placeholder:"请选择院校名称"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(_,{field:"zymc",label:"专业名称:"},{default:a(()=>[t(g,{modelValue:e(r).zymc,"onUpdate:modelValue":s[1]||(s[1]=o=>e(r).zymc=o),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(_,{field:"level",label:"层次:"},{default:a(()=>[t(g,{modelValue:e(r).level,"onUpdate:modelValue":s[2]||(s[2]=o=>e(r).level=o),placeholder:"请输入层次"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(_,{field:"sort",label:"排序:"},{default:a(()=>[t(g,{modelValue:e(r).sort,"onUpdate:modelValue":s[3]||(s[3]=o=>e(r).sort=o),placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(_,{field:"rank",label:"排名:"},{default:a(()=>[t(g,{modelValue:e(r).rank,"onUpdate:modelValue":s[4]||(s[4]=o=>e(r).rank=o),placeholder:"请输入排名"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),ne=v({name:"SchoolSchoolRankOrgThirdPartRanking"}),ue=v({...ne,setup(i){const{warningModal:b}=X(),[m,y]=O(null),w=U(),{form:u,resetForm:r}=$(()=>({yxId:"",zymc:""}),()=>p()),{selectRow:x,columnsData:T,visibleColumnsData:V,tableBaseOptions:l,resetData:p,extendTableList:s,setSelectRow:S,changeTableColumn:_,changeTableSize:f}=G(ae(),()=>h()),g=()=>{b(`确定删除选中的${l.selectedKeys.length}数据吗？`,async o=>{const{err:d}=await A(()=>L.deleteSchoolThird({ids:l.selectedKeys}),{successMsg:"操作成功"});d||(o(!0),l.selectedKeys=[],h())})},{data:z,loading:C,initData:h}=J(async()=>{const{res:o,err:d}=await A(()=>L.getSchoolThird({...u.value,currentPage:l.pagination.current,pageSize:l.pagination.pageSize,pagingOrNot:"1"}));return d?[]:(l.pagination.total=o.data.totalCount,s(o==null?void 0:o.data.resultList))});return(o,d)=>{const B=n("a-select"),P=n("a-form-item"),D=n("a-grid-item"),q=n("a-input"),M=n("a-grid"),Z=n("a-form"),F=n("icon-plus"),I=n("a-button"),j=n("icon-close"),E=n("a-space"),H=n("a-table");return K(),Q("div",null,[t(te,{"table-columns":e(T),"table-size":e(l).size,onResetSearch:e(r),onSearch:e(p),onChangeTableSize:e(f),onChangeTableColumn:e(_)},{form:a(()=>[t(Z,{model:e(u),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[t(M,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:a(()=>[t(D,null,{default:a(()=>[t(P,{label:"院校名称:"},{default:a(()=>[t(B,{modelValue:e(u).yxId,"onUpdate:modelValue":d[0]||(d[0]=c=>e(u).yxId=c),"virtual-list-props":{height:200},"allow-search":"","allow-clear":"",options:[...e(Y),...e(w).schoolList],placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(P,{label:"专业名称:"},{default:a(()=>[t(q,{modelValue:e(u).zymc,"onUpdate:modelValue":d[1]||(d[1]=c=>e(u).zymc=c),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:a(()=>[t(E,null,{default:a(()=>[t(I,{type:"outline",onClick:d[2]||(d[2]=c=>e(y)("ZsAddThirdPartyRanking"))},{icon:a(()=>[t(F)]),default:a(()=>[R(" 新增 ")]),_:1}),t(I,{type:"outline",status:"danger",disabled:!e(l).selectedKeys.length,loading:e(m)==="删除",onClick:g},{icon:a(()=>[t(j)]),default:a(()=>[R(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:a(()=>[t(H,{"selected-keys":e(l).selectedKeys,"onUpdate:selectedKeys":d[3]||(d[3]=c=>e(l).selectedKeys=c),class:"zs-table","row-key":"id",data:e(z),"row-selection":e(l).rowSelection,bordered:e(l).bordered,pagination:e(l).pagination,size:e(l).size,columns:e(V),stripe:e(l).stripe,loading:e(C)},{operate:a(({record:c})=>[t(I,{type:"text",onClick:se=>e(S)(c,()=>e(y)("ZsAddThirdPartyRanking"))},{default:a(()=>[R("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(m)==="ZsAddThirdPartyRanking"?(K(),N(oe,{key:0,data:e(x),onSuccess:e(h),onClose:d[4]||(d[4]=c=>e(S)({},()=>e(y)(null)))},null,8,["data","onSuccess"])):W("",!0)])}}});export{ue as default};
