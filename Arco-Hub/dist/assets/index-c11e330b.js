import{n as d,p as q,O as j,P as G,d as x,q as H,E as J,s as Q,v as W,x as X,y as Y,r as s,o as m,e as Z,g as n,w as t,c as e,z as y,l as b,i as f,k as w,A as ee}from"./index-8a2cb146.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{L as C}from"./landscape-a6fd59d7.js";import"./index-2bbe694f.js";const ae=()=>[{title:"景区编号",dataIndex:"scenicNo",show:!0,align:"center",render:({record:l})=>d(l.scenicNo)},{title:"自费项目名称",dataIndex:"selfPayName",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:l})=>d(l.selfPayName)},{title:"自费项目简介",dataIndex:"selfPayDesc",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:l})=>d(l.selfPayDesc)},{title:"自费金额",dataIndex:"key4",show:!0,align:"center",render:({record:l})=>q("span",{class:"text-red text-price"},j(G(`${l.selfPayMoney}`)))},{title:"自费游览时间",dataIndex:"selfPayTime",show:!0,align:"center",render:({record:l})=>d(l.selfPayTime)},{title:"自费项目注意事项",dataIndex:"selfPayInfo",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:l})=>d(l.selfPayInfo)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ne=x({name:"ScenicSpotSelfPayManger"}),ce=x({...ne,setup(l){const{vAuthority:g}=H(),{warningModal:N}=ee(),[T,oe]=J(null),{form:c,resetForm:k}=Q(()=>({scenicNo:"",selfPayName:""}),()=>S()),{columnsData:v,visibleColumnsData:z,tableBaseOptions:a,resetData:S,extendTableList:$,changeTableColumn:D,changeTableSize:I}=W(ae(),()=>_()),M=i=>{N(`确定操作选中的${a.selectedKeys.length}数据吗？`,async o=>{const{res:u}=await w(()=>C[i]({idList:a.selectedKeys}),{successMsg:"操作成功"});o(!0),u&&(a.selectedKeys=[],_())})},{data:A,loading:K,initData:_}=X(async()=>{const{res:i,err:o}=await w(()=>C.getScenicSpotSelfPayList({...c.value,currentPage:a.pagination.current,pageSize:a.pagination.pageSize,pagingOrNot:"1"}));return o?[]:(a.pagination.total=i.data.totalCount,$(i==null?void 0:i.data.payList))});return Y(_),(i,o)=>{const u=s("a-input"),P=s("a-form-item"),h=s("a-grid-item"),V=s("a-grid"),L=s("a-form"),B=s("icon-plus"),p=s("a-button"),R=s("icon-close"),E=s("a-space"),O=s("a-button-group"),U=s("a-table");return m(),Z("div",null,[n(te,{"table-columns":e(v),"table-size":e(a).size,onResetSearch:e(k),onSearch:e(S),onChangeTableSize:e(I),onChangeTableColumn:e(D)},{form:t(()=>[n(L,{model:e(c),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[n(V,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:t(()=>[n(h,null,{default:t(()=>[n(P,{field:"scenicNo",label:"景区编号:"},{default:t(()=>[n(u,{modelValue:e(c).scenicNo,"onUpdate:modelValue":o[0]||(o[0]=r=>e(c).scenicNo=r),placeholder:"请输入景区编号"},null,8,["modelValue"])]),_:1})]),_:1}),n(h,null,{default:t(()=>[n(P,{field:"selfPayName",label:"自费项目名称:"},{default:t(()=>[n(u,{modelValue:e(c).selfPayName,"onUpdate:modelValue":o[1]||(o[1]=r=>e(c).selfPayName=r),placeholder:"请输入自费项目名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:t(()=>[n(E,null,{default:t(()=>[y((m(),b(p,{type:"outline",onClick:o[2]||(o[2]=r=>i.$router.push("/scenicSpot/selfPayManger/operate"))},{icon:t(()=>[n(B)]),default:t(()=>[f(" 新增 ")]),_:1})),[[e(g),"ScenicSpotSelfPayMangerAdd"]]),y((m(),b(p,{type:"outline",status:"danger",disabled:!e(a).selectedKeys.length,loading:e(T)==="删除",onClick:o[3]||(o[3]=r=>M("deleteScenicSpotSelfPay"))},{icon:t(()=>[n(R)]),default:t(()=>[f(" 删除 ")]),_:1},8,["disabled","loading"])),[[e(g),"ScenicSpotSelfPayMangerDelete"]])]),_:1})]),table:t(()=>[n(U,{"selected-keys":e(a).selectedKeys,"onUpdate:selectedKeys":o[4]||(o[4]=r=>e(a).selectedKeys=r),class:"zs-table","row-key":"id",data:e(A),"row-selection":e(a).rowSelection,bordered:e(a).bordered,pagination:e(a).pagination,size:e(a).size,columns:e(z),stripe:e(a).stripe,loading:e(K)},{operate:t(({record:r})=>[n(O,null,{default:t(()=>[n(p,{type:"text",status:"success",onClick:F=>i.$router.push(`/scenicSpot/selfPayManger/operate?id=${r.id}&isReadOnly=true`)},{default:t(()=>[f("详情")]),_:2},1032,["onClick"]),y((m(),b(p,{type:"text",onClick:F=>i.$router.push(`/scenicSpot/selfPayManger/operate?id=${r.id}`)},{default:t(()=>[f("编辑")]),_:2},1032,["onClick"])),[[e(g),"ScenicSpotSelfPayMangerEdit"]])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{ce as default};
