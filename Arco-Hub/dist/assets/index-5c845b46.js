import{d as h,h as R,g as j,i as $,r as s,o as O,l as E,w as t,a as l,b as e,e as f,m as B,O as J,n as Q,j as W,c as X,p as ee,q as le,S as N}from"./index-d007178a.js";import{f as D,A as te}from"./options-aafac76d.js";import{f as x,c as ae,_ as oe}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import"./index-13860ba0.js";const M=[{label:"有",value:"1"},{label:"否",value:"0"}],ne=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:d})=>x(d.yxmc)},{title:"专业名称",dataIndex:"zymc",show:!0,align:"center",render:({record:d})=>x(d.zymc)},{title:"所属学院",dataIndex:"ssxy",show:!0,align:"center",render:({record:d})=>x(d.ssxy)},{title:"专业特色",dataIndex:"zyTs",tooltip:!0,ellipsis:!0,show:!0,align:"center",render:({record:d})=>x(d.zyTs)},{title:"学制",dataIndex:"xz",show:!0,align:"center",render:({record:d})=>x(d.xz)},{title:"层次",dataIndex:"cc",show:!0,align:"center",render:({record:d})=>x(d.cc)},{title:"硕士点",dataIndex:"isSsd",show:!0,align:"center",render:({record:d})=>{var m;return x((m=D(M,d.isSsd))==null?void 0:m.label)}},{title:"博士点",dataIndex:"isBsd",show:!0,align:"center",render:({record:d})=>{var m;return x((m=D(M,d.isBsd))==null?void 0:m.label)}},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],se=h({name:"ZsAddUser"}),de=h({...se,props:{data:{default:()=>({})}},emits:["close","success"],setup(d,{emit:m}){const V=d,[S,I]=R(null),g=j(),{form:o,formRef:T}=$(()=>({isSsd:"0",isBsd:"0",isGjts:"0",...V.data})),k={},U=()=>{T.value.validate(z=>{z||(V.data.id?r("editUser"):r("addUser"))})},r=async z=>{const{err:a}=await B(()=>J[z](o.value),{before:()=>I("okLoading"),after:()=>I(null)});a||(m("success"),m("close"))};return(z,a)=>{const C=s("a-select"),i=s("a-form-item"),c=s("a-grid-item"),b=s("a-input"),y=s("a-radio"),w=s("a-radio-group"),v=s("a-grid"),p=s("a-form"),u=s("a-modal");return O(),E(u,{title:e(ae)("开设专业",!!V.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"500px","align-center":!1,"mask-closable":!1,"ok-loading":e(S)==="okLoading",onCancel:a[10]||(a[10]=n=>m("close")),onOk:U},{default:t(()=>[l(p,{ref_key:"formRef",ref:T,model:e(o),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:t(()=>[l(v,{cols:1,"col-gap":24},{default:t(()=>[l(c,null,{default:t(()=>[l(i,{field:"yxId",label:"院校信息:"},{default:t(()=>[l(C,{modelValue:e(o).yxId,"onUpdate:modelValue":a[0]||(a[0]=n=>e(o).yxId=n),options:e(g).schoolList,"virtual-list-props":{height:200},disabled:!!V.data.id,"allow-search":"",placeholder:"请选择院校信息"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"zymc",label:"专业名称:"},{default:t(()=>[l(b,{modelValue:e(o).zymc,"onUpdate:modelValue":a[1]||(a[1]=n=>e(o).zymc=n),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"zylb",label:"专业类别:"},{default:t(()=>[l(b,{modelValue:e(o).zylb,"onUpdate:modelValue":a[2]||(a[2]=n=>e(o).zylb=n),placeholder:"请输入专业类别"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"ssxy",label:"所属学院:"},{default:t(()=>[l(b,{modelValue:e(o).ssxy,"onUpdate:modelValue":a[3]||(a[3]=n=>e(o).ssxy=n),placeholder:"请输入所属学院"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"zyTs",label:"专业特色:"},{default:t(()=>[l(b,{modelValue:e(o).zyTs,"onUpdate:modelValue":a[4]||(a[4]=n=>e(o).zyTs=n),placeholder:"请输入专业特色"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"xz",label:"学制:"},{default:t(()=>[l(b,{modelValue:e(o).xz,"onUpdate:modelValue":a[5]||(a[5]=n=>e(o).xz=n),placeholder:"请输入学制"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"cc",label:"层次:"},{default:t(()=>[l(b,{modelValue:e(o).cc,"onUpdate:modelValue":a[6]||(a[6]=n=>e(o).cc=n),placeholder:"请输入层次"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"isSsd",label:"硕士点:"},{default:t(()=>[l(w,{modelValue:e(o).isSsd,"onUpdate:modelValue":a[7]||(a[7]=n=>e(o).isSsd=n)},{default:t(()=>[l(y,{value:"1"},{default:t(()=>[f("有")]),_:1}),l(y,{value:"0"},{default:t(()=>[f("没有")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"isBsd",label:"博士点:"},{default:t(()=>[l(w,{modelValue:e(o).isBsd,"onUpdate:modelValue":a[8]||(a[8]=n=>e(o).isBsd=n)},{default:t(()=>[l(y,{value:"1"},{default:t(()=>[f("有")]),_:1}),l(y,{value:"0"},{default:t(()=>[f("没有")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:t(()=>[l(i,{field:"isGjts",label:"国家特色:"},{default:t(()=>[l(w,{modelValue:e(o).isGjts,"onUpdate:modelValue":a[9]||(a[9]=n=>e(o).isGjts=n)},{default:t(()=>[l(y,{value:"1"},{default:t(()=>[f("是")]),_:1}),l(y,{value:"0"},{default:t(()=>[f("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),re=h({name:"SchoolMajorInfoManage"}),_e=h({...re,setup(d){const{warningModal:m}=le(),[V,S]=R(null),I=j(),{form:g,resetForm:o}=$(()=>({yxId:"",zymc:""}),()=>z()),{selectRow:T,columnsData:k,visibleColumnsData:U,tableBaseOptions:r,resetData:z,extendTableList:a,setSelectRow:C,changeTableColumn:i,changeTableSize:c}=Q(ne(),()=>v()),b=()=>{m(`确定删除选中的${r.selectedKeys.length}数据吗？`,async p=>{const{err:u}=await B(()=>N.deleteMajorInfo({ids:r.selectedKeys}),{successMsg:"操作成功"});u||(p(!0),r.selectedKeys=[],v())})},{data:y,loading:w,initData:v}=W(async()=>{const{res:p,err:u}=await B(()=>N.getMajorInfoList({...g.value,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return u?[]:(r.pagination.total=p.data.totalCount,a(p==null?void 0:p.data.resultList))});return(p,u)=>{const n=s("a-select"),K=s("a-form-item"),L=s("a-grid-item"),P=s("a-input"),G=s("a-grid"),Z=s("a-form"),q=s("icon-plus"),A=s("a-button"),F=s("icon-close"),H=s("a-space"),Y=s("a-table");return O(),X("div",null,[l(oe,{"table-columns":e(k),"table-size":e(r).size,onResetSearch:e(o),onSearch:e(z),onChangeTableSize:e(c),onChangeTableColumn:e(i)},{form:t(()=>[l(Z,{model:e(g),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[l(G,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:t(()=>[l(L,null,{default:t(()=>[l(K,{label:"院校名称:"},{default:t(()=>[l(n,{modelValue:e(g).yxId,"onUpdate:modelValue":u[0]||(u[0]=_=>e(g).yxId=_),"virtual-list-props":{height:200},"allow-search":"","allow-clear":"",options:[...e(te),...e(I).schoolList],placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1}),l(L,null,{default:t(()=>[l(K,{label:"专业名称:"},{default:t(()=>[l(P,{modelValue:e(g).zymc,"onUpdate:modelValue":u[1]||(u[1]=_=>e(g).zymc=_),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:t(()=>[l(H,null,{default:t(()=>[l(A,{type:"outline",onClick:u[2]||(u[2]=_=>e(S)("ZsAddEmployment"))},{icon:t(()=>[l(q)]),default:t(()=>[f(" 新增 ")]),_:1}),l(A,{type:"outline",status:"danger",disabled:!e(r).selectedKeys.length,loading:e(V)==="删除",onClick:b},{icon:t(()=>[l(F)]),default:t(()=>[f(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:t(()=>[l(Y,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":u[3]||(u[3]=_=>e(r).selectedKeys=_),class:"zs-table","row-key":"id",data:e(y),"row-selection":e(r).rowSelection,bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(U),stripe:e(r).stripe,loading:e(w)},{operate:t(({record:_})=>[l(A,{type:"text",onClick:ue=>e(C)(_,()=>e(S)("ZsAddEmployment"))},{default:t(()=>[f("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(V)==="ZsAddEmployment"?(O(),E(de,{key:0,data:e(T),onSuccess:e(v),onClose:u[4]||(u[4]=_=>e(C)({},()=>e(S)(null)))},null,8,["data","onSuccess"])):ee("",!0)])}}});export{_e as default};
