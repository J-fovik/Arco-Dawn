import{d as v,h as E,g as G,i as j,n as q,j as M,r as i,o as h,c as H,a as n,w as o,b as e,e as w,l as J,p as Q,m as S}from"./index-d007178a.js";import{f as c,t as x,_ as W}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{f as X,A as Y}from"./options-aafac76d.js";import{D as T}from"./data-30d5a842.js";import"./index-13860ba0.js";const Z=[{label:"PC",value:"0"},{label:"微信小程序",value:"1"}],ee=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"手机号",dataIndex:"phone",show:!0,align:"center",render:({record:t})=>c(t.phone)},{title:"用户昵称",dataIndex:"nickName",show:!0,align:"center",render:({record:t})=>c(t.nickName)},{title:"创建时间",dataIndex:"createTm",show:!0,align:"center",render:({record:t})=>c(t.createTm)},{title:"用户所在省",dataIndex:"province",show:!0,align:"center",render:({record:t})=>c(t.province)},{title:"用户分数",dataIndex:"score",show:!0,align:"right",render:({record:t})=>x(`${t.score??0}`)},{title:"分数位次",dataIndex:"wc",show:!0,align:"right",render:({record:t})=>x(`${t.wc??0}`)},{title:"选科",dataIndex:"xk",show:!0,align:"center",render:({record:t})=>c(t.xk)},{title:"启用状态",dataIndex:"disableStatus",show:!0,align:"center",slotName:"disableStatus"},{title:"注册来源",dataIndex:"registerResource",show:!0,align:"center",render:({record:t})=>{var u;return c((u=X(Z,t.registerResource))==null?void 0:u.label)}}],te=v({name:"SystemUserTabulation"}),ie=v({...te,setup(t){const[u,m]=E(null),C=G(),{form:d,resetForm:z}=j(()=>({province:"",nickName:"",phone:""}),()=>b()),{selectRow:k,columnsData:y,visibleColumnsData:I,tableBaseOptions:l,resetData:b,extendTableList:N,setSelectRow:V,changeTableColumn:D,changeTableSize:O}=q(ee(),()=>p()),R=async r=>{const{err:a}=await S(()=>T.changeUserIdentity({id:r.id,sf:r.sf=="1"?"2":"1"}),{before:()=>m(r.id),after:()=>m(null),successMsg:"操作成功"});a||p()},{data:U,loading:A,initData:p}=M(async()=>{const{res:r,err:a}=await S(()=>T.getGaobaoUserList({...d.value,currentPage:l.pagination.current,pageSize:l.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(l.pagination.total=r.data.totalCount,N(r==null?void 0:r.data.resultList))});return(r,a)=>{const f=i("a-input"),g=i("a-form-item"),_=i("a-grid-item"),L=i("a-select"),P=i("a-grid"),B=i("a-form"),K=i("a-switch"),$=i("a-table"),F=i("zs-update");return h(),H("div",null,[n(W,{"table-columns":e(y),"table-size":e(l).size,onResetSearch:e(z),onSearch:e(b),onChangeTableSize:e(O),onChangeTableColumn:e(D)},{form:o(()=>[n(B,{model:e(d),"label-align":"left",size:"large","auto-label-width":""},{default:o(()=>[n(P,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:o(()=>[n(_,null,{default:o(()=>[n(g,{label:"手机号:"},{default:o(()=>[n(f,{modelValue:e(d).phone,"onUpdate:modelValue":a[0]||(a[0]=s=>e(d).phone=s),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1}),n(_,null,{default:o(()=>[n(g,{label:"用户昵称:"},{default:o(()=>[n(f,{modelValue:e(d).nickName,"onUpdate:modelValue":a[1]||(a[1]=s=>e(d).nickName=s),placeholder:"请输入用户昵称"},null,8,["modelValue"])]),_:1})]),_:1}),n(_,null,{default:o(()=>[n(g,{field:"province",label:"用户所在省:"},{default:o(()=>[n(L,{modelValue:e(d).province,"onUpdate:modelValue":a[2]||(a[2]=s=>e(d).province=s),placeholder:"请输入省份","allow-search":"",options:[...e(Y),...e(C).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),table:o(()=>[n($,{"selected-keys":e(l).selectedKeys,"onUpdate:selectedKeys":a[3]||(a[3]=s=>e(l).selectedKeys=s),class:"zs-table","row-key":"id",data:e(U),"row-selection":e(l).rowSelection,bordered:e(l).bordered,pagination:e(l).pagination,size:e(l).size,columns:e(I),stripe:e(l).stripe,loading:e(A)},{disableStatus:o(({record:s})=>[n(K,{size:"medium","model-value":s.sf==="2",onChange:ae=>R(s)},{checked:o(()=>[w(" ON ")]),unchecked:o(()=>[w(" OFF ")]),_:2},1032,["model-value","onChange"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(u)==="zsUpdate"?(h(),J(F,{key:0,data:e(k),onSuccess:e(p),onClose:a[4]||(a[4]=s=>e(V)({},()=>e(m)(null)))},null,8,["data","onSuccess"])):Q("",!0)])}}});export{ie as default};
