import{a as $,n as g,d as y,r,o as h,l as z,w as t,g as a,i as u,t as f,c as e,q as H,E as J,s as Q,v as W,b as X,e as ee,z as D,h as te,k as T,A as ae,S as j}from"./index-8a2cb146.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const oe=()=>{const{getDictionaryItem:w}=$();return[{title:"银行账户(公户)",dataIndex:"yhzh",show:!0,align:"center",render:({record:n})=>g(n.yhzh)},{title:"银行账户名(公户)",dataIndex:"zhhm",show:!0,align:"center",render:({record:n})=>g(n.zhhm)},{title:"所属部门",dataIndex:"departName",show:!0,align:"center",render:({record:n})=>g(n.departName)},{title:"资金账号",dataIndex:"zjzhh",show:!0,align:"center",render:({record:n})=>g(n.zjzhh)},{title:"账户名称",dataIndex:"zjzhm",show:!0,align:"center",render:({record:n})=>g(n.zjzhm)},{title:"状态",dataIndex:"state",show:!0,align:"center",render:({record:n})=>g(w("bankestate",n.state).detailName)},{title:"创建时间",dataIndex:"createTime",show:!0,align:"center",render:({record:n})=>g(n.createTime)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}]},le=y({name:"ZsNominalAccountDetail"}),se=y({...le,props:{data:{default:()=>({})}},emits:["close"],setup(w,{emit:n}){const{getDictionaryItem:b}=$(),C=n;return(c,d)=>{const m=r("a-tag"),p=r("a-descriptions-item"),S=r("a-descriptions"),k=r("a-modal");return h(),z(k,{top:"10%",width:"600px","unmount-on-close":"",title:"虚账户详情",visible:"","align-center":!1,"mask-closable":!1,onCancel:d[0]||(d[0]=i=>C("close"))},{default:t(()=>[a(S,{column:1},{default:t(()=>[a(p,{label:"实体账户银行账号"},{default:t(()=>[a(m,null,{default:t(()=>[u(f(c.data.yhzh),1)]),_:1})]),_:1}),a(p,{label:"实体账户户名（资产名称）"},{default:t(()=>[a(m,null,{default:t(()=>[u(f(c.data.zhhm),1)]),_:1})]),_:1}),a(p,{label:"所属部门"},{default:t(()=>[a(m,null,{default:t(()=>[u(f(c.data.departName),1)]),_:1})]),_:1}),a(p,{label:"资金账户号"},{default:t(()=>[a(m,null,{default:t(()=>[u(f(c.data.zjzhh),1)]),_:1})]),_:1}),a(p,{label:"资金资金账户名"},{default:t(()=>[a(m,null,{default:t(()=>[u(f(c.data.zjzhm),1)]),_:1})]),_:1}),a(p,{label:"状态"},{default:t(()=>[a(m,null,{default:t(()=>[u(f(e(b)("getDictionaryItem",c.data.state).detailName),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),re=y({name:"SystemNominalAccountManage"}),ce=y({...re,setup(w){const{vAuthority:n}=H(),{warningModal:b}=ae(),[C,c]=J(""),{form:d,resetForm:m}=Q(()=>({zjzhh:"",departName:"",departNo:""}),()=>I()),{selectRow:p,columnsData:S,visibleColumnsData:k,tableBaseOptions:i,resetData:I,extendTableList:B,setSelectRow:V,changeTableColumn:K,changeTableSize:R}=W(oe(),()=>A()),U=l=>{b("确定注销该账户吗？",async o=>{const{res:_}=await T(()=>j.logoutNominalAccount({zjzhh:l.zjzhh,departName:l.departName,departNo:l.departNo}));o(!0),_&&A()})},L=l=>{b("确定删除该账户吗？",async o=>{const{res:_}=await T(()=>j.deleteNominalAccount({zjzhh:l.zjzhh,departName:l.departName,departNo:l.departNo}));o(!0),_&&A()})},{data:E,loading:q,initData:A}=X(async()=>{const{res:l,err:o}=await T(()=>j.getNominalAccountList({...d.value,currentPage:i.pagination.current,pageSize:i.pagination.pageSize}));return o?[]:(i.pagination.total=l.data.totalCount,B(l==null?void 0:l.data.dataList))});return(l,o)=>{const _=r("a-input"),v=r("a-form-item"),x=r("a-grid-item"),F=r("a-grid"),P=r("a-form"),O=r("icon-plus"),N=r("a-button"),Y=r("a-space"),Z=r("a-button-group"),G=r("a-table");return h(),ee("div",null,[a(ne,{"table-columns":e(S),"table-size":e(i).size,onResetSearch:e(m),onSearch:e(I),onChangeTableSize:e(R),onChangeTableColumn:e(K)},{form:t(()=>[a(P,{model:e(d),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[a(F,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:t(()=>[a(x,null,{default:t(()=>[a(v,{label:"资金账号:"},{default:t(()=>[a(_,{modelValue:e(d).zjzhh,"onUpdate:modelValue":o[0]||(o[0]=s=>e(d).zjzhh=s),modelModifiers:{trim:!0},placeholder:"请输入资金账号"},null,8,["modelValue"])]),_:1})]),_:1}),a(x,null,{default:t(()=>[a(v,{label:"部门名称:"},{default:t(()=>[a(_,{modelValue:e(d).departName,"onUpdate:modelValue":o[1]||(o[1]=s=>e(d).departName=s),modelModifiers:{trim:!0},placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1})]),_:1}),a(x,null,{default:t(()=>[a(v,{label:"部门代码:"},{default:t(()=>[a(_,{modelValue:e(d).departNo,"onUpdate:modelValue":o[2]||(o[2]=s=>e(d).departNo=s),modelModifiers:{trim:!0},placeholder:"请输入部门代码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:t(()=>[a(Y,null,{default:t(()=>[D((h(),z(N,{type:"outline",onClick:o[3]||(o[3]=s=>l.$router.push("/system/nominalAccountManage/operate"))},{icon:t(()=>[a(O)]),default:t(()=>[u(" 新增 ")]),_:1})),[[e(n),"SystemNominalAccountManageAdd"]])]),_:1})]),table:t(()=>[a(G,{"selected-keys":e(i).selectedKeys,"onUpdate:selectedKeys":o[4]||(o[4]=s=>e(i).selectedKeys=s),class:"zs-table","row-key":"id",data:e(E),"row-selection":e(i).rowSelection,bordered:e(i).bordered,pagination:e(i).pagination,size:e(i).size,columns:e(k),stripe:e(i).stripe,loading:e(q)},{operate:t(({record:s})=>[a(Z,null,{default:t(()=>[a(N,{type:"text",status:"success",onClick:M=>e(V)(s,()=>e(c)("详情"))},{default:t(()=>[u("详情")]),_:2},1032,["onClick"]),D((h(),z(N,{type:"text",status:"warning",disabled:["0","2"].includes(s.state),onClick:M=>U(s)},{default:t(()=>[u("销户")]),_:2},1032,["disabled","onClick"])),[[e(n),"SystemNominalAccountManageLogout"]]),D((h(),z(N,{type:"text",status:"danger",onClick:M=>L(s)},{default:t(()=>[u("删除")]),_:2},1032,["onClick"])),[[e(n),"SystemNominalAccountManageDelete"]])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(C)==="详情"?(h(),z(se,{key:0,data:e(p),onClose:o[5]||(o[5]=s=>e(V)({},()=>e(c)("")))},null,8,["data"])):te("",!0)])}}});export{ce as default};
