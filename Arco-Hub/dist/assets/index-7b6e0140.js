import{d as q,u as P,C as A,E as D,s as F,r as n,o as f,l as b,w as r,g as l,c as a,e as M,O as c,F as j,i as _,f as R,h as E,k as I,G as K,H as Z,A as z,_ as H}from"./index-8a2cb146.js";import{Z as L}from"./index-2bbe694f.js";import{Q as N}from"./quitGroup-313e3abb.js";const J=i=>(K("data-v-7829076b"),i=i(),Z(),i),W=J(()=>R("div",{style:{height:"100px"}},null,-1)),X={class:"orderSubmit-footer box-flex jc-fe"},Y=q({name:"QuitGroupPlatformQuitOperate"}),$=q({...Y,setup(i){const s=P(),{jumpTabName:y}=A(),{warningModal:k}=z(),[ee,V]=D(null),{form:t,formRef:g}=F(()=>({groupId:"",routeName:"",supName:"",departName:"",settleTotal:0,inssettleTotal:0,actualInsuranceRefund:0,settleDesc:"",insType:"1",outNum:0,remark:""})),x={actualInsuranceRefund:{required:!0,message:"请选择保险退款金额"}},U=async()=>{const{res:u,err:o}=await I(()=>N.getPlatformQuitGroupDetail({groupId:s.query.groupId,state:s.query.state,id:s.query.id}));o||(t.value={...u==null?void 0:u.data,insType:(u==null?void 0:u.data.insType)??"1",actualInsuranceRefund:u==null?void 0:u.data.inssettleTotal})},h=()=>{g.value.validate(u=>{u||C()})},C=()=>{k("确定退团吗?",async u=>{const{err:o}=await I(()=>N.confirmPlatformQuitGroup({id:s.query.id,insType:t.value.insType,inssettleTotal:t.value.actualInsuranceRefund,remark:t.value.remark}),{successMsg:"操作成功",after:()=>V(""),before:()=>V("okLoading")});u(!0),!o&&y()})},w=u=>{t.value.insType=u,u==="0"?t.value.actualInsuranceRefund=0:t.value.actualInsuranceRefund=t.value.inssettleTotal};return U(),(u,o)=>{const m=n("a-input"),d=n("a-form-item"),p=n("a-input-number"),T=n("a-radio"),Q=n("a-radio-group"),O=n("a-textarea"),S=n("a-form"),G=n("a-card"),v=n("a-button"),B=n("a-space");return f(),b(L,null,{default:r(()=>[l(G,{title:"平台退团详情",bordered:!1,class:"general-card"},{default:r(()=>[l(S,{ref_key:"formRef",ref:g,model:a(t),"label-align":"left",size:"large",class:"margin-top",style:{width:"800px","padding-left":"100px"},"auto-label-width":"",rules:x,disabled:!!a(s).query.isReadOnly},{default:r(()=>[l(d,{field:"groupId",label:"团号:",required:""},{default:r(()=>[l(m,{modelValue:a(t).groupId,"onUpdate:modelValue":o[0]||(o[0]=e=>a(t).groupId=e),disabled:"",placeholder:"请输入团号"},null,8,["modelValue"])]),_:1}),a(s).query.isReadOnly?(f(),M(j,{key:0},[l(d,{field:"routeName",label:"线路名称:",required:""},{default:r(()=>[l(m,{modelValue:a(t).routeName,"onUpdate:modelValue":o[1]||(o[1]=e=>a(t).routeName=e),placeholder:"请输入线路名称"},null,8,["modelValue"])]),_:1}),l(d,{field:"supName",label:"供应商名称:",required:""},{default:r(()=>[l(m,{modelValue:a(t).supName,"onUpdate:modelValue":o[2]||(o[2]=e=>a(t).supName=e),placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1}),l(d,{field:"departName",label:"营业部名称:",required:""},{default:r(()=>[l(m,{modelValue:a(t).departName,"onUpdate:modelValue":o[3]||(o[3]=e=>a(t).departName=e),placeholder:"请输入营业部名称"},null,8,["modelValue"])]),_:1}),l(d,{field:"settleTotal",label:"报名总退款:",required:""},{default:r(()=>[l(p,{modelValue:a(t).settleTotal,"onUpdate:modelValue":o[4]||(o[4]=e=>a(t).settleTotal=e),formatter:e=>a(c)(e,""),parser:e=>e.replace(/,/g,""),precision:2,"hide-button":"",placeholder:"请输入报名总退款"},null,8,["modelValue","formatter","parser"])]),_:1})],64)):(f(),b(d,{key:1,field:"inssettleTotal",label:"退团保险费总计:",required:""},{default:r(()=>[l(p,{modelValue:a(t).inssettleTotal,"onUpdate:modelValue":o[5]||(o[5]=e=>a(t).inssettleTotal=e),formatter:e=>a(c)(e,""),parser:e=>e.replace(/,/g,""),precision:2,disabled:"","hide-button":"",placeholder:"请输入退团保险费总计"},null,8,["modelValue","formatter","parser"])]),_:1})),l(d,{field:"outNum",label:"退团人数:",required:""},{default:r(()=>[l(p,{modelValue:a(t).outNum,"onUpdate:modelValue":o[6]||(o[6]=e=>a(t).outNum=e),formatter:e=>a(c)(e,""),parser:e=>e.replace(/,/g,""),precision:0,disabled:"","hide-button":"",placeholder:"请输入报名总退款"},null,8,["modelValue","formatter","parser"])]),_:1}),l(d,{field:"insType",label:"保险费是否全退:",required:""},{default:r(()=>[l(Q,{"model-value":a(t).insType,onChange:w},{default:r(()=>[l(T,{value:"1"},{default:r(()=>[_("是")]),_:1}),l(T,{value:"0"},{default:r(()=>[_("否")]),_:1})]),_:1},8,["model-value"])]),_:1}),l(d,{field:"actualInsuranceRefund",label:"保险退款金额:",required:""},{default:r(()=>[l(p,{modelValue:a(t).actualInsuranceRefund,"onUpdate:modelValue":o[7]||(o[7]=e=>a(t).actualInsuranceRefund=e),formatter:e=>a(c)(e,""),parser:e=>e.replace(/,/g,""),precision:2,min:0,disabled:a(t).insType==="1",max:a(t).inssettleTotal,"hide-button":"",placeholder:"请输入保险退款金额"},null,8,["modelValue","formatter","parser","disabled","max"])]),_:1}),l(d,{field:"remark",label:"保险退款说明:"},{default:r(()=>[l(O,{modelValue:a(t).remark,"onUpdate:modelValue":o[8]||(o[8]=e=>a(t).remark=e),placeholder:a(s).query.isReadOnly?"":"请输入保险退款说明"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model","disabled"])]),_:1}),W,R("div",X,[l(B,null,{default:r(()=>[a(s).query.isReadOnly?E("",!0):(f(),b(v,{key:0,type:"primary",onClick:h},{default:r(()=>[_("确定")]),_:1})),l(v,{onClick:o[9]||(o[9]=()=>a(y)())},{default:r(()=>[_("返回")]),_:1})]),_:1})])]),_:1})}}});const oe=H($,[["__scopeId","data-v-7829076b"]]);export{oe as default};
