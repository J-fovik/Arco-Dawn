import{d as C,g as A,h as I,i as h,n as $,j as N,r as m,o as k,l as D,w as c,a as i,b as e,v as R,m as K,z as H,c as J,e as M,p as L}from"./index-d007178a.js";import{f as v,_ as Q}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{D as E}from"./data-30d5a842.js";import"./index-13860ba0.js";const W=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"答题时间",dataIndex:"create_time",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:t})=>v(t.create_time)},{title:"测评名称",dataIndex:"name",show:!0,align:"center",render:({record:t})=>v(t.name)},{title:"答题人联系方式",dataIndex:"phone",show:!0,align:"center",render:({record:t})=>v(t.phone)},{title:"操作",width:300,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],X=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"问答序号",dataIndex:"evaluationTitleSort",show:!0,align:"center",render:({record:t})=>v(t.evaluationTitleSort)},{title:"选择答案",dataIndex:"answer",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:t})=>v(t.answer==0?"是":"否")},{title:"答题时间",dataIndex:"createTime",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:t})=>v(t.createTime)}],Y=C({name:"zsAddVolunteer"}),Z=C({...Y,props:{data:{default:()=>({})}},emits:["close","success"],setup(t,{emit:b}){const w=t;A();const[o,V]=I(null),{form:p,formRef:y}=h(()=>({...w.data})),{createRowNo:x,tableBaseOptions:l,visibleColumnsData:r}=$(X(),()=>T()),{data:u,loading:S,initData:T}=N(async()=>{const{res:s,err:a}=await K(()=>E.getEvaluationAnswers({id:p.value.evaluation_id,userId:p.value.user_id,currentPage:l.pagination.current,pageSize:l.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(l.pagination.total=s.data.totalCount,(s==null?void 0:s.data.resultList).map((g,n)=>({sortTableNo:x(n),...g})))});return(s,a)=>{const z=m("a-table"),g=m("a-modal");return k(),D(g,{title:"测评答题记录","unmount-on-close":"",visible:"",fullscreen:"","align-center":!1,"mask-closable":!1,"ok-loading":e(o)==="okLoading",onCancel:a[1]||(a[1]=n=>b("close")),onOk:a[2]||(a[2]=n=>b("close"))},{default:c(()=>[i(z,{modelValue:e(u),"onUpdate:modelValue":a[0]||(a[0]=n=>R(u)?u.value=n:null),class:"zs-table","row-key":"id",data:e(u),bordered:e(l).bordered,pagination:e(l).pagination,size:e(l).size,columns:e(r),stripe:e(l).stripe,loading:e(S)},null,8,["modelValue","data","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["ok-loading"])}}}),ee=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"归类",dataIndex:"name",width:300,show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:t})=>v(t.name)},{title:"描述",dataIndex:"value",show:!0,align:"center",render:({record:t})=>v(t.value)}],te=C({name:"zsAddVolunteer"}),ae=C({...te,props:{data:{default:()=>({})}},emits:["close","success"],setup(t,{emit:b}){const w=t;A();const[o,V]=I(null),{form:p,formRef:y}=h(()=>({...w.data})),{createRowNo:x,tableBaseOptions:l,visibleColumnsData:r}=$(ee(),()=>T()),{data:u,loading:S,initData:T}=N(async()=>{const{res:s,err:a}=await K(()=>E.getEvaluationReport({id:p.value.evaluation_id,userId:p.value.user_id}));return a?[]:(l.pagination.total=s.data.totalCount,(s==null?void 0:s.data).map((g,n)=>({sortTableNo:x(n),...g})))});return(s,a)=>{const z=m("a-table"),g=m("a-modal");return k(),D(g,{title:"测评答题报告","unmount-on-close":"",visible:"",fullscreen:"","align-center":!1,"mask-closable":!1,"ok-loading":e(o)==="okLoading",onCancel:a[1]||(a[1]=n=>b("close")),onOk:a[2]||(a[2]=n=>b("close"))},{default:c(()=>[i(z,{modelValue:e(u),"onUpdate:modelValue":a[0]||(a[0]=n=>R(u)?u.value=n:null),class:"zs-table","row-key":"id",data:e(u),bordered:e(l).bordered,size:e(l).size,columns:e(r),stripe:e(l).stripe,loading:e(S)},null,8,["modelValue","data","bordered","size","columns","stripe","loading"])]),_:1},8,["ok-loading"])}}}),ne=C({name:"DataAnswerOptions"}),ue=C({...ne,setup(t){const[b,w]=I(null);A();const{form:o,resetForm:V}=h(()=>({createStartTime:"",createEndTime:"",name:""}),()=>u()),p=H({get(){return o.value.createStartTime&&o.value.createEndTime?[o.value.createStartTime,o.value.createEndTime]:[]},set(f){o.value.createStartTime=f[0],o.value.createEndTime=f[1]}}),{selectRow:y,columnsData:x,visibleColumnsData:l,tableBaseOptions:r,resetData:u,extendTableList:S,setSelectRow:T,changeTableColumn:s,changeTableSize:a}=$(W(),()=>n()),{data:z,loading:g,initData:n}=N(async()=>{const{res:f,err:d}=await K(()=>E.getEvaluationRecord({...o.value,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return d?[]:(r.pagination.total=f.data.totalCount,S(f==null?void 0:f.data.resultList))});return(f,d)=>{const U=m("a-input"),O=m("a-form-item"),B=m("a-grid-item"),P=m("a-range-picker"),F=m("a-grid"),j=m("a-form"),q=m("a-button"),G=m("a-table");return k(),J("div",null,[i(Q,{"table-columns":e(x),"table-size":e(r).size,onResetSearch:e(V),onSearch:e(u),onChangeTableSize:e(a),onChangeTableColumn:e(s)},{form:c(()=>[i(j,{model:e(o),"label-align":"left",size:"large","auto-label-width":""},{default:c(()=>[i(F,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:c(()=>[i(B,null,{default:c(()=>[i(O,{label:"测评名称:"},{default:c(()=>[i(U,{modelValue:e(o).name,"onUpdate:modelValue":d[0]||(d[0]=_=>e(o).name=_),placeholder:"请输入测评名称"},null,8,["modelValue"])]),_:1})]),_:1}),i(B,null,{default:c(()=>[i(O,{field:"createTime",label:"答题时间:"},{default:c(()=>[i(P,{class:"flex1",modelValue:e(p),"onUpdate:modelValue":d[1]||(d[1]=_=>R(p)?p.value=_:null)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),table:c(()=>[i(G,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":d[2]||(d[2]=_=>e(r).selectedKeys=_),class:"zs-table","row-key":"user_id",data:e(z),bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(l),stripe:e(r).stripe,loading:e(g)},{operate:c(({record:_})=>[i(q,{type:"text",status:"success",onClick:oe=>e(T)(_,()=>e(w)("zsAddAnswer"))},{default:c(()=>[M("记录详情")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(b)==="zsAddAnswer"?(k(),D(Z,{key:0,data:e(y),onSuccess:e(n),onClose:d[3]||(d[3]=_=>e(T)({},()=>e(w)(null)))},null,8,["data","onSuccess"])):L("",!0),e(b)==="zsReport"?(k(),D(ae,{key:1,data:e(y),onSuccess:e(n),onClose:d[4]||(d[4]=_=>e(T)({},()=>e(w)(null)))},null,8,["data","onSuccess"])):L("",!0)])}}});export{ue as default};
