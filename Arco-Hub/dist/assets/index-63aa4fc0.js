import{n as u,p as ee,T as te,d as z,q as ae,E as oe,s as le,v as ne,M as re,I as k,x as se,y as ie,r as d,o as g,e as de,g as o,w as l,c as e,z as b,l as w,i as C,f as ue,k as N,A as ce,Y as pe,X as D}from"./index-8a2cb146.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{H as T}from"./hotel-680890b8.js";import"./index-2bbe694f.js";const ge=()=>[{title:"酒店名称",dataIndex:"hotelName",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:n})=>u(n.hotelName)},{title:"酒店等级",dataIndex:"hotelLevel",show:!0,align:"center",render:({record:n})=>ee(te,{color:"blue"},{default:()=>u(n.hotelLevel)})},{title:"联系人",dataIndex:"hotelContacts",show:!0,align:"center",render:({record:n})=>u(n.hotelContacts)},{title:"联系电话",dataIndex:"hotelContactsPhone",show:!0,align:"center",render:({record:n})=>u(n.hotelContactsPhone)},{title:"详细地址",dataIndex:"detailAddress",show:!0,align:"center",ellipsis:!0,tooltip:!0,render:({record:n})=>u(n.detailAddress)},{title:"所属国家",dataIndex:"country",show:!0,align:"center",render:({record:n})=>u(n.country)},{title:"所属省",dataIndex:"province",show:!0,align:"center",render:({record:n})=>u(n.province)},{title:"所属市",dataIndex:"city",show:!0,align:"center",render:({record:n})=>u(n.city)},{title:"合作期限开始",dataIndex:"periodCooperateStart",show:!0,align:"center",render:({record:n})=>u(n.periodCooperateStart)},{title:"合作期限结束",dataIndex:"periodCooperateEnd",show:!0,align:"center",render:({record:n})=>u(n.periodCooperateEnd)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],Ce=ue("span",{class:"mx-3"},"-",-1),_e=z({name:"HotelCooperateManage"}),xe=z({..._e,setup(n){const{vAuthority:_}=ae(),{warningModal:A}=ce(),[E,fe]=oe(null),{form:a,resetForm:$}=le(()=>({country:"",countryCode:"",province:"",provinceCode:"",city:"",cityCode:"",periodCooperateStart:"",periodCooperateEnd:"",hotelName:""}),()=>S()),{selectRow:he,columnsData:L,visibleColumnsData:K,tableBaseOptions:i,resetData:S,setSelectRow:ye,extendTableList:ve,changeTableColumn:U,changeTableSize:Y}=ne(ge(),()=>h()),f=async s=>{const{res:t}=await N(()=>pe.getAreaInfo(s));return(t==null?void 0:t.data)??[]},{data:x}=re(async()=>await f({level:"1"}),[]),{data:V}=k(async()=>await f({parentNo:a.value.countryCode}),{watchSource:()=>a.value.countryCode,defaultValue:[]}),{data:I}=k(async()=>await f({parentNo:a.value.provinceCode}),{watchSource:()=>a.value.provinceCode,defaultValue:[]}),H=s=>{a.value.provinceCode="",a.value.province="",a.value.cityCode="",a.value.city="",a.value.country=x.value.find(t=>t.areaNo==s).areaName},P=s=>{a.value.cityCode="",a.value.city="",a.value.province=V.value.find(t=>t.areaNo==s).areaName},B=s=>{a.value.city=I.value.find(t=>t.areaNo==s).areaName},R=s=>{A(`确定操作选中的${i.selectedKeys.length}数据吗？`,async t=>{const{res:y}=await N(()=>T[s]({idList:i.selectedKeys}),{successMsg:"操作成功"});t(!0),y&&(i.selectedKeys=[],h())})},{data:O,loading:q,initData:h}=se(async()=>{const{res:s,err:t}=await N(()=>T.getHotelList({...a.value,periodCooperateStart:D(a.value.periodCooperateStart,"YYYYMMDD",""),periodCooperateEnd:D(a.value.periodCooperateEnd,"YYYYMMDD",""),currentPage:i.pagination.current,pageSize:i.pagination.pageSize,pagingOrNot:"1"}));return t?[]:(i.pagination.total=s.data.totalCount,s.data.list)});return ie(h),(s,t)=>{const y=d("a-input"),c=d("a-form-item"),p=d("a-grid-item"),v=d("a-select"),M=d("a-date-picker"),F=d("a-grid"),W=d("a-form"),X=d("icon-plus"),m=d("a-button"),j=d("icon-close"),G=d("a-space"),J=d("a-button-group"),Q=d("a-table");return g(),de("div",null,[o(me,{"table-columns":e(L),"table-size":e(i).size,onResetSearch:e($),onSearch:e(S),onChangeTableSize:e(Y),onChangeTableColumn:e(U)},{form:l(()=>[o(W,{model:e(a),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[o(F,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:l(()=>[o(p,null,{default:l(()=>[o(c,{field:"hotelName",label:"酒店名称:"},{default:l(()=>[o(y,{modelValue:e(a).hotelName,"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).hotelName=r),modelModifiers:{trim:!0},placeholder:"请输入景区名称"},null,8,["modelValue"])]),_:1})]),_:1}),o(p,null,{default:l(()=>[o(c,{field:"country",label:"所属国家:"},{default:l(()=>[o(v,{modelValue:e(a).countryCode,"onUpdate:modelValue":t[1]||(t[1]=r=>e(a).countryCode=r),"allow-search":"",options:e(x),"field-names":{label:"areaName",value:"areaNo"},"virtual-list-props":{height:200},placeholder:"请选择所属国家",onChange:H},null,8,["modelValue","options"])]),_:1})]),_:1}),o(p,null,{default:l(()=>[o(c,{field:"province",label:"所属省:"},{default:l(()=>[o(v,{modelValue:e(a).provinceCode,"onUpdate:modelValue":t[2]||(t[2]=r=>e(a).provinceCode=r),options:e(V),"field-names":{label:"areaName",value:"areaNo"},"allow-search":"",placeholder:"请选择所属省",onChange:P},null,8,["modelValue","options"])]),_:1})]),_:1}),o(p,null,{default:l(()=>[o(c,{field:"city",label:"所属城市:"},{default:l(()=>[o(v,{modelValue:e(a).cityCode,"onUpdate:modelValue":t[3]||(t[3]=r=>e(a).cityCode=r),options:e(I),"field-names":{label:"areaName",value:"areaNo"},"allow-search":"",placeholder:"请选择所属市",onChange:B},null,8,["modelValue","options"])]),_:1})]),_:1}),o(p,null,{default:l(()=>[o(c,{label:"选择日期:"},{default:l(()=>[o(M,{modelValue:e(a).periodCooperateStart,"onUpdate:modelValue":t[4]||(t[4]=r=>e(a).periodCooperateStart=r),class:"flex1",placeholder:"合作期限开始日期"},null,8,["modelValue"]),Ce,o(M,{modelValue:e(a).periodCooperateEnd,"onUpdate:modelValue":t[5]||(t[5]=r=>e(a).periodCooperateEnd=r),class:"flex1",placeholder:"合作期限结束日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:l(()=>[o(G,null,{default:l(()=>[b((g(),w(m,{type:"outline",onClick:t[6]||(t[6]=r=>s.$router.push("/hotel/cooperateManage/operate"))},{icon:l(()=>[o(X)]),default:l(()=>[C(" 新增 ")]),_:1})),[[e(_),"HotelCooperateManageAdd"]]),b((g(),w(m,{type:"outline",status:"danger",disabled:!e(i).selectedKeys.length,loading:e(E)==="删除",onClick:t[7]||(t[7]=r=>R("delPlaneHotel"))},{icon:l(()=>[o(j)]),default:l(()=>[C(" 删除 ")]),_:1},8,["disabled","loading"])),[[e(_),"HotelCooperateManageDelete"]])]),_:1})]),table:l(()=>[o(Q,{"selected-keys":e(i).selectedKeys,"onUpdate:selectedKeys":t[8]||(t[8]=r=>e(i).selectedKeys=r),class:"zs-table","row-key":"id",data:e(O),"row-selection":e(i).rowSelection,bordered:e(i).bordered,pagination:e(i).pagination,size:e(i).size,columns:e(K),stripe:e(i).stripe,loading:e(q)},{operate:l(({record:r})=>[o(J,null,{default:l(()=>[o(m,{type:"text",status:"success",onClick:Z=>s.$router.push(`/hotel/cooperateManage/operate?id=${r.id}&isReadOnly=true`)},{default:l(()=>[C("详情")]),_:2},1032,["onClick"]),b((g(),w(m,{type:"text",onClick:Z=>s.$router.push(`/hotel/cooperateManage/operate?id=${r.id}`)},{default:l(()=>[C("编辑")]),_:2},1032,["onClick"])),[[e(_),"HotelCooperateManageEdit"]])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{xe as default};
