import{d as I,g as N,h as P,i as B,r,o as D,l as K,w as t,a as l,b as e,m as A,n as Y,j as Z,c as ee,e as H,p as E,q as le}from"./index-d007178a.js";import{f as x,c as F,_ as te}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as L}from"./options-aafac76d.js";import{O}from"./otherData-17ba8805.js";import{R as oe}from"./recruit-3c2f52ae.js";import"./index-13860ba0.js";const ae=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:s})=>x(s.sf)},{title:"年份",dataIndex:"nf",show:!0,align:"center",render:({record:s})=>x(s.nf)},{title:"省份-招生数据",dataIndex:"wsf",show:!0,align:"center",render:({record:s})=>x(s.wsf)},{title:"年份-招生数据",dataIndex:"wnf",show:!0,align:"center",render:({record:s})=>x(s.wnf)},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:s})=>x(s.yxmc)},{title:"科类",dataIndex:"kl",show:!0,align:"center",render:({record:s})=>x(s.kl)},{title:"批次",dataIndex:"pc",show:!0,align:"center",render:({record:s})=>x(s.pc)},{title:"招生类型",dataIndex:"zslx",show:!0,align:"center",render:({record:s})=>x(s.zslx)},{title:"最低分",dataIndex:"zdf",show:!0,align:"right",render:({record:s})=>x(s.zdf)},{title:"最低分位次",dataIndex:"zdfwc",show:!0,align:"right",render:({record:s})=>x(s.zdfwc)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ne=I({name:"zsAddProHistoricalData"}),de=I({...ne,props:{data:{default:()=>({})}},emits:["close","success"],setup(s,{emit:y}){const V=s,b=N(),[M,u]=P(null),{form:a,formRef:z}=B(()=>({...V.data})),T={nf:{required:!0,message:"请输入年份"},sf:{required:!0,message:"请输入省份"},pc:{required:!0,message:"请输入批次"},kl:{required:!0,message:"请输入科类"},yxmc:{required:!0,message:"请输入院校名称"},zymc:{required:!0,message:"请输入专业名称"},zdfwc:{required:!0,message:"请输入最低分位次"},zdf:{required:!0,message:"请输入最低分"},wsf:{required:!0,message:"请输入省份-招生数据"},wnf:{required:!0,message:"请输入年份-招生数据"},zslx:{required:!0,message:"请输入招生类型"}},q=()=>{z.value.validate(g=>{g||(V.data.id?f("editSchoolHistory"):f("addSchoolHistory"))})},f=async g=>{const{err:o}=await A(()=>O[g](a.value),{before:()=>u("okLoading"),after:()=>u(null)});o||(y("success"),y("close"))};return(g,o)=>{const w=r("a-input-number"),i=r("a-form-item"),m=r("a-grid-item"),_=r("a-input"),C=r("a-select"),R=r("a-textarea"),k=r("a-grid"),p=r("a-form"),d=r("a-modal");return D(),K(d,{title:e(F)("院校历史数据(智能填报)",!!V.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"60vw","align-center":!1,"mask-closable":!1,"ok-loading":e(M)==="okLoading",onCancel:o[15]||(o[15]=n=>y("close")),onOk:q},{default:t(()=>[l(p,{ref_key:"formRef",ref:z,model:e(a),"label-align":"left",size:"large","auto-label-width":"",rules:T},{default:t(()=>[l(k,{cols:2,"col-gap":24},{default:t(()=>[l(m,null,{default:t(()=>[l(i,{field:"nf",label:"年份:"},{default:t(()=>[l(w,{modelValue:e(a).nf,"onUpdate:modelValue":o[0]||(o[0]=n=>e(a).nf=n),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"pc",label:"批次:"},{default:t(()=>[l(_,{modelValue:e(a).pc,"onUpdate:modelValue":o[1]||(o[1]=n=>e(a).pc=n),modelModifiers:{trim:!0},placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"sf",label:"省份:"},{default:t(()=>[l(C,{modelValue:e(a).sf,"onUpdate:modelValue":o[2]||(o[2]=n=>e(a).sf=n),placeholder:"请输入省份","allow-search":"",options:[...e(L),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"yxmc",label:"院校名称:"},{default:t(()=>[l(_,{modelValue:e(a).yxmc,"onUpdate:modelValue":o[3]||(o[3]=n=>e(a).yxmc=n),modelModifiers:{trim:!0},placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"kl",label:"科类:"},{default:t(()=>[l(_,{modelValue:e(a).kl,"onUpdate:modelValue":o[4]||(o[4]=n=>e(a).kl=n),modelModifiers:{trim:!0},placeholder:"请输入科类"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"zdf",label:"最低分:"},{default:t(()=>[l(w,{modelValue:e(a).zdf,"onUpdate:modelValue":o[5]||(o[5]=n=>e(a).zdf=n),modelModifiers:{trim:!0},placeholder:"请输入最低分"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"zdfwc",label:"最低分位次:"},{default:t(()=>[l(w,{modelValue:e(a).zdfwc,"onUpdate:modelValue":o[6]||(o[6]=n=>e(a).zdfwc=n),modelModifiers:{trim:!0},placeholder:"请输入最低分位次"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"wsf",label:"省份-招生数据:"},{default:t(()=>[l(C,{modelValue:e(a).wsf,"onUpdate:modelValue":o[7]||(o[7]=n=>e(a).wsf=n),placeholder:"请输入省份-招生数据","allow-search":"",options:[...e(L),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"wnf",label:"年份-招生数据:"},{default:t(()=>[l(w,{modelValue:e(a).wnf,"onUpdate:modelValue":o[8]||(o[8]=n=>e(a).wnf=n),modelModifiers:{trim:!0},placeholder:"请输入年份-招生数据"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"zslx",label:"招生类型:"},{default:t(()=>[l(_,{modelValue:e(a).zslx,"onUpdate:modelValue":o[9]||(o[9]=n=>e(a).zslx=n),modelModifiers:{trim:!0},placeholder:"请输入招生类型"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"yxdm",label:"院校代码:"},{default:t(()=>[l(_,{modelValue:e(a).yxdm,"onUpdate:modelValue":o[10]||(o[10]=n=>e(a).yxdm=n),modelModifiers:{trim:!0},placeholder:"请输入院校代码"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"xk",label:"首选科目:"},{default:t(()=>[l(_,{modelValue:e(a).xk,"onUpdate:modelValue":o[11]||(o[11]=n=>e(a).xk=n),modelModifiers:{trim:!0},placeholder:"请输入首选科目"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"zx",label:"再选科目:"},{default:t(()=>[l(_,{modelValue:e(a).zx,"onUpdate:modelValue":o[12]||(o[12]=n=>e(a).zx=n),modelModifiers:{trim:!0},placeholder:"请输入再选科目"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"zyz",label:"专业组:"},{default:t(()=>[l(_,{modelValue:e(a).zyz,"onUpdate:modelValue":o[13]||(o[13]=n=>e(a).zyz=n),modelModifiers:{trim:!0},placeholder:"请输入专业组"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:24},{default:t(()=>[l(i,{field:"yxbz",label:"院校备注:"},{default:t(()=>[l(R,{modelValue:e(a).yxbz,"onUpdate:modelValue":o[14]||(o[14]=n=>e(a).yxbz=n),modelModifiers:{trim:!0},"auto-size":{minRows:8},placeholder:"请输入院校备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),re=I({name:"zsSummary"}),se=I({...re,props:{data:{default:()=>({})}},emits:["close","success"],setup(s,{emit:y}){const V=s,b=N(),[M,u]=P(null),{form:a,formRef:z}=B(()=>({...V.data})),T={nf:{required:!0,message:"请输入年份"},province:{required:!0,message:"请输入省份"},yxId:{required:!0,message:"请选择院校名称"}},q=()=>{z.value.validate(g=>{g||V.data.id||f("summarySchoolHistory")})},f=async g=>{const{err:o}=await A(()=>oe[g](a.value),{before:()=>u("okLoading"),after:()=>u(null)});o||(y("success"),y("close"))};return(g,o)=>{const w=r("a-input-number"),i=r("a-form-item"),m=r("a-grid-item"),_=r("a-select"),C=r("a-grid"),R=r("a-form"),k=r("a-modal");return D(),K(k,{title:e(F)("填写你想要汇总的数据",!!V.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"500px","align-center":!1,"mask-closable":!1,"ok-loading":e(M)==="okLoading",onCancel:o[3]||(o[3]=p=>y("close")),onOk:q},{default:t(()=>[l(R,{ref_key:"formRef",ref:z,model:e(a),"label-align":"left",size:"large","auto-label-width":"",rules:T},{default:t(()=>[l(C,{cols:1,"col-gap":24},{default:t(()=>[l(m,null,{default:t(()=>[l(i,{field:"nf",label:"年份:"},{default:t(()=>[l(w,{modelValue:e(a).nf,"onUpdate:modelValue":o[0]||(o[0]=p=>e(a).nf=p),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"province",label:"省份:"},{default:t(()=>[l(_,{modelValue:e(a).province,"onUpdate:modelValue":o[1]||(o[1]=p=>e(a).province=p),placeholder:"请输入省份","allow-search":"",options:[...e(L),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:t(()=>[l(i,{field:"yxId",label:"院校名称:"},{default:t(()=>[l(_,{modelValue:e(a).yxId,"onUpdate:modelValue":o[2]||(o[2]=p=>e(a).yxId=p),options:e(b).schoolList,"virtual-list-props":{height:200},"allow-search":"","allow-clear":"",placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),ue=I({name:"OtherWDataSchool"}),ge=I({...ue,setup(s){const{warningModal:y}=le(),[V,b]=P(null),M=N(),{form:u,resetForm:a}=B(()=>({sf:"",nf:"",yxmc:"",pc:"",wsf:"",wnf:"",kl:"",zslx:""}),()=>g()),{selectRow:z,columnsData:T,visibleColumnsData:q,tableBaseOptions:f,resetData:g,extendTableList:o,setSelectRow:w,changeTableColumn:i,changeTableSize:m}=Y(ae(),()=>k()),_=()=>{y(`确定删除选中的${f.selectedKeys.length}数据吗？`,async p=>{const{err:d}=await A(()=>O.deleteSchoolHistory({ids:f.selectedKeys}),{successMsg:"操作成功"});d||(p(!0),f.selectedKeys=[],k())})},{data:C,loading:R,initData:k}=Z(async()=>{const{res:p,err:d}=await A(()=>O.getSchoolHistoryList({...u.value,currentPage:f.pagination.current,pageSize:f.pagination.pageSize,pagingOrNot:"1"}));return d?[]:(f.pagination.total=p.data.totalCount,o(p==null?void 0:p.data.resultList))});return(p,d)=>{const n=r("a-select"),v=r("a-form-item"),S=r("a-grid-item"),h=r("a-input"),j=r("a-grid"),W=r("a-form"),G=r("icon-plus"),$=r("a-button"),J=r("icon-close"),Q=r("a-space"),X=r("a-table");return D(),ee("div",null,[l(te,{fold:"","table-columns":e(T),"table-size":e(f).size,onResetSearch:e(a),onSearch:e(g),onChangeTableSize:e(m),onChangeTableColumn:e(i)},{form:t(({collapsed:U})=>[l(W,{model:e(u),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[l(j,{cols:{md:3,lg:3,xl:3,xxl:3},"col-gap":12,collapsed:!U},{default:t(()=>[l(S,null,{default:t(()=>[l(v,{field:"sf",label:"省份:"},{default:t(()=>[l(n,{modelValue:e(u).sf,"onUpdate:modelValue":d[0]||(d[0]=c=>e(u).sf=c),placeholder:"请输入省份","allow-search":"","allow-clear":"",options:[...e(L),...e(M).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(S,null,{default:t(()=>[l(v,{label:"年份:"},{default:t(()=>[l(h,{modelValue:e(u).nf,"onUpdate:modelValue":d[1]||(d[1]=c=>e(u).nf=c),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(S,null,{default:t(()=>[l(v,{field:"wsf",label:"省份-招生数据:"},{default:t(()=>[l(n,{modelValue:e(u).wsf,"onUpdate:modelValue":d[2]||(d[2]=c=>e(u).wsf=c),placeholder:"请输入省份-招生数据","allow-search":"","allow-clear":"",options:[...e(L),...e(M).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(S,null,{default:t(()=>[l(v,{field:"wnf",label:"年份-招生数据:"},{default:t(()=>[l(h,{modelValue:e(u).wnf,"onUpdate:modelValue":d[3]||(d[3]=c=>e(u).wnf=c),modelModifiers:{trim:!0},placeholder:"请输入年份-招生数据"},null,8,["modelValue"])]),_:1})]),_:1}),l(S,null,{default:t(()=>[l(v,{label:"院校名称:"},{default:t(()=>[l(h,{modelValue:e(u).yxmc,"onUpdate:modelValue":d[4]||(d[4]=c=>e(u).yxmc=c),modelModifiers:{trim:!0},placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(S,null,{default:t(()=>[l(v,{label:"科类:"},{default:t(()=>[l(h,{modelValue:e(u).kl,"onUpdate:modelValue":d[5]||(d[5]=c=>e(u).kl=c),modelModifiers:{trim:!0},placeholder:"请输入科类"},null,8,["modelValue"])]),_:1})]),_:1}),l(S,null,{default:t(()=>[l(v,{label:"批次:"},{default:t(()=>[l(h,{modelValue:e(u).pc,"onUpdate:modelValue":d[6]||(d[6]=c=>e(u).pc=c),modelModifiers:{trim:!0},placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),l(S,null,{default:t(()=>[l(v,{label:"招生类型:"},{default:t(()=>[l(h,{modelValue:e(u).zslx,"onUpdate:modelValue":d[7]||(d[7]=c=>e(u).zslx=c),modelModifiers:{trim:!0},placeholder:"请输入招生类型"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:t(()=>[l(Q,null,{default:t(()=>[l($,{type:"outline",onClick:d[8]||(d[8]=U=>e(b)("zsAddSchoolHistoricalData"))},{icon:t(()=>[l(G)]),default:t(()=>[H(" 新增 ")]),_:1}),l($,{type:"outline",status:"danger",disabled:!e(f).selectedKeys.length,loading:e(V)==="删除",onClick:_},{icon:t(()=>[l(J)]),default:t(()=>[H(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:t(()=>[l(X,{"selected-keys":e(f).selectedKeys,"onUpdate:selectedKeys":d[9]||(d[9]=U=>e(f).selectedKeys=U),class:"zs-table","row-key":"id",data:e(C),"row-selection":e(f).rowSelection,bordered:e(f).bordered,pagination:e(f).pagination,size:e(f).size,columns:e(q),stripe:e(f).stripe,loading:e(R)},{operate:t(({record:U})=>[l($,{type:"text",onClick:c=>e(w)(U,()=>e(b)("zsAddSchoolHistoricalData"))},{default:t(()=>[H("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(V)==="zsAddSchoolHistoricalData"?(D(),K(de,{key:0,data:e(z),onSuccess:e(k),onClose:d[10]||(d[10]=U=>e(w)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):E("",!0),e(V)==="zsSummary"?(D(),K(se,{key:1,data:e(z),onSuccess:e(k),onClose:d[11]||(d[11]=U=>e(w)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):E("",!0)])}}});export{ge as default};
