import{d as A,u as J,s as G,C as H,a as Q,E as W,r,o as i,l as p,w as t,g as e,c as o,i as _,h as c,O as X,e as x,j as I,F as D,f as T,V as Y,k as q,t as $,_ as h}from"./index-8a2cb146.js";import{Z as ee}from"./index-2bbe694f.js";import{O as B}from"./order-70291d37.js";const le=["href"],ae={class:"orderSubmit-footer box-flex jc-fe"},te=A({name:"OrderFinanceManageAuditing"}),oe=A({...te,setup(de){const f=J(),C={setMethod:{required:!0,message:"请选择手动方式"},sxf:{required:!0,validator:(u,a)=>{!u&&u!="0"&&a("金额不能为空")}}},{form:l,formRef:V}=G(()=>({})),{jumpTabName:b}=H(),{getDictionaryInfo:R}=Q(),[ue,g]=W(null),N=u=>{V.value.validate(a=>{if(!a){if(u=="settleApplyRejectOfFinance"&&!l.value.applyDesc)return Y.error("请输入审核信息");O(u)}})},O=async u=>{const{err:a}=await q(()=>B[u]({applyDesc:l.value.applyDesc,groupIds:f.query.groupId?f.query.groupId:l.value.groupIds,setMode:l.value.setMode=="manual"?"2":"1",setMethod:l.value.setMode=="manual"?l.value.setMethod:null,sxf:l.value.setMode=="manual"?l.value.sxf:null,chequeNo:l.value.setMode=="manual"&&l.value.setMethod!="3"?l.value.chequeNo:null}),{before:()=>g("adoptLoading"),after:()=>g(""),successMsg:"操作成功"});a||b()};return(async()=>{const{res:u,err:a}=await q(()=>B.getAuditingDetail({groupIdList:f.query.groupId?[f.query.groupId]:JSON.parse(f.query.groupIds)}));if(a)return;const m=Object.entries(u==null?void 0:u.data.invoiceMap).map(([n,s])=>({groupId:n,fileList:s}));l.value={groupIds:u.data.groupIds,allMoney:u.data.allMoney,payUserName:u.data.payUserName,payBankName:u.data.payBankName,payNum:u.data.payNum,...u==null?void 0:u.data.settleRecordApply,costType:"订单费用",setMode:"manual",applyDesc:"",invoiceMap:m,settleType:u.data.settleRecordApply.settleType=="1"?"默认结算":"自定义结算"}})(),(u,a)=>{const m=r("a-input"),n=r("a-form-item"),s=r("a-grid-item"),v=r("a-input-number"),S=r("a-textarea"),M=r("a-radio"),F=r("a-radio-group"),j=r("a-select"),w=r("a-grid"),U=r("a-card"),L=r("a-descriptions-item"),E=r("a-descriptions"),P=r("a-form"),y=r("a-button"),K=r("a-space");return i(),p(ee,null,{default:t(()=>[e(P,{ref_key:"formRef",ref:V,model:o(l),"label-align":"left",size:"large","auto-label-width":"",rules:C},{default:t(()=>[e(U,{title:"结算审核",bordered:!1,class:"general-card"},{default:t(()=>[e(w,{cols:2,"col-gap":24,style:{"margin-top":"40px"}},{default:t(()=>[e(s,null,{default:t(()=>[e(n,{field:"groupIds",label:"结算团号:"},{default:t(()=>[e(m,{modelValue:o(l).groupIds,"onUpdate:modelValue":a[0]||(a[0]=d=>o(l).groupIds=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"supName",label:"供应商:"},{default:t(()=>[e(m,{modelValue:o(l).supName,"onUpdate:modelValue":a[1]||(a[1]=d=>o(l).supName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"receiveUserName",label:"收款账户名称:"},{default:t(()=>[e(m,{modelValue:o(l).receiveUserName,"onUpdate:modelValue":a[2]||(a[2]=d=>o(l).receiveUserName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"payUserName",label:"结算/付款账户名称:"},{default:t(()=>[e(m,{modelValue:o(l).payUserName,"onUpdate:modelValue":a[3]||(a[3]=d=>o(l).payUserName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"receiveBankName",label:"收款开户行:"},{default:t(()=>[e(m,{modelValue:o(l).receiveBankName,"onUpdate:modelValue":a[4]||(a[4]=d=>o(l).receiveBankName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"payBankName",label:"付款/结算开户行:"},{default:t(()=>[e(m,{modelValue:o(l).payBankName,"onUpdate:modelValue":a[5]||(a[5]=d=>o(l).payBankName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"receiveNum",label:"收款账户:"},{default:t(()=>[e(m,{modelValue:o(l).receiveNum,"onUpdate:modelValue":a[6]||(a[6]=d=>o(l).receiveNum=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"payNum",label:"付款/结算账户:"},{default:t(()=>[e(m,{modelValue:o(l).payNum,"onUpdate:modelValue":a[7]||(a[7]=d=>o(l).payNum=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"allMoney",label:"结算金额(元):"},{default:t(()=>[e(v,{modelValue:o(l).allMoney,"onUpdate:modelValue":a[8]||(a[8]=d=>o(l).allMoney=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"costType",label:"费用类型:"},{default:t(()=>[e(m,{modelValue:o(l).costType,"onUpdate:modelValue":a[9]||(a[9]=d=>o(l).costType=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"settleType",label:"结算类型:"},{default:t(()=>[e(m,{modelValue:o(l).settleType,"onUpdate:modelValue":a[10]||(a[10]=d=>o(l).settleType=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"createTime",label:"创建时间:"},{default:t(()=>[e(m,{modelValue:o(l).createTime,"onUpdate:modelValue":a[11]||(a[11]=d=>o(l).createTime=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"applyDesc",label:"审核信息:"},{default:t(()=>[e(S,{modelValue:o(l).applyDesc,"onUpdate:modelValue":a[12]||(a[12]=d=>o(l).applyDesc=d)},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(n,{field:"setMode",label:"结算方式:"},{default:t(()=>[e(F,{modelValue:o(l).setMode,"onUpdate:modelValue":a[13]||(a[13]=d=>o(l).setMode=d)},{default:t(()=>[e(M,{value:"auto"},{default:t(()=>[_("自动")]),_:1}),e(M,{value:"manual"},{default:t(()=>[_("手动")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[o(l).setMode=="manual"?(i(),p(n,{key:0,field:"setMethod",label:"手动方式:"},{default:t(()=>[e(j,{modelValue:o(l).setMethod,"onUpdate:modelValue":a[14]||(a[14]=d=>o(l).setMethod=d),placeholder:"请选择手动方式",options:o(R)("setMethod"),"field-names":{label:"detailName",value:"detailCode"}},null,8,["modelValue","options"])]),_:1})):c("",!0)]),_:1}),e(s,null,{default:t(()=>[o(l).setMode=="manual"?(i(),p(n,{key:0,field:"sxf",label:"手续费:"},{default:t(()=>[e(v,{modelValue:o(l).sxf,"onUpdate:modelValue":a[15]||(a[15]=d=>o(l).sxf=d),formatter:d=>o(X)(d,""),parser:d=>d.replace(/,/g,""),precision:2},null,8,["modelValue","formatter","parser"])]),_:1})):c("",!0)]),_:1}),e(s,null,{default:t(()=>[o(l).setMode=="manual"&&o(l).setMethod!="3"?(i(),p(n,{key:0,field:"chequeNo",label:"支票编号:"},{default:t(()=>[e(m,{modelValue:o(l).chequeNo,"onUpdate:modelValue":a[16]||(a[16]=d=>o(l).chequeNo=d)},null,8,["modelValue"])]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1}),e(U,{title:"发票文件",bordered:!1,class:"general-card margin-top"},{default:t(()=>[(i(!0),x(D,null,I(o(l).invoiceMap,(d,Z)=>(i(),p(E,{column:{xs:1,md:2,lg:4},key:Z},{default:t(()=>[(i(!0),x(D,null,I(d.fileList,(k,z)=>(i(),p(L,{label:d.groupId,key:z},{default:t(()=>[T("a",{href:k.attPath,color:"arcoblue"},$(k.attPath),9,le)]),_:2},1032,["label"]))),128))]),_:2},1024))),128))]),_:1})]),_:1},8,["model"]),T("div",ae,[e(K,null,{default:t(()=>[e(y,{type:"primary",status:"success",onClick:a[17]||(a[17]=()=>N("settleApplySuccessOfFinance"))},{default:t(()=>[_("通过")]),_:1}),e(y,{type:"primary",status:"danger",onClick:a[18]||(a[18]=()=>N("settleApplyRejectOfFinance"))},{default:t(()=>[_("驳回")]),_:1}),e(y,{onClick:a[19]||(a[19]=()=>o(b)())},{default:t(()=>[_("返回")]),_:1})]),_:1})])]),_:1})}}});const ie=h(oe,[["__scopeId","data-v-69d97524"]]);export{ie as default};
