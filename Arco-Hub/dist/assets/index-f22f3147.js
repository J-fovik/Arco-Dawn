import{a as Z,n as r,d as x,E as I,r as s,o as m,l as b,w as a,g as o,i as y,t as q,c as e,q as F,s as O,v as M,x as G,y as H,e as J,z as D,h as T,k as Q}from"./index-8a2cb146.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{S as X}from"./supplier-c338fe4b.js";import"./index-2bbe694f.js";const Y=()=>{const{getDictionaryItem:u}=Z();return[{title:"编号",dataIndex:"id",show:!0,align:"center",render:({record:t})=>r(t.id)},{title:"线路名称",dataIndex:"routeName",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:t})=>r(t.routeName)},{title:"地区",dataIndex:"areaName",show:!0,align:"center",render:({record:t})=>r(t.areaName)},{title:"旅行分类",dataIndex:"travelType",show:!0,align:"center",render:({record:t})=>r(u("travelType",t.travelType).detailName)},{title:"成团类别",dataIndex:"groupType",show:!0,align:"center",render:({record:t})=>r(u("new_group_type",t.groupType).detailName)},{title:"天数",dataIndex:"travelDays",show:!0,align:"center",render:({record:t})=>r(t.travelDays)},{title:"供应商名称",dataIndex:"supName",show:!0,align:"center",render:({record:t})=>r(t.supName)},{title:"状态",dataIndex:"status",show:!0,align:"center",render:({record:t})=>r(u("traveState",t.state).detailName)},{title:"调价状态",dataIndex:"adjustState",show:!0,align:"center",render:({record:t})=>r(u("travelRoutePriceModifyState",t.adjustState).detailName)},{title:"出团日期开始",dataIndex:"startDate",show:!0,align:"center",render:({record:t})=>r(t.startDate)},{title:"出团日期截止",dataIndex:"endDate",show:!0,align:"center",render:({record:t})=>r(t.endDate)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}]},ee=x({name:"ZsExamineTourism"}),te=x({...ee,props:{data:{default:()=>({})}},emits:["close","success"],setup(u,{emit:t}){const[S,w]=I(""),d=t;return(h,p)=>{const _=s("a-tag"),g=s("a-descriptions-item"),n=s("a-descriptions"),f=s("a-modal");return m(),b(f,{top:"10%",width:"500px",title:"审核结果","unmount-on-close":"",visible:"","align-center":!1,"mask-closable":!1,"ok-loading":e(S)==="okLoading",footer:!1,onCancel:p[0]||(p[0]=C=>d("close"))},{default:a(()=>[o(n,{column:1,size:"large"},{default:a(()=>[o(g,{label:"审核状态:"},{default:a(()=>[o(_,{color:"red"},{default:a(()=>[y("已驳回")]),_:1})]),_:1}),o(g,{label:"驳回原因:"},{default:a(()=>[o(_,null,{default:a(()=>[y(q(h.data.examine),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["ok-loading"])}}}),ae=x({name:"LineAdjustmentTourism"}),le=x({...ae,setup(u){const{vAuthority:t}=F(),[S,w]=I(null),{form:d,resetForm:h}=O(()=>({routeName:""}),()=>f()),{selectRow:p,columnsData:_,visibleColumnsData:g,tableBaseOptions:n,resetData:f,extendTableList:C,setSelectRow:N,changeTableColumn:z,changeTableSize:A}=M(Y(),()=>v()),{data:R,loading:j,initData:v}=G(async()=>{const{res:c,err:i}=await Q(()=>X.getSupplierApplicationPriceList({...d.value,currentPage:n.pagination.current,pageSize:n.pagination.pageSize,pagingOrNot:"1"}));return i?[]:(n.pagination.total=c.data.totalCount,C(c==null?void 0:c.data.travelRouteList))});return H(v),(c,i)=>{const $=s("a-input"),L=s("a-form-item"),K=s("a-grid-item"),P=s("a-grid"),E=s("a-form"),k=s("a-button"),V=s("a-button-group"),B=s("a-table");return m(),J("div",null,[o(W,{"table-columns":e(_),"table-size":e(n).size,onResetSearch:e(h),onSearch:e(f),onChangeTableSize:e(A),onChangeTableColumn:e(z)},{form:a(()=>[o(E,{model:e(d),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[o(P,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:a(()=>[o(K,null,{default:a(()=>[o(L,{label:"线路:"},{default:a(()=>[o($,{modelValue:e(d).routeName,"onUpdate:modelValue":i[0]||(i[0]=l=>e(d).routeName=l),placeholder:"请输入线路"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),table:a(()=>[o(B,{"selected-keys":e(n).selectedKeys,"onUpdate:selectedKeys":i[1]||(i[1]=l=>e(n).selectedKeys=l),class:"zs-table","row-key":"id",data:e(R),"row-selection":e(n).rowSelection,bordered:e(n).bordered,pagination:e(n).pagination,size:e(n).size,columns:e(g),stripe:e(n).stripe,loading:e(j)},{operate:a(({record:l})=>[o(V,null,{default:a(()=>[l.state==="1"&&["1","4"].includes(l.adjustState)?D((m(),b(k,{key:0,type:"text",status:"success",onClick:U=>c.$router.push(`/line/adjustmentTourism/operate?id=${l.id}`)},{default:a(()=>[y("调价")]),_:2},1032,["onClick"])),[[e(t),"LineAdjustmentTourismTransferPrice"]]):T("",!0),l.adjustState==="4"?D((m(),b(k,{key:1,type:"text",onClick:U=>e(N)(l,()=>e(w)("ZsExamineTourism"))},{default:a(()=>[y("驳回原因")]),_:2},1032,["onClick"])),[[e(t),"LineAdjustmentTourismRejectReason"]]):T("",!0)]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(S)==="ZsExamineTourism"?(m(),b(te,{key:0,data:e(p),onClose:i[2]||(i[2]=l=>e(N)({},()=>e(w)(""))),onSuccess:e(v)},null,8,["data","onSuccess"])):T("",!0)])}}});export{le as default};
