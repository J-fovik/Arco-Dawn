import{d as S,h as $,g as N,i as O,r as o,o as M,l as j,w as l,a as t,b as e,m as R,S as D,n as G,j as J,c as Q,e as U,p as W,q as X}from"./index-d007178a.js";import{A as Y}from"./options-aafac76d.js";import{f as h,c as ee,_ as te}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import"./index-13860ba0.js";const le=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:i})=>h(i.yxmc)},{title:"专业名称",dataIndex:"zymc",show:!0,align:"center",render:({record:i})=>h(i.zymc)},{title:"学制",dataIndex:"xz",show:!0,align:"center",render:({record:i})=>h(i.xz)},{title:"层次",dataIndex:"level",show:!0,align:"center",render:({record:i})=>h(i.level)},{title:"特色",dataIndex:"tese",show:!0,align:"center",render:({record:i})=>h(i.tese)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ae=S({name:"ZsAddMajorCharacteristic"}),oe=S({...ae,props:{data:{default:()=>({})}},emits:["close","success"],setup(i,{emit:g}){const m=i,[b,V]=$(null),u=N(),{form:d,formRef:v}=O(()=>({...m.data})),T={yxId:{required:!0,message:"请选择院校信息"}},k=()=>{v.value.validate(p=>{p||(m.data.id?n("editSchoolTese"):n("addSchoolTese"))})},n=async p=>{const{err:s}=await R(()=>D[p](d.value),{before:()=>V("okLoading"),after:()=>V(null)});s||(g("success"),g("close"))};return(p,s)=>{const w=o("a-select"),_=o("a-form-item"),f=o("a-grid-item"),y=o("a-input"),I=o("a-textarea"),K=o("a-grid"),x=o("a-form"),c=o("a-modal");return M(),j(c,{title:e(ee)("专业特色",!!m.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"500px","align-center":!1,"mask-closable":!1,"ok-loading":e(b)==="okLoading",onCancel:s[5]||(s[5]=a=>g("close")),onOk:k},{default:l(()=>[t(x,{ref_key:"formRef",ref:v,model:e(d),"label-align":"left",size:"large","auto-label-width":"",rules:T},{default:l(()=>[t(K,{cols:1,"col-gap":24},{default:l(()=>[t(f,null,{default:l(()=>[t(_,{field:"yxId",label:"院校信息:"},{default:l(()=>[t(w,{modelValue:e(d).yxId,"onUpdate:modelValue":s[0]||(s[0]=a=>e(d).yxId=a),options:e(u).schoolList,"virtual-list-props":{height:200},disabled:!!m.data.id,"allow-search":"","allow-clear":"",placeholder:"请选择院校信息"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(_,{field:"zymc",label:"专业名称:"},{default:l(()=>[t(y,{modelValue:e(d).zymc,"onUpdate:modelValue":s[1]||(s[1]=a=>e(d).zymc=a),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(_,{field:"xz",label:"学制:"},{default:l(()=>[t(y,{modelValue:e(d).xz,"onUpdate:modelValue":s[2]||(s[2]=a=>e(d).xz=a),placeholder:"请输入学制"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(_,{field:"level",label:"层次:"},{default:l(()=>[t(y,{modelValue:e(d).level,"onUpdate:modelValue":s[3]||(s[3]=a=>e(d).level=a),placeholder:"请输入层次"},null,8,["modelValue"])]),_:1})]),_:1}),t(f,null,{default:l(()=>[t(_,{field:"tese",label:"特色:"},{default:l(()=>[t(I,{modelValue:e(d).tese,"onUpdate:modelValue":s[4]||(s[4]=a=>e(d).tese=a),placeholder:"请输入特色"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),ne=S({name:"SchoolMajorCharacteristic"}),ce=S({...ne,setup(i){const{warningModal:g}=X(),[m,b]=$(null),V=N(),{form:u,resetForm:d}=O(()=>({yxId:"",zymc:"",tese:"",level:""}),()=>p()),{selectRow:v,columnsData:T,visibleColumnsData:k,tableBaseOptions:n,resetData:p,extendTableList:s,setSelectRow:w,changeTableColumn:_,changeTableSize:f}=G(le(),()=>x()),y=()=>{g(`确定删除选中的${n.selectedKeys.length}数据吗？`,async c=>{const{err:a}=await R(()=>D.deleteSchoolTese({ids:n.selectedKeys}),{successMsg:"操作成功"});a||(c(!0),n.selectedKeys=[],x())})},{data:I,loading:K,initData:x}=J(async()=>{const{res:c,err:a}=await R(()=>D.getSchoolTeseList({...u.value,currentPage:n.pagination.current,pageSize:n.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(n.pagination.total=c.data.totalCount,s(c==null?void 0:c.data.resultList))});return(c,a)=>{const B=o("a-select"),z=o("a-form-item"),C=o("a-grid-item"),A=o("a-input"),P=o("a-grid"),Z=o("a-form"),q=o("icon-plus"),L=o("a-button"),F=o("icon-close"),E=o("a-space"),H=o("a-table");return M(),Q("div",null,[t(te,{"table-columns":e(T),"table-size":e(n).size,onResetSearch:e(d),onSearch:e(p),onChangeTableSize:e(f),onChangeTableColumn:e(_)},{form:l(()=>[t(Z,{model:e(u),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[t(P,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:l(()=>[t(C,null,{default:l(()=>[t(z,{label:"院校名称:"},{default:l(()=>[t(B,{modelValue:e(u).yxId,"onUpdate:modelValue":a[0]||(a[0]=r=>e(u).yxId=r),"virtual-list-props":{height:200},"allow-search":"","allow-clear":"",options:[...e(Y),...e(V).schoolList],placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(C,null,{default:l(()=>[t(z,{label:"专业名称:"},{default:l(()=>[t(A,{modelValue:e(u).zymc,"onUpdate:modelValue":a[1]||(a[1]=r=>e(u).zymc=r),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(C,null,{default:l(()=>[t(z,{field:"level",label:"层次:"},{default:l(()=>[t(A,{modelValue:e(u).level,"onUpdate:modelValue":a[2]||(a[2]=r=>e(u).level=r),placeholder:"请输入层次"},null,8,["modelValue"])]),_:1})]),_:1}),t(C,null,{default:l(()=>[t(z,{field:"tese",label:"特色:"},{default:l(()=>[t(A,{modelValue:e(u).tese,"onUpdate:modelValue":a[3]||(a[3]=r=>e(u).tese=r),placeholder:"请输入特色"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:l(()=>[t(E,null,{default:l(()=>[t(L,{type:"outline",onClick:a[4]||(a[4]=r=>e(b)("ZsAddMajorCharacteristic"))},{icon:l(()=>[t(q)]),default:l(()=>[U(" 新增 ")]),_:1}),t(L,{type:"outline",status:"danger",disabled:!e(n).selectedKeys.length,loading:e(m)==="删除",onClick:y},{icon:l(()=>[t(F)]),default:l(()=>[U(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:l(()=>[t(H,{"selected-keys":e(n).selectedKeys,"onUpdate:selectedKeys":a[5]||(a[5]=r=>e(n).selectedKeys=r),class:"zs-table","row-key":"id",data:e(I),"row-selection":e(n).rowSelection,bordered:e(n).bordered,pagination:e(n).pagination,size:e(n).size,columns:e(k),stripe:e(n).stripe,loading:e(K)},{operate:l(({record:r})=>[t(L,{type:"text",onClick:se=>e(w)(r,()=>e(b)("ZsAddMajorCharacteristic"))},{default:l(()=>[U("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(m)==="ZsAddMajorCharacteristic"?(M(),j(oe,{key:0,data:e(v),onSuccess:e(x),onClose:a[6]||(a[6]=r=>e(w)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):W("",!0)])}}});export{ce as default};
