import{d as N,h as F,i as $,r as d,o as P,l as M,w as l,a,b as e,m as A,n as Y,k as G,j as H,c as J,p as W}from"./index-d007178a.js";import{f as B,A as I}from"./options-aafac76d.js";import{f as _,t as X,a as Z,c as ee,_ as ae}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{V as L}from"./vip-3bf0329d.js";import"./index-13860ba0.js";const O=[{label:"微信",value:"0"}],q=[{label:"预登记",value:"00"},{label:"成功",value:"01"},{label:"失败",value:"02"},{label:"结算中",value:"03"},{label:"超时",value:"99"}],te=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"支付订单号",dataIndex:"tradeNo",show:!0,align:"center",render:({record:n})=>_(n.tradeNo)},{title:"交易时间",dataIndex:"transTime",show:!0,align:"center",render:({record:n})=>_(n.transTime)},{title:"交易金额",dataIndex:"amount",show:!0,align:"right",render:({record:n})=>X(Z(n.amount))},{title:"用户昵称",dataIndex:"nickName",show:!0,align:"center",render:({record:n})=>_(n.nickName)},{title:"用户手机号",dataIndex:"phoneNumber",show:!0,align:"center",render:({record:n})=>_(n.phoneNumber)},{title:"支付类型",dataIndex:"channel",show:!0,align:"center",render:({record:n})=>{var i;return _((i=B(O,n.channel))==null?void 0:i.label)}},{title:"交易类型",dataIndex:"transType",show:!0,align:"center",render:({record:n})=>_(n.transType)},{title:"交易状态",dataIndex:"status",show:!0,align:"center",render:({record:n})=>{var i;return _((i=B(q,n.status))==null?void 0:i.label)}}],le=N({name:"zsAddAgent"}),ne=N({...le,props:{data:{default:()=>({})}},emits:["close","success"],setup(n,{emit:i}){const b=n,[o,y]=F(null),{form:c,formRef:w}=$(()=>({...b.data})),k={cardType:{required:!0,message:"请选择商品类型"},sellingPrice:{required:!0,message:"请输入价格"}},r=()=>{w.value.validate(g=>{g||(b.data.id?V("editPrice"):V("addPrice"))})},V=async g=>{const{err:u}=await A(()=>L[g](c.value),{before:()=>y("okLoading"),after:()=>y(null)});u||(i("success"),i("close"))};return(g,u)=>{const S=d("a-select"),v=d("a-form-item"),h=d("a-input-number"),U=d("a-form"),C=d("a-modal");return P(),M(C,{top:"10%",width:"500px",title:e(ee)("价格",!!b.data.id),"unmount-on-close":"",visible:"","align-center":!1,"mask-closable":!1,"ok-loading":e(o)==="okLoading",onCancel:u[2]||(u[2]=T=>i("close")),onOk:r},{default:l(()=>[a(U,{ref_key:"formRef",ref:w,model:e(c),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:l(()=>[a(v,{field:"cardType",label:"商品类型:"},{default:l(()=>[a(S,{disabled:!!b.data.id,modelValue:e(c).cardType,"onUpdate:modelValue":u[0]||(u[0]=T=>e(c).cardType=T),options:[...e(O)],placeholder:"请选择商品类型"},null,8,["disabled","modelValue","options"])]),_:1}),a(v,{field:"sellingPrice",label:"价格:"},{default:l(()=>[a(h,{modelValue:e(c).sellingPrice,"onUpdate:modelValue":u[1]||(u[1]=T=>e(c).sellingPrice=T),placeholder:"请输入价格"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),oe=N({name:"VipAgentManage"}),me=N({...oe,setup(n){const[i,b]=F(null),{form:o,resetForm:y}=$(()=>({beginTime:"",endTime:"",nickName:"",phoneNumber:"",transNo:"",channel:"",transType:"",status:""}),()=>V()),{selectRow:c,columnsData:w,visibleColumnsData:k,tableBaseOptions:r,resetData:V,extendTableList:g,setSelectRow:u,changeTableColumn:S,changeTableSize:v}=Y(te(),()=>D()),h=G([]);(async()=>{const{res:m,err:t}=await A(()=>L.getQueryTypeList({}));if(t)return[];h.value=m==null?void 0:m.data})();const{data:C,loading:T,initData:D}=H(async()=>{const{res:m,err:t}=await A(()=>L.transactionVipCard({...o.value,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return t?[]:(r.pagination.total=m.data.totalCount,g(m==null?void 0:m.data.list))});return(m,t)=>{const K=d("a-date-picker"),p=d("a-form-item"),f=d("a-grid-item"),R=d("a-input"),z=d("a-select"),Q=d("a-grid"),E=d("a-form"),j=d("a-table");return P(),J("div",null,[a(ae,{fold:"","table-columns":e(w),"table-size":e(r).size,onResetSearch:e(y),onSearch:e(V),onChangeTableSize:e(v),onChangeTableColumn:e(S)},{form:l(({collapsed:x})=>[a(E,{model:e(o),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[a(Q,{cols:{md:3,lg:3,xl:3,xxl:3},"col-gap":12,collapsed:!x},{default:l(()=>[a(f,null,{default:l(()=>[a(p,{label:"交易时间(开始):"},{default:l(()=>[a(K,{class:"flex1",modelValue:e(o).beginTime,"onUpdate:modelValue":t[0]||(t[0]=s=>e(o).beginTime=s),placeholder:"请选择开始时间"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(p,{label:"交易时间(结束):"},{default:l(()=>[a(K,{class:"flex1",modelValue:e(o).endTime,"onUpdate:modelValue":t[1]||(t[1]=s=>e(o).endTime=s),placeholder:"请选择结束时间"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(p,{label:"用户手机号:"},{default:l(()=>[a(R,{modelValue:e(o).phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=s=>e(o).phoneNumber=s),modelModifiers:{trim:!0},placeholder:"请输入用户手机号"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(p,{label:"支付订单号:"},{default:l(()=>[a(R,{modelValue:e(o).transNo,"onUpdate:modelValue":t[3]||(t[3]=s=>e(o).transNo=s),modelModifiers:{trim:!0},placeholder:"请输入支付订单号"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(p,{label:"支付类型:"},{default:l(()=>[a(z,{modelValue:e(o).channel,"onUpdate:modelValue":t[4]||(t[4]=s=>e(o).channel=s),options:[...e(I),...e(O)],"allow-clear":""},null,8,["modelValue","options"])]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(p,{label:"交易类型:"},{default:l(()=>[a(z,{modelValue:e(o).transType,"onUpdate:modelValue":t[5]||(t[5]=s=>e(o).transType=s),options:[...e(I),...h.value],"allow-clear":""},null,8,["modelValue","options"])]),_:1})]),_:1}),a(f,null,{default:l(()=>[a(p,{label:"交易状态:"},{default:l(()=>[a(z,{modelValue:e(o).status,"onUpdate:modelValue":t[6]||(t[6]=s=>e(o).status=s),options:[...e(I),...e(q)],"allow-clear":""},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),table:l(()=>[a(j,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":t[7]||(t[7]=x=>e(r).selectedKeys=x),class:"zs-table","row-key":"id",data:e(C),"row-selection":e(r).rowSelection,bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(k),stripe:e(r).stripe,loading:e(T)},null,8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(i)==="zsAddPrice"?(P(),M(ne,{key:0,data:e(c),onSuccess:e(D),onClose:t[8]||(t[8]=x=>e(u)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):W("",!0)])}}});export{me as default};
