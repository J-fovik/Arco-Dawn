import{d as R,g as E,h as $,i as F,r as i,o as D,l as B,w as a,a as e,b as l,m as j,n as Z,j as ee,c as le,e as P,p as ae,q as oe}from"./index-d007178a.js";import{f as _,c as te,_ as de}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as L}from"./options-aafac76d.js";import{R as S}from"./recruit-3c2f52ae.js";import"./index-13860ba0.js";const ne=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,tooltip:!0,ellipsis:!0,align:"center"},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:m})=>_(m.sf)},{title:"年份",dataIndex:"nf",show:!0,align:"center",render:({record:m})=>_(m.nf)},{title:"批次",dataIndex:"pc",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:m})=>_(m.pc)},{title:"院校名称",dataIndex:"yxmc",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:m})=>_(m.yxmc)},{title:"专业名称",dataIndex:"zymc",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:m})=>_(m.zymc)},{title:"科类",dataIndex:"kl",show:!0,align:"center",render:({record:m})=>_(m.kl)},{title:"学制",dataIndex:"xz",tooltip:!0,ellipsis:!0,show:!0,align:"center",render:({record:m})=>_(m.xz)},{title:"录取人数",dataIndex:"lqrs",show:!0,align:"right",render:({record:m})=>_(m.lqrs)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ue=[{label:"是",value:"Y"},{label:"否",value:"N"}],re=R({name:"zsAddProfessionalEnPlan"}),ie=R({...re,props:{data:{default:()=>({})}},emits:["close","success"],setup(m,{emit:w}){const b=m,U=E(),[q,s]=$(null),{form:d,formRef:k}=F(()=>({...b.data})),O={nf:{required:!0,message:"请输入年份"},sf:{required:!0,message:"请输入省份"},pc:{required:!0,message:"请输入批次"},kl:{required:!0,message:"请输入科类"},yxmc:{required:!0,message:"请输入院校名称"},zymc:{required:!0,message:"请输入专业名称"},lqrs:{required:!0,message:"请输入录取人数"}},K=()=>{k.value.validate(g=>{g||(b.data.id?f("editProfessionPlan"):f("addProfessionPlan"))})},f=async g=>{const{err:t}=await j(()=>S[g](d.value),{before:()=>s("okLoading"),after:()=>s(null)});t||(w("success"),w("close"))};return(g,t)=>{const r=i("a-input"),n=i("a-form-item"),u=i("a-grid-item"),I=i("a-select"),T=i("a-input-number"),C=i("a-textarea"),z=i("a-grid"),A=i("a-form"),c=i("a-modal");return D(),B(c,{title:l(te)("专业招生计划",!!b.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"60vw","align-center":!1,"mask-closable":!1,"ok-loading":l(q)==="okLoading",onCancel:t[31]||(t[31]=o=>w("close")),onOk:K},{default:a(()=>[e(A,{ref_key:"formRef",ref:k,model:l(d),"label-align":"left",size:"large","auto-label-width":"",rules:O},{default:a(()=>[e(z,{cols:2,"col-gap":24},{default:a(()=>[e(u,null,{default:a(()=>[e(n,{field:"nf",label:"年份:"},{default:a(()=>[e(r,{modelValue:l(d).nf,"onUpdate:modelValue":t[0]||(t[0]=o=>l(d).nf=o),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"lqrs",label:"录取人数:"},{default:a(()=>[e(r,{modelValue:l(d).lqrs,"onUpdate:modelValue":t[1]||(t[1]=o=>l(d).lqrs=o),modelModifiers:{trim:!0},placeholder:"请输入录取人数"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"sf",label:"省份:"},{default:a(()=>[e(I,{modelValue:l(d).sf,"onUpdate:modelValue":t[2]||(t[2]=o=>l(d).sf=o),modelModifiers:{trim:!0},placeholder:"请输入省份","allow-search":"",options:[...l(L),...l(U).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"pc",label:"批次:"},{default:a(()=>[e(r,{modelValue:l(d).pc,"onUpdate:modelValue":t[3]||(t[3]=o=>l(d).pc=o),modelModifiers:{trim:!0},placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"yxmc",label:"院校名称:"},{default:a(()=>[e(r,{modelValue:l(d).yxmc,"onUpdate:modelValue":t[4]||(t[4]=o=>l(d).yxmc=o),modelModifiers:{trim:!0},placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"zymc",label:"专业名称:"},{default:a(()=>[e(r,{modelValue:l(d).zymc,"onUpdate:modelValue":t[5]||(t[5]=o=>l(d).zymc=o),modelModifiers:{trim:!0},placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"kl",label:"科类:"},{default:a(()=>[e(r,{modelValue:l(d).kl,"onUpdate:modelValue":t[6]||(t[6]=o=>l(d).kl=o),modelModifiers:{trim:!0},placeholder:"请输入科类"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"yxdm",label:"院校代码:"},{default:a(()=>[e(r,{modelValue:l(d).yxdm,"onUpdate:modelValue":t[7]||(t[7]=o=>l(d).yxdm=o),modelModifiers:{trim:!0},placeholder:"请输入院校代码"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"zyz",label:"专业组:"},{default:a(()=>[e(r,{modelValue:l(d).zyz,"onUpdate:modelValue":t[8]||(t[8]=o=>l(d).zyz=o),modelModifiers:{trim:!0},placeholder:"请输入专业组"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"zydm",label:"专业代码:"},{default:a(()=>[e(r,{modelValue:l(d).zydm,"onUpdate:modelValue":t[9]||(t[9]=o=>l(d).zydm=o),modelModifiers:{trim:!0},placeholder:"请输入专业代码"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"xk",label:"首选要求:"},{default:a(()=>[e(r,{modelValue:l(d).xk,"onUpdate:modelValue":t[10]||(t[10]=o=>l(d).xk=o),modelModifiers:{trim:!0},placeholder:"请输入首选要求"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"zx",label:"再选科目:"},{default:a(()=>[e(r,{modelValue:l(d).zx,"onUpdate:modelValue":t[11]||(t[11]=o=>l(d).zx=o),modelModifiers:{trim:!0},placeholder:"请输入再选科目"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"zymcOrg",label:"初始专业名称:"},{default:a(()=>[e(r,{modelValue:l(d).zymcOrg,"onUpdate:modelValue":t[12]||(t[12]=o=>l(d).zymcOrg=o),modelModifiers:{trim:!0},placeholder:"请输入初始专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"xkCombine",label:"选科编码集:"},{default:a(()=>[e(r,{modelValue:l(d).xkCombine,"onUpdate:modelValue":t[13]||(t[13]=o=>l(d).xkCombine=o),modelModifiers:{trim:!0},placeholder:"请输入选科编码集"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{label:"是否首招:"},{default:a(()=>[e(I,{modelValue:l(d).isNew,"onUpdate:modelValue":t[14]||(t[14]=o=>l(d).isNew=o),modelModifiers:{trim:!0},placeholder:"请选择是否首招","allow-clear":"",options:[...l(L),...l(ue)]},null,8,["modelValue","options"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"yc",label:"位次预测:"},{default:a(()=>[e(T,{modelValue:l(d).yc,"onUpdate:modelValue":t[15]||(t[15]=o=>l(d).yc=o),modelModifiers:{trim:!0},placeholder:"请输入位次预测"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"xkml",label:"学科门类:"},{default:a(()=>[e(r,{modelValue:l(d).xkml,"onUpdate:modelValue":t[16]||(t[16]=o=>l(d).xkml=o),modelModifiers:{trim:!0},placeholder:"请输入学科门类"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"zyl",label:"专业类:"},{default:a(()=>[e(r,{modelValue:l(d).zyl,"onUpdate:modelValue":t[17]||(t[17]=o=>l(d).zyl=o),modelModifiers:{trim:!0},placeholder:"请输入专业类"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"cc",label:"层次/学历类别:"},{default:a(()=>[e(r,{modelValue:l(d).cc,"onUpdate:modelValue":t[18]||(t[18]=o=>l(d).cc=o),modelModifiers:{trim:!0},placeholder:"请输入层次/学历类别"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"xz",label:"学制:"},{default:a(()=>[e(r,{modelValue:l(d).xz,"onUpdate:modelValue":t[19]||(t[19]=o=>l(d).xz=o),modelModifiers:{trim:!0},placeholder:"请输入学制"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"xf",label:"学费:"},{default:a(()=>[e(T,{modelValue:l(d).xf,"onUpdate:modelValue":t[20]||(t[20]=o=>l(d).xf=o),modelModifiers:{trim:!0},placeholder:"请输入学费"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"zslx",label:"招生类型:"},{default:a(()=>[e(r,{modelValue:l(d).zslx,"onUpdate:modelValue":t[21]||(t[21]=o=>l(d).zslx=o),modelModifiers:{trim:!0},placeholder:"请输入招生类型"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"planMajorIdOne",label:"最新1年的招生计划id:"},{default:a(()=>[e(r,{modelValue:l(d).planMajorIdOne,"onUpdate:modelValue":t[22]||(t[22]=o=>l(d).planMajorIdOne=o),modelModifiers:{trim:!0},placeholder:"请输入最新1年的招生计划id"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"planMajorIdTwo",label:"最新2年的招生计划id:"},{default:a(()=>[e(r,{modelValue:l(d).planMajorIdTwo,"onUpdate:modelValue":t[23]||(t[23]=o=>l(d).planMajorIdTwo=o),modelModifiers:{trim:!0},placeholder:"请输入最新2年的招生计划id"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"planMajorIdThree",label:"最新3年的招生计划id:"},{default:a(()=>[e(r,{modelValue:l(d).planMajorIdThree,"onUpdate:modelValue":t[24]||(t[24]=o=>l(d).planMajorIdThree=o),modelModifiers:{trim:!0},placeholder:"请输入最新3年的招生计划id"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"dataMajorIdOne",label:"最新1年的招生分数id:"},{default:a(()=>[e(r,{modelValue:l(d).dataMajorIdOne,"onUpdate:modelValue":t[25]||(t[25]=o=>l(d).dataMajorIdOne=o),modelModifiers:{trim:!0},placeholder:"请输入最新1年的招生分数id"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"dataMajorIdTwo",label:"最新2年的招生分数id:"},{default:a(()=>[e(r,{modelValue:l(d).dataMajorIdTwo,"onUpdate:modelValue":t[26]||(t[26]=o=>l(d).dataMajorIdTwo=o),modelModifiers:{trim:!0},placeholder:"请输入最新2年的招生分数id"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"dataMajorIdThree",label:"最新3年的招生分数id:"},{default:a(()=>[e(r,{modelValue:l(d).dataMajorIdThree,"onUpdate:modelValue":t[27]||(t[27]=o=>l(d).dataMajorIdThree=o),modelModifiers:{trim:!0},placeholder:"请输入最新3年的招生分数id"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:a(()=>[e(n,{field:"dataMajorIdFour",label:"最新4年的招生分数id:"},{default:a(()=>[e(r,{modelValue:l(d).dataMajorIdFour,"onUpdate:modelValue":t[28]||(t[28]=o=>l(d).dataMajorIdFour=o),modelModifiers:{trim:!0},placeholder:"请输入最新4年的招生分数id"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(n,{field:"yxbz",label:"院校备注:"},{default:a(()=>[e(C,{modelValue:l(d).yxbz,"onUpdate:modelValue":t[29]||(t[29]=o=>l(d).yxbz=o),modelModifiers:{trim:!0},"auto-size":{minRows:4},placeholder:"请输入院校备注"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:a(()=>[e(n,{field:"zybz",label:"专业备注:"},{default:a(()=>[e(C,{modelValue:l(d).zybz,"onUpdate:modelValue":t[30]||(t[30]=o=>l(d).zybz=o),modelModifiers:{trim:!0},"auto-size":{minRows:4},placeholder:"请输入专业备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),se=R({name:"RecruitProfessionalEnrollmentPlan"}),_e=R({...se,setup(m){const{warningModal:w}=oe(),[b,U]=$(null),q=E(),{form:s,resetForm:d}=F(()=>({sf:"",nf:"",yxmc:"",zymc:"",xz:"",pc:"",kl:""}),()=>g()),{selectRow:k,columnsData:O,visibleColumnsData:K,tableBaseOptions:f,resetData:g,extendTableList:t,setSelectRow:r,changeTableColumn:n,changeTableSize:u}=Z(ne(),()=>z()),I=()=>{w(`确定删除选中的${f.selectedKeys.length}数据吗？`,async c=>{const{err:o}=await j(()=>S.deleteProfessionPlan({ids:f.selectedKeys}),{successMsg:"操作成功"});o||(c(!0),f.selectedKeys=[],z())})},{data:T,loading:C,initData:z}=ee(async()=>{const{res:c,err:o}=await j(()=>S.getProfessionPlanList({...s.value,currentPage:f.pagination.current,pageSize:f.pagination.pageSize,pagingOrNot:"1"}));if(o)return[];f.pagination.total=c.data.totalCount;const N=c==null?void 0:c.data.resultList.map(V=>(V.nf!==void 0&&V.nf!==null&&(V.nf=String(V.nf)),V));return t(N)}),A=async c=>{const{err:o}=await j(()=>S.daoruProfessionPlan({path:c.at(-1).file}),{successMsg:"导入成功"});o||z()};return(c,o)=>{const N=i("a-select"),V=i("a-form-item"),x=i("a-grid-item"),M=i("a-input"),h=i("a-grid"),W=i("a-form"),Y=i("icon-plus"),v=i("a-button"),G=i("icon-close"),H=i("icon-upload"),J=i("a-upload"),Q=i("a-space"),X=i("a-table");return D(),le("div",null,[e(de,{fold:"","table-columns":l(O),"table-size":l(f).size,onResetSearch:l(d),onSearch:l(g),onChangeTableSize:l(u),onChangeTableColumn:l(n)},{form:a(({collapsed:y})=>[e(W,{model:l(s),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[e(h,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!y},{default:a(()=>[e(x,null,{default:a(()=>[e(V,{field:"sf",label:"省份:"},{default:a(()=>[e(N,{modelValue:l(s).sf,"onUpdate:modelValue":o[0]||(o[0]=p=>l(s).sf=p),placeholder:"请输入省份","allow-search":"",options:[...l(L),...l(q).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(V,{label:"年份:"},{default:a(()=>[e(M,{modelValue:l(s).nf,"onUpdate:modelValue":o[1]||(o[1]=p=>l(s).nf=p),placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{field:"yxmc",label:"院校名称:"},{default:a(()=>[e(V,{field:"yxmc",label:"院校名称:"},{default:a(()=>[e(M,{modelValue:l(s).yxmc,"onUpdate:modelValue":o[2]||(o[2]=p=>l(s).yxmc=p),placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(V,{label:"专业名称:"},{default:a(()=>[e(M,{modelValue:l(s).zymc,"onUpdate:modelValue":o[3]||(o[3]=p=>l(s).zymc=p),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(V,{field:"xz",label:"学制:"},{default:a(()=>[e(M,{modelValue:l(s).xz,"onUpdate:modelValue":o[4]||(o[4]=p=>l(s).xz=p),placeholder:"请输入学制"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(V,{field:"kl",label:"科类:"},{default:a(()=>[e(M,{modelValue:l(s).kl,"onUpdate:modelValue":o[5]||(o[5]=p=>l(s).kl=p),placeholder:"请输入科类"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(V,{field:"pc",label:"批次:"},{default:a(()=>[e(M,{modelValue:l(s).pc,"onUpdate:modelValue":o[6]||(o[6]=p=>l(s).pc=p),placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:a(()=>[e(Q,null,{default:a(()=>[e(v,{type:"outline",onClick:o[7]||(o[7]=y=>l(U)("zsAddProfessionalEnPlan"))},{icon:a(()=>[e(Y)]),default:a(()=>[P(" 新增 ")]),_:1}),e(v,{type:"outline",status:"danger",disabled:!l(f).selectedKeys.length,loading:l(b)==="删除",onClick:I},{icon:a(()=>[e(G)]),default:a(()=>[P(" 删除 ")]),_:1},8,["disabled","loading"]),e(J,{"list-type":"text","auto-upload":!1,"show-cancel-button":!1,"show-link":!1,"show-file-list":!1,accept:".xlsx,.xls",onChange:A},{"upload-button":a(()=>[e(v,{type:"outline",loading:l(b)==="批量上传",status:"warning"},{icon:a(()=>[e(H)]),default:a(()=>[P(" 批量上传 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),table:a(()=>[e(X,{"selected-keys":l(f).selectedKeys,"onUpdate:selectedKeys":o[8]||(o[8]=y=>l(f).selectedKeys=y),class:"zs-table","row-key":"id",data:l(T),"row-selection":l(f).rowSelection,bordered:l(f).bordered,pagination:l(f).pagination,size:l(f).size,columns:l(K),stripe:l(f).stripe,loading:l(C)},{operate:a(({record:y})=>[e(v,{type:"text",onClick:p=>l(r)(y,()=>l(U)("zsAddProfessionalEnPlan"))},{default:a(()=>[P("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),l(b)==="zsAddProfessionalEnPlan"?(D(),B(ie,{key:0,data:l(k),onSuccess:l(z),onClose:o[9]||(o[9]=y=>l(r)({},()=>l(U)(null)))},null,8,["data","onSuccess"])):ae("",!0)])}}});export{_e as default};
