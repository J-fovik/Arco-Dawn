import{a as T,n as u,p as P,T as j,d as M,q as G,s as H,v as J,x as Q,y as W,r as i,o as m,e as X,g as s,w as t,c as e,z as b,l as f,i as p,k as w,A as Y,B as C}from"./index-8a2cb146.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const ee=()=>{const{getDictionaryItem:y}=T();return[{title:"提醒名称",dataIndex:"remindName",show:!0,align:"center",render:({record:n})=>u(n.remindName)},{title:"提醒内容",dataIndex:"remindInfo",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:n})=>u(n.remindInfo)},{title:"提醒部门",dataIndex:"departName",show:!0,align:"center",render:({record:n})=>u(n.departName)},{title:"消息状态",dataIndex:"state",show:!0,align:"center",render:({record:n})=>P(j,{color:n.state==="1"?"green":""},{default:()=>y("remindMsg_state",n.state).detailName})},{title:"创建时间",dataIndex:"createTime",show:!0,align:"center",render:({record:n})=>u(n.createTime)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}]},te=M({name:"AdministrationMessageManage"}),se=M({...te,setup(y){const{vAuthority:n}=G();T();const{warningModal:x}=Y(),{form:d,resetForm:N}=H(()=>({remindName:"",remindType:""}),()=>h()),{columnsData:z,visibleColumnsData:I,tableBaseOptions:a,resetData:h,extendTableList:S,changeTableColumn:k,changeTableSize:v}=J(ee(),()=>g()),A=r=>{x(`确定操作选中的${a.selectedKeys.length}数据吗？`,async o=>{const{res:_}=await w(()=>C[r]({idList:a.selectedKeys}),{successMsg:"操作成功"});o(!0),_&&(a.selectedKeys=[],g())})},{data:D,loading:$,initData:g}=Q(async()=>{const{res:r,err:o}=await w(()=>C.getMessageList({...d.value,currentPage:a.pagination.current,pageSize:a.pagination.pageSize,pagingOrNot:"1"}));return o?[]:(a.pagination.total=r.data.totalCount,S(r==null?void 0:r.data.msgList))});return W(g),(r,o)=>{const _=i("a-input"),K=i("a-form-item"),R=i("a-grid-item"),B=i("a-grid"),V=i("a-form"),L=i("icon-plus"),c=i("a-button"),O=i("icon-close"),U=i("a-space"),q=i("a-button-group"),E=i("a-table");return m(),X("div",null,[s(Z,{"table-columns":e(z),"table-size":e(a).size,onResetSearch:e(N),onSearch:e(h),onChangeTableSize:e(v),onChangeTableColumn:e(k)},{form:t(()=>[s(V,{model:e(d),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[s(B,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:t(()=>[s(R,null,{default:t(()=>[s(K,{label:"提醒名称:"},{default:t(()=>[s(_,{modelValue:e(d).remindName,"onUpdate:modelValue":o[0]||(o[0]=l=>e(d).remindName=l),placeholder:"请输入提醒名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:t(()=>[s(U,null,{default:t(()=>[b((m(),f(c,{type:"outline",onClick:o[1]||(o[1]=l=>r.$router.push("/administration/messageManage/operate"))},{icon:t(()=>[s(L)]),default:t(()=>[p(" 新增 ")]),_:1})),[[e(n),"AdministrationMessageManageAdd"]]),b((m(),f(c,{type:"outline",status:"danger",disabled:!e(a).selectedKeys.length,onClick:o[2]||(o[2]=l=>A("deleteMessage"))},{icon:t(()=>[s(O)]),default:t(()=>[p(" 删除 ")]),_:1},8,["disabled"])),[[e(n),"AdministrationMessageManageDelete"]])]),_:1})]),table:t(()=>[s(E,{"selected-keys":e(a).selectedKeys,"onUpdate:selectedKeys":o[3]||(o[3]=l=>e(a).selectedKeys=l),class:"zs-table","row-key":"id",data:e(D),"row-selection":e(a).rowSelection,bordered:e(a).bordered,pagination:e(a).pagination,size:e(a).size,columns:e(I),stripe:e(a).stripe,loading:e($)},{operate:t(({record:l})=>[s(q,null,{default:t(()=>[s(c,{type:"text",status:"success",onClick:F=>r.$router.push(`/administration/messageManage/operate?id=${l.id}&isReadOnly=true`)},{default:t(()=>[p("详情")]),_:2},1032,["onClick"]),b((m(),f(c,{type:"text",onClick:F=>r.$router.push(`/administration/messageManage/operate?id=${l.id}`)},{default:t(()=>[p("编辑")]),_:2},1032,["onClick"])),[[e(n),"AdministrationMessageManageEdit"]])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{se as default};
