import{d as h,g as F,h as A,i as I,n as L,j as N,r as d,o as y,l as q,w as l,a as n,b as e,v as j,m as $,c as M,e as Q,p as G}from"./index-d007178a.js";import{f as c,_ as H}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{D as K}from"./data-30d5a842.js";import"./index-13860ba0.js";const J=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"用户手机号",dataIndex:"phone",show:!0,align:"center",render:({record:a})=>c(a.phone)},{title:"问题",dataIndex:"question",show:!0,align:"center",render:({record:a})=>c(a.question)},{title:"会话批次",dataIndex:"batchcode",show:!0,align:"center",render:({record:a})=>c(a.batchcode)},{title:"创建时间",dataIndex:"createtime",show:!0,align:"center",render:({record:a})=>c(a.createtime)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],W=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"问题",dataIndex:"question",show:!0,align:"center",render:({record:a})=>c(a.question)},{title:"回答",dataIndex:"answer",show:!0,align:"center",render:({record:a})=>c(a.answer)},{title:"类型",dataIndex:"aiType",show:!0,width:100,align:"center",render:({record:a})=>c(a.aiType)}],X=h({name:"zsDetailsList"}),Y=h({...X,props:{data:{default:()=>({})}},emits:["close","success"],setup(a,{emit:o}){const b=a;F();const[x,k]=A(null);I(()=>({...b.data}));const{extendTableList:z,tableBaseOptions:t,visibleColumnsData:f}=L(W(),()=>C()),{data:m,loading:w,initData:C}=N(async()=>{const{res:u,err:s}=await $(()=>K.getDetailsList({id:b.data.aiid,currentPage:t.pagination.current,pageSize:t.pagination.pageSize,pagingOrNot:"1"}));if(s)return[];t.pagination.total=u.data.totalCount;const p=u==null?void 0:u.data.resultList;return z(p)});return(u,s)=>{const p=d("a-table"),T=d("a-modal");return y(),q(T,{title:"AI对话详情","unmount-on-close":"",visible:"",width:"80vw","align-center":!1,"mask-closable":!1,"ok-loading":e(x)==="okLoading",onCancel:s[1]||(s[1]=g=>o("close")),onOk:s[2]||(s[2]=g=>o("close"))},{default:l(()=>[n(p,{modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=g=>j(m)?m.value=g:null),class:"zs-table","row-key":"id",data:e(m),"row-selection":e(t).rowSelection,bordered:e(t).bordered,pagination:e(t).pagination,size:e(t).size,columns:e(f),stripe:e(t).stripe,loading:e(w)},null,8,["modelValue","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["ok-loading"])}}}),Z=h({name:"DataAnswerOptions"}),le=h({...Z,setup(a){const{form:o,resetForm:b}=I(()=>({phone:"",createStartTime:"",createEndTime:"",question:"",createTimeArr:[]}),()=>f()),{columnsData:x,selectRow:k,visibleColumnsData:z,tableBaseOptions:t,resetData:f,createRowNo:m,setSelectRow:w,extendTableList:C,changeTableColumn:u,changeTableSize:s}=L(J(),()=>D()),[p,T]=A(null),{data:g,loading:R,initData:D}=N(async()=>{const{res:_,err:r}=await $(()=>K.getQuestionAnswerList({...o.value,createStartTime:o.value.createTimeArr[0],createEndTime:o.value.createTimeArr[1],currentPage:t.pagination.current,pageSize:t.pagination.pageSize,pagingOrNot:"1"}));return r?[]:(t.pagination.total=_.data.totalCount,C(_==null?void 0:_.data.resultList))});return(_,r)=>{const V=d("a-input"),S=d("a-form-item"),v=d("a-grid-item"),B=d("a-range-picker"),O=d("a-grid"),U=d("a-form"),P=d("a-button"),E=d("a-table");return y(),M("div",null,[n(H,{"table-columns":e(x),"table-size":e(t).size,onResetSearch:e(b),onSearch:e(f),onChangeTableSize:e(s),onChangeTableColumn:e(u)},{form:l(()=>[n(U,{model:e(o),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[n(O,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:l(()=>[n(v,null,{default:l(()=>[n(S,{label:"手机号:"},{default:l(()=>[n(V,{modelValue:e(o).phone,"onUpdate:modelValue":r[0]||(r[0]=i=>e(o).phone=i),placeholder:"请输入用户手机号"},null,8,["modelValue"])]),_:1})]),_:1}),n(v,null,{default:l(()=>[n(S,{label:"问题:"},{default:l(()=>[n(V,{modelValue:e(o).question,"onUpdate:modelValue":r[1]||(r[1]=i=>e(o).question=i),modelModifiers:{trim:!0},placeholder:"请输入问题"},null,8,["modelValue"])]),_:1})]),_:1}),n(v,null,{default:l(()=>[n(S,{label:"问答日期:"},{default:l(()=>[n(B,{class:"flex1",modelValue:e(o).createTimeArr,"onUpdate:modelValue":r[2]||(r[2]=i=>e(o).createTimeArr=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),table:l(()=>[n(E,{"selected-keys":e(t).selectedKeys,"onUpdate:selectedKeys":r[3]||(r[3]=i=>e(t).selectedKeys=i),class:"zs-table","row-key":"aiid",data:e(g),"row-selection":e(t).rowSelection,bordered:e(t).bordered,pagination:e(t).pagination,size:e(t).size,columns:e(z),stripe:e(t).stripe,loading:e(R)},{operate:l(({record:i})=>[n(P,{type:"text",onClick:ee=>e(w)(i,()=>e(T)("zsDetailsList"))},{default:l(()=>[Q("详情")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(p)==="zsDetailsList"?(y(),q(Y,{key:0,data:e(k),onSuccess:e(D),onClose:r[4]||(r[4]=i=>e(w)({},()=>e(T)(null)))},null,8,["data","onSuccess"])):G("",!0)])}}});export{le as default};
