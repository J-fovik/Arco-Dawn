import{d as x,u as F,a as P,C as K,D as Z,E as z,s as G,I as H,r as d,o as m,l as _,w as n,g as l,c as a,e as W,j as Y,F as J,f as k,i as g,h as Q,k as p,G as X,H as $,B as y,S as ee,t as ae,_ as te}from"./index-8a2cb146.js";import{Z as le}from"./index-2bbe694f.js";const oe=u=>(X("data-v-430e2ef1"),u=u(),$(),u),re=oe(()=>k("div",{style:{height:"100px"}},null,-1)),ne={class:"orderSubmit-footer box-flex jc-fe"},de=x({name:"AdministrationMessageManage"}),se=x({...de,setup(u){const i=F(),{getDictionaryInfo:b}=P(),{jumpTabName:N}=K(),v=Z([]),[w,V]=z(null),{form:t,formRef:T,formPlaceholder:h}=G(()=>({remindName:"",remindInfo:"",remindType:"",belongType:"01",departNo:"",belongNo:"",userAccount:"",remark:""})),A={remindName:{required:!0,message:"请输入提醒名称"},remindInfo:{required:!0,message:"请输入提醒内容"},remindType:{required:!0,message:"请选择提醒类型"},belongType:{required:!0,message:"请选择所属类别"},departNo:{required:!0,message:"请输入所属机构编号"},belongNo:{required:!0,message:"请输入所属线路/团号"},userAccount:{required:!0,message:"请选择接受人"}},D=()=>{T.value.validate(o=>{o||C()})},C=async()=>{const{err:o}=await p(()=>y.addMessage(t.value),{before:()=>V("okLoading"),after:()=>V(null),successMsg:"保存成功"});o||N()},{data:M}=H(async()=>{const{res:o,err:e}=await p(()=>ee.getUserList({departCode:t.value.departNo,pagingOrNot:"0"}));return e?[]:o==null?void 0:o.data.userList},{watchSource:()=>t.value.departNo,defaultValue:[]}),c=async()=>{const{err:o,res:e}=await p(()=>y.getMessageDepartmentTree({belongType:t.value.belongType}));o||(v.value=e==null?void 0:e.data)},L=o=>{t.value.belongType=o,t.value.departNo="",c()},R=async()=>{const{res:o,err:e}=await p(()=>y.getMessageDetail({id:i.query.id}));e||(t.value=o==null?void 0:o.data,c())};return i.query.id?R():c(),(o,e)=>{const q=d("a-input"),s=d("a-form-item"),I=d("a-textarea"),f=d("a-select"),U=d("a-radio"),B=d("a-radio-group"),O=d("a-form"),j=d("a-card"),S=d("a-button"),E=d("a-space");return m(),_(le,null,{default:n(()=>[l(j,{title:"消息提醒维护",bordered:!1,class:"general-card"},{default:n(()=>[l(O,{ref_key:"formRef",ref:T,model:a(t),"label-align":"left",size:"large",style:{width:"800px","padding-left":"100px"},"auto-label-width":"",disabled:!!a(i).query.isReadOnly,rules:A},{default:n(()=>[l(s,{field:"remindName",label:"提醒名称:",required:""},{default:n(()=>[l(q,{modelValue:a(t).remindName,"onUpdate:modelValue":e[0]||(e[0]=r=>a(t).remindName=r),placeholder:"请输入提醒名称"},null,8,["modelValue"])]),_:1}),l(s,{field:"remindInfo",label:"提醒内容:",required:""},{default:n(()=>[l(I,{modelValue:a(t).remindInfo,"onUpdate:modelValue":e[1]||(e[1]=r=>a(t).remindInfo=r),placeholder:"请输入提醒内容"},null,8,["modelValue"])]),_:1}),l(s,{field:"remindType",label:"提醒类型:",required:""},{default:n(()=>[l(f,{modelValue:a(t).remindType,"onUpdate:modelValue":e[2]||(e[2]=r=>a(t).remindType=r),options:a(b)("remindType"),"field-names":{label:"detailName",value:"detailCode"},placeholder:"请选择提醒类型"},null,8,["modelValue","options"])]),_:1}),l(s,{field:"belongType",label:"所属类别:",required:""},{default:n(()=>[l(B,{"model-value":a(t).belongType,onChange:L},{default:n(()=>[(m(!0),W(J,null,Y(a(b)("belongType"),r=>(m(),_(U,{value:r.detailCode},{default:n(()=>[g(ae(r.detailName),1)]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1}),l(s,{field:"departNo",label:"所属机构:",required:""},{default:n(()=>[l(f,{modelValue:a(t).departNo,"onUpdate:modelValue":e[3]||(e[3]=r=>a(t).departNo=r),"allow-search":"",options:v.value,fieldNames:{label:"name",value:"departNo"},placeholder:"请选择所属机构"},null,8,["modelValue","options"])]),_:1}),l(s,{field:"userAccount",label:"接收人:"},{default:n(()=>[l(f,{modelValue:a(t).userAccount,"onUpdate:modelValue":e[4]||(e[4]=r=>a(t).userAccount=r),"allow-search":"",options:a(M),"virtual-list-props":{height:200},"field-names":{label:"username",value:"userAccount"},placeholder:"请输入接收人"},null,8,["modelValue","options"])]),_:1}),l(s,{field:"belongNo",label:"所属线路/团号:"},{default:n(()=>[l(q,{modelValue:a(t).belongNo,"onUpdate:modelValue":e[5]||(e[5]=r=>a(t).belongNo=r),placeholder:"请输入所属线路/团号"},null,8,["modelValue"])]),_:1}),l(s,{field:"remark",label:"备注:"},{default:n(()=>[l(I,{modelValue:a(t).remark,"onUpdate:modelValue":e[6]||(e[6]=r=>a(t).remark=r),placeholder:a(h)("请输入备注")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model","disabled"])]),_:1}),re,k("div",ne,[l(E,null,{default:n(()=>[a(i).query.isReadOnly?Q("",!0):(m(),_(S,{key:0,loading:a(w)==="okLoading",type:"primary",onClick:D},{default:n(()=>[g("确定")]),_:1},8,["loading"])),l(S,{onClick:e[7]||(e[7]=()=>a(N)())},{default:n(()=>[g("返回")]),_:1})]),_:1})])]),_:1})}}});const me=te(se,[["__scopeId","data-v-430e2ef1"]]);export{me as default};
