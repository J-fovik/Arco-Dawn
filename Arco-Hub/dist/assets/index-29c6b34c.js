import{d as O,u as K,C as Q,E as W,D as h,R as Y,s as $,a1 as ee,M as le,r as n,o as g,l as T,w as l,g as e,c as r,O as b,h as D,i as s,e as L,F as N,j as ae,f as y,G as te,H as de,k as re,X as oe,t as ue,ac as ie,_ as se}from"./index-8a2cb146.js";import{Z as ne}from"./index-2bbe694f.js";import{Z as pe}from"./zsRoutePrice-e3a5f38b.js";import{S as fe}from"./supplier-c338fe4b.js";const q=V=>(te("data-v-c14a3ec9"),V=V(),de(),V),me=q(()=>y("div",{style:{padding:"0 10px"}},"-",-1)),_e=q(()=>y("div",{style:{padding:"0 10px"}},"-",-1)),ce=q(()=>y("div",{style:{padding:"0 10px"}},"-",-1)),ge=q(()=>y("div",{style:{height:"100px"}},null,-1)),ve={class:"orderSubmit-footer box-flex jc-fe"},be=O({name:"LineAdjustmentTourismHistoryOperate"}),ye=O({...be,setup(V){const A=K(),{jumpTabName:C}=Q();W("");const P=h(null),M=Y([]),U=h([]),{form:d,formRef:B}=$(()=>({routeName:"",travelType:"",routeType:"",groupType:"1",isBefore:"1",beforeDays:void 0,idType:[],vehicle:[],travelDays:void 0,adultAgeMin:void 0,adultAgeMax:void 0,ageOfTheElderlyMin:void 0,ageOfTheElderlyMax:105,childrenSAgeMin:void 0,childrenSAgeMax:void 0,arrival:"",supplierId:"",isReturnPoint:"1",isSubstrPoint:"1",addRebate:void 0,rebate:void 0,areaList:[],deposit:void 0,allTimeArr:[],routePrice:{crmsjg:void 0,crtxjg:void 0,crdffcmsj:void 0,crdrfctxj:void 0,crqtjg:void 0,lrmsjg:void 0,lrtxjg:void 0,lrdffcmsj2:void 0,lrdrfctxj:void 0,lrqtjg:void 0,etmsjg:void 0,ettxjg:void 0,etdffcmsj:void 0,etqtjg:void 0,zccrdrfctxj:void 0,zcrtdffcmsj:void 0,zcettxjg:void 0,zcetmsjg:void 0,zcetdrfctxj:void 0,zcetqtjg:void 0,qtjg:void 0,qtjg2:void 0,qtjg3:void 0,qtjg4:void 0,remark:""}}));h({routeTripList:[],businessDepartList:[],attachList:[],other:{}});const k=ee(()=>v.value.routeTypeList.filter(o=>o.lineVer===d.value.travelType)),z={routeName:{required:!0,message:"请输入登录名"},travelType:{required:!0,message:"请选择旅行类型"},routeType:{required:!0,message:"请选择线路类型"},deposit:{required:!0,message:"请输入押金"},beforeDays:{required:!0,message:"请输入提前报名天数"},idType:{required:!0,message:"请选择支持证件"},vehicle:{required:!0,message:"请选择交通工具"},travelDays:{required:!0,message:"请输入天数"},adultAge:{required:!0,validator:(o,t)=>{!d.value.adultAgeMin&&!d.value.adultAgeMax&&t("请输入正确的年龄")}},ageOfTheElderly:{required:!0,validator:(o,t)=>{!d.value.ageOfTheElderlyMin&&!d.value.ageOfTheElderlyMax&&t("请输入正确的年龄")}},childrenSAge:{required:!0,validator:(o,t)=>{!d.value.childrenSAgeMin&&!d.value.childrenSAgeMax&&t("请输入正确的年龄")}},supplierId:{required:!0,message:"请选择供应商"},allTimeArr:{required:!0,message:"请选择发团日期"}},{data:v}=le(async()=>{const{err:o,res:t}=await re(()=>fe.getApplicationPriceExamineHistoryDetail({id:A.query.id??"",trouid:A.query.routeId??"",historyid:A.query.historyId}));return o?{}:(w(t==null?void 0:t.data),t==null?void 0:t.data)},{departType:"",ass:"",regionList:[],travelTypeList:[],supplierList:[],routeTypeList:[]}),w=({hisTravelRoute:o,validDateList:t,routePriceHisList:m})=>{const i=o.adultAge.split("-"),u=o.elderlyAge.split("-"),c=o.childAge.split("-");d.value={routeName:o.routeName,travelType:o.travelType,routeType:o.routeType,groupType:o.groupType,isBefore:o.isBefore,beforeDays:o.beforeDays,travelDays:o.travelDays,arrival:o.arrival,supplierId:o.arrival,isReturnPoint:o.isReturnPoint,isSubstrPoint:o.isSubstrPoint,addRebate:o.addRebate,rebate:o.rebate,deposit:o.deposit,adultAgeMin:i[0]*1,adultAgeMax:i[1]*1,ageOfTheElderlyMin:u[0]*1,ageOfTheElderlyMax:u[1]*1,childrenSAgeMin:c[0]*1,childrenSAgeMax:c[1]*1,idType:o.idtype.split(","),vehicle:o.vehicle.split(","),allTimeArr:t.map(p=>oe(p)),routePrice:m[0]},U.value=m},R=o=>{if(M.value=o,o.length){const t=U.value.find(m=>m.validDate===o.at(-1));P.value.setFormData({...t})}},F=o=>{d.value.travelType=o,d.value.routeType="",d.value.arrival=""},Z=o=>{var t;d.value.routeType=o,d.value.arrival=((t=k.value.find(m=>m.lineId===o))==null?void 0:t.lineDesc)??""};return(o,t)=>{const m=n("a-input"),i=n("a-form-item"),u=n("a-grid-item"),c=n("a-select"),p=n("a-input-number"),_=n("a-radio"),x=n("a-radio-group"),f=n("a-checkbox"),S=n("a-checkbox-group"),j=n("a-input-group"),E=n("a-grid"),I=n("a-card"),H=n("a-tag"),G=n("a-form"),X=n("a-button"),J=n("a-space");return g(),T(ne,null,{default:l(()=>[e(G,{ref_key:"formRef",ref:B,"label-align":"left",size:"large",layout:"vertical","auto-label-width":"","scroll-to-first-error":"",model:r(d),rules:z},{default:l(()=>[e(I,{title:"路由线路时间添加",bordered:!1,class:"general-card"},{default:l(()=>[e(E,{cols:3,"col-gap":12},{default:l(()=>[e(u,null,{default:l(()=>[e(i,{label:"线路名称:",field:"routeName",required:""},{default:l(()=>[e(m,{modelValue:r(d).routeName,"onUpdate:modelValue":t[0]||(t[0]=a=>r(d).routeName=a),modelModifiers:{trim:!0},disabled:!0,placeholder:"请输入线路名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"旅行类型:",field:"travelType",required:""},{default:l(()=>[e(c,{"model-value":r(d).travelType,options:r(v).travelTypeList,disabled:!0,"field-names":{label:"detailName",value:"lineVer"},placeholder:"请输入旅行类型",onChange:F},null,8,["model-value","options"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"线路类型:",field:"routeType",required:""},{default:l(()=>[e(c,{"model-value":r(d).routeType,options:k.value,disabled:!0,"field-names":{label:"linename",value:"lineId"},placeholder:"请选择线路类型",onChange:Z},null,8,["model-value","options"])]),_:1})]),_:1}),r(d).travelType==="C00001"?(g(),T(u,{key:0},{default:l(()=>[e(i,{label:"押金:",field:"deposit",required:""},{default:l(()=>[e(p,{modelValue:r(d).deposit,"onUpdate:modelValue":t[1]||(t[1]=a=>r(d).deposit=a),modelModifiers:{trim:!0},disabled:!0,formatter:a=>r(b)(a,""),parser:a=>a.replace(/,/g,""),precision:0,"hide-button":"",placeholder:"请输入押金"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1})):D("",!0),e(u,null,{default:l(()=>[e(i,{label:"成团类别:",field:"groupType",required:""},{default:l(()=>[e(x,{modelValue:r(d).groupType,"onUpdate:modelValue":t[2]||(t[2]=a=>r(d).groupType=a),disabled:!0},{default:l(()=>[e(_,{value:"1"},{default:l(()=>[s("单团")]),_:1}),e(_,{value:"2"},{default:l(()=>[s("散客")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(v).departType!=="2"?(g(),T(u,{key:1},{default:l(()=>[e(i,{label:"是否提前报名:",field:"isBefore",required:""},{default:l(()=>[e(x,{modelValue:r(d).isBefore,"onUpdate:modelValue":t[3]||(t[3]=a=>r(d).isBefore=a),disabled:!0},{default:l(()=>[e(_,{value:"1"},{default:l(()=>[s("是")]),_:1}),e(_,{value:"0"},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):D("",!0),e(u,null,{default:l(()=>[e(i,{label:"提前报名天数:",field:"beforeDays",required:""},{default:l(()=>[e(p,{modelValue:r(d).beforeDays,"onUpdate:modelValue":t[4]||(t[4]=a=>r(d).beforeDays=a),modelModifiers:{trim:!0},disabled:!0,formatter:a=>r(b)(a,""),parser:a=>a.replace(/,/g,""),precision:0,"hide-button":"",placeholder:"请输入提前报名天数"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"支持证件:",field:"idType",required:""},{default:l(()=>[e(S,{modelValue:r(d).idType,"onUpdate:modelValue":t[5]||(t[5]=a=>r(d).idType=a),disabled:!0},{default:l(()=>[e(f,{value:"1"},{default:l(()=>[s("身份证")]),_:1}),e(f,{value:"2"},{default:l(()=>[s("户口本")]),_:1}),e(f,{value:"3"},{default:l(()=>[s("护照")]),_:1}),e(f,{value:"4"},{default:l(()=>[s("驾驶证")]),_:1}),e(f,{value:"5"},{default:l(()=>[s("暂住证")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"交通工具:",field:"vehicle",required:""},{default:l(()=>[e(S,{modelValue:r(d).vehicle,"onUpdate:modelValue":t[6]||(t[6]=a=>r(d).vehicle=a),disabled:!0},{default:l(()=>[e(f,{value:"1"},{default:l(()=>[s("飞机")]),_:1}),e(f,{value:"2"},{default:l(()=>[s("火车")]),_:1}),e(f,{value:"3"},{default:l(()=>[s("大巴")]),_:1}),e(f,{value:"4"},{default:l(()=>[s("轮船")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"天数:",field:"travelDays",required:""},{default:l(()=>[e(p,{modelValue:r(d).travelDays,"onUpdate:modelValue":t[7]||(t[7]=a=>r(d).travelDays=a),disabled:!0,formatter:a=>r(b)(a,""),parser:a=>a.replace(/,/g,""),precision:0,"hide-button":"",placeholder:"请输入天数"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"成人价年龄:",field:"adultAge",required:""},{default:l(()=>[e(j,{class:"flex1"},{default:l(()=>[e(p,{modelValue:r(d).adultAgeMin,"onUpdate:modelValue":t[8]||(t[8]=a=>r(d).adultAgeMin=a),disabled:!0,min:0,placeholder:"最小年龄"},null,8,["modelValue"]),me,e(p,{modelValue:r(d).adultAgeMax,"onUpdate:modelValue":t[9]||(t[9]=a=>r(d).adultAgeMax=a),disabled:!0,min:0,placeholder:"最大年龄"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"老人价年龄:",field:"ageOfTheElderly",required:""},{default:l(()=>[e(j,{class:"flex1"},{default:l(()=>[e(p,{modelValue:r(d).ageOfTheElderlyMin,"onUpdate:modelValue":t[10]||(t[10]=a=>r(d).ageOfTheElderlyMin=a),max:105,disabled:!0,min:0,placeholder:"最小年龄"},null,8,["modelValue"]),_e,e(p,{modelValue:r(d).ageOfTheElderlyMax,"onUpdate:modelValue":t[11]||(t[11]=a=>r(d).ageOfTheElderlyMax=a),max:105,disabled:!0,min:0,placeholder:"最大年龄"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"儿童价年龄:",field:"childrenSAge"},{default:l(()=>[e(j,{class:"flex1"},{default:l(()=>[e(p,{modelValue:r(d).childrenSAgeMin,"onUpdate:modelValue":t[12]||(t[12]=a=>r(d).childrenSAgeMin=a),min:0,disabled:!0,placeholder:"最小年龄"},null,8,["modelValue"]),ce,e(p,{modelValue:r(d).childrenSAgeMax,"onUpdate:modelValue":t[13]||(t[13]=a=>r(d).childrenSAgeMax=a),min:0,disabled:!0,placeholder:"最大年龄"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"目的地:",field:"arrival"},{default:l(()=>[e(m,{modelValue:r(d).arrival,"onUpdate:modelValue":t[14]||(t[14]=a=>r(d).arrival=a),modelModifiers:{trim:!0},readonly:"",disabled:!0,placeholder:"请输入目的地"},null,8,["modelValue"])]),_:1})]),_:1}),r(v).ass==="1"?(g(),L(N,{key:2},[e(u,null,{default:l(()=>[e(i,{label:"外交供应商:",field:"supplierId"},{default:l(()=>[e(c,{modelValue:r(d).supplierId,"onUpdate:modelValue":t[15]||(t[15]=a=>r(d).supplierId=a),options:r(v).supplierList,disabled:!0,"field-names":{label:"supName",value:"id"},placeholder:"请选择辅助外交供应商"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"是否供应商返点:",field:"isReturnPoint",required:""},{default:l(()=>[e(x,{modelValue:r(d).isReturnPoint,"onUpdate:modelValue":t[16]||(t[16]=a=>r(d).isReturnPoint=a),disabled:!0},{default:l(()=>[e(_,{value:"1"},{default:l(()=>[s("是")]),_:1}),e(_,{value:"0"},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"是否营业部扣点:",field:"isSubstrPoint",required:""},{default:l(()=>[e(x,{modelValue:r(d).isSubstrPoint,"onUpdate:modelValue":t[17]||(t[17]=a=>r(d).isSubstrPoint=a),disabled:!0},{default:l(()=>[e(_,{value:"1"},{default:l(()=>[s("是")]),_:1}),e(_,{value:"0"},{default:l(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"供应商返点(%):",field:"addRebate",required:""},{default:l(()=>[e(p,{modelValue:r(d).addRebate,"onUpdate:modelValue":t[18]||(t[18]=a=>r(d).addRebate=a),modelModifiers:{trim:!0},formatter:a=>r(b)(a,""),parser:a=>a.replace(/,/g,""),precision:2,disabled:!0,"hide-button":"",placeholder:"空默认为不扣供应商点"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(i,{label:"营业部扣点(%):",required:""},{default:l(()=>[e(p,{modelValue:r(d).rebate,"onUpdate:modelValue":t[19]||(t[19]=a=>r(d).rebate=a),modelModifiers:{trim:!0},formatter:a=>r(b)(a,""),parser:a=>a.replace(/,/g,""),precision:2,disabled:!0,"hide-button":"",placeholder:"空默认为不扣营业部点"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1})],64)):D("",!0)]),_:1})]),_:1}),e(I,{title:"发团日期选择",bordered:!1,class:"general-card margin-top"},{default:l(()=>[e(E,{cols:3,"col-gap":20},{default:l(()=>[e(u,{span:1},{default:l(()=>[e(i,{field:"allTimeArr","hide-label":"","hide-asterisk":""},{default:l(()=>[e(S,{modelValue:M.value,"onUpdate:modelValue":t[20]||(t[20]=a=>M.value=a),onChange:R},{default:l(()=>[(g(!0),L(N,null,ae(r(d).allTimeArr,a=>(g(),T(f,{key:a,value:a,style:{"margin-bottom":"10px"}},{default:l(()=>[e(H,{size:"large"},{default:l(()=>[s(ue(r(ie)(a)),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:2},{default:l(()=>[e(pe,{ref_key:"routePriceRef",ref:P,disabled:"","default-data":r(d).routePrice},null,8,["default-data"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),ge,y("div",ve,[e(J,null,{default:l(()=>[e(X,{onClick:t[21]||(t[21]=()=>r(C)())},{default:l(()=>[s("返回")]),_:1})]),_:1})])]),_:1})}}});const Ae=se(ye,[["__scopeId","data-v-c14a3ec9"]]);export{Ae as default};
