import{d as b,a as L,b as S,k as A,r as p,o as f,l as g,w as t,g as a,i as d,t as i,c as e,f as R,O as C,n as u,h as k,p as D,u as T,m as V,v as O}from"./index-8a2cb146.js";import{B as M}from"./business-b0ce0e8a.js";import{F as P}from"./finance-4d2c7da5.js";const E={class:"text-price text-red"},F=b({name:"ZsPreviewInvoicing"}),J=b({...F,props:{data:{default:()=>({})}},emits:["close","success"],setup(s,{emit:h}){const x=s,I=h,{getDictionaryItem:v}=L(),{data:o,loading:y}=S(async()=>{const{err:_,res:r}=await A(()=>M.getInvoiceApplicationDetail({id:x.data.id}));return _?[]:{...r==null?void 0:r.data,invoiceList:r==null?void 0:r.data.invoiceList.map(n=>({name:n.attName,url:n.attPath,status:"done",uid:n.id,attSize:n.attSize}))}},{invoiceList:[]});return(_,r)=>{const n=p("a-tag"),l=p("a-descriptions-item"),w=p("a-upload"),c=p("a-descriptions"),m=p("a-spin"),N=p("a-modal");return f(),g(N,{top:"10%","align-center":!1,width:"1000px	","unmount-on-close":"",visible:"",title:"申请开票","mask-closable":!1,onCancel:r[0]||(r[0]=$=>I("close")),footer:!1},{default:t(()=>[a(m,{loading:e(y)},{default:t(()=>[a(c,{column:1,size:"large"},{default:t(()=>[a(l,{label:"供应商名称："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(o).departName),1)]),_:1})]),_:1}),a(l,{label:"发票项目："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(v)("invoItems",e(o).invoItems).detailName),1)]),_:1})]),_:1}),a(l,{label:"申请开票金额："},{default:t(()=>[a(n,null,{default:t(()=>[R("span",E,i(e(C)(`${e(o).applyMoney}`)),1)]),_:1})]),_:1}),a(l,{label:"单位名称："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).corporateName)),1)]),_:1})]),_:1}),a(l,{label:"税号："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).taxCode)),1)]),_:1})]),_:1}),a(l,{label:"地址："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).address)),1)]),_:1})]),_:1}),a(l,{label:"电话："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).phone)),1)]),_:1})]),_:1}),a(l,{label:"开户银行："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).depositBank)),1)]),_:1})]),_:1}),a(l,{label:"银行账号："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).bankAccount)),1)]),_:1})]),_:1}),e(o).auditRemark?(f(),g(l,{key:0,label:"平台经理备注："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).auditRemark)),1)]),_:1})]),_:1})):k("",!0),e(o).auditRemark2?(f(),g(l,{key:1,label:"财务审核备注："},{default:t(()=>[a(n,null,{default:t(()=>[d(i(e(u)(e(o).auditRemark2)),1)]),_:1})]),_:1})):k("",!0),e(o).invoiceList.length?(f(),g(l,{key:2,label:"发票："},{default:t(()=>[a(w,{"file-list":e(o).invoiceList,"auto-upload":!1,limit:1,"show-remove-button":!1,"show-retry-button":!1},null,8,["file-list"])]),_:1})):k("",!0)]),_:1})]),_:1},8,["loading"])]),_:1})}}}),Z=()=>[{title:"营业部名称",dataIndex:"departName",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:s})=>u(s.departName)},{title:"团号",dataIndex:"groupId",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:s})=>u(s.groupId)},{title:"报名订单总费用(元)",dataIndex:"signCost",show:!0,align:"right",render:({record:s})=>D("span",{class:"text-red text-price"},C(`${s.signCost??"0"}`))},{title:"剩余可开金额(元)",dataIndex:"canApplyMoneyTotal",show:!0,align:"right",render:({record:s})=>D("span",{class:"text-red text-price"},C(`${s.canApplyMoneyTotal??"0"}`))},{title:"状态",dataIndex:"isBillingName",show:!0,align:"center",render:({record:s})=>u(s.isBillingName)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],q=b({name:"ZsGroupOrder"}),K=b({...q,props:{data:{default:()=>({})}},emits:["close"],setup(s,{emit:h}){const x=s,I=h,v=T(),o=V(),{visibleColumnsData:y,tableBaseOptions:_}=O(Z(),()=>n()),{data:r,initData:n,loading:l}=S(async()=>{const{res:c,err:m}=await A(()=>P.getVoucherList({groupIds:x.data.groupNo,pagingOrNot:"0"}));return m?[]:(_.pagination.total=c.data.totalCount,c==null?void 0:c.data.payVoucherList)}),w=c=>{o.push(`/order/tradeManage/operate/?routeId=${c.routeId}&groupId=${c.groupId}&name=${v.name}`)};return(c,m)=>{const N=p("a-button"),$=p("a-table"),z=p("a-modal");return f(),g(z,{width:"1200px","unmount-on-close":"",visible:"",title:"订单列表","mask-closable":!1,onCancel:m[0]||(m[0]=B=>I("close")),footer:!1,"render-to-body":!1},{default:t(()=>[a($,{class:"zs-table","row-key":"id",data:e(r),bordered:e(_).bordered,size:e(_).size,columns:e(y),stripe:e(_).stripe,loading:e(l)},{operate:t(({record:B})=>[a(N,{type:"text",onClick:G=>w(B)},{default:t(()=>[d("查看")]),_:2},1032,["onClick"])]),_:1},8,["data","bordered","size","columns","stripe","loading"])]),_:1})}}});export{J as _,K as a};
