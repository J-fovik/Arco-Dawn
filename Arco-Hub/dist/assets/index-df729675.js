import{n as m,O as $,d as T,E as B,s as L,v as P,b as O,y as F,r as d,o as q,e as Y,g as t,w as l,c as e,i as w,f as j,k as S,A as G,S as V}from"./index-8a2cb146.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const J=()=>[{title:"物理表名",dataIndex:"tableName",show:!0,align:"center",render:({record:n})=>m(n.tableName)},{title:"主键值",dataIndex:"pkVal",show:!0,width:100,align:"center",render:({record:n})=>m(n.pkVal)},{title:"附件名",dataIndex:"attName",show:!0,align:"center",tooltip:!0,ellipsis:!0,render:({record:n})=>m(n.attName)},{title:"附件路径",dataIndex:"attPath",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:n})=>m(n.attPath)},{title:"物理表字段名",dataIndex:"colName",width:200,show:!0,align:"center",render:({record:n})=>m(n.colName)},{title:"附件大小",dataIndex:"attSize",show:!0,align:"right",width:100,render:({record:n})=>$(n.attSize?n.attSize+"kb":"")},{title:"创建时间",dataIndex:"createTime",show:!0,align:"center",render:({record:n})=>m(n.createTime)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],Q=j("span",{class:"mx-3"},"-",-1),W=T({name:"SystemAttachmentManage"}),oe=T({...W,setup(n){const{warningModal:y}=G(),[x,X]=B(null),{form:s,resetForm:N}=L(()=>({createTimeStart:"",createTimeEnd:"",useDesc:"",attName:"",tableName:"",colName:""}),()=>b()),{selectRow:Z,columnsData:z,visibleColumnsData:C,tableBaseOptions:o,resetData:b,extendTableList:ee,setSelectRow:te,changeTableColumn:k,changeTableSize:v}=P(J(),()=>_()),D=i=>{y(`确定操作选中的${o.selectedKeys.length}数据吗？`,async a=>{const{err:u}=await S(()=>V[i]({idList:o.selectedKeys}),{successMsg:"操作成功"});u||(a(!0),o.selectedKeys=[],_())})},{data:I,loading:K,initData:_}=O(async()=>{const{res:i,err:a}=await S(()=>V.getAttachmentList({...s.value,currentPage:o.pagination.current,pageSize:o.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(o.pagination.total=i.data.totalCount,i==null?void 0:i.data.dataList)});return F(_),(i,a)=>{const u=d("a-input"),p=d("a-form-item"),g=d("a-grid-item"),f=d("a-date-picker"),A=d("a-grid"),U=d("a-form"),E=d("icon-close"),h=d("a-button"),M=d("a-space"),R=d("a-table");return q(),Y("div",null,[t(H,{fold:"","table-columns":e(z),"table-size":e(o).size,onResetSearch:e(N),onSearch:e(b),onChangeTableSize:e(v),onChangeTableColumn:e(k)},{form:l(({collapsed:c})=>[t(U,{model:e(s),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[t(A,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!c},{default:l(()=>[t(g,null,{default:l(()=>[t(p,{label:"物理表名:"},{default:l(()=>[t(u,{modelValue:e(s).tableName,"onUpdate:modelValue":a[0]||(a[0]=r=>e(s).tableName=r),placeholder:"请输入附件隶属的物理表名"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(p,{label:"附件名:"},{default:l(()=>[t(u,{modelValue:e(s).attName,"onUpdate:modelValue":a[1]||(a[1]=r=>e(s).attName=r),placeholder:"请输入不带路径的附件名"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(p,{label:"物理表字段名:"},{default:l(()=>[t(u,{modelValue:e(s).colName,"onUpdate:modelValue":a[2]||(a[2]=r=>e(s).colName=r),placeholder:"请输入物理表字段名"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(p,{label:"用途:"},{default:l(()=>[t(u,{modelValue:e(s).useDesc,"onUpdate:modelValue":a[3]||(a[3]=r=>e(s).useDesc=r),placeholder:"请输入用途"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(p,{label:"申请日期:"},{default:l(()=>[t(f,{modelValue:e(s).createTimeStart,"onUpdate:modelValue":a[4]||(a[4]=r=>e(s).createTimeStart=r),class:"flex1",placeholder:"请选择申请开始日期"},null,8,["modelValue"]),Q,t(f,{modelValue:e(s).createTimeEnd,"onUpdate:modelValue":a[5]||(a[5]=r=>e(s).createTimeEnd=r),class:"flex1",placeholder:"请选择申请截止日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:l(()=>[t(M,null,{default:l(()=>[t(h,{type:"outline",status:"danger",disabled:!e(o).selectedKeys.length,loading:e(x)==="删除",onClick:a[6]||(a[6]=c=>D("deleteAttachment"))},{icon:l(()=>[t(E)]),default:l(()=>[w(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:l(()=>[t(R,{"selected-keys":e(o).selectedKeys,"onUpdate:selectedKeys":a[7]||(a[7]=c=>e(o).selectedKeys=c),class:"zs-table","row-key":"id",data:e(I),"row-selection":e(o).rowSelection,bordered:e(o).bordered,pagination:e(o).pagination,size:e(o).size,columns:e(C),stripe:e(o).stripe,loading:e(K)},{operate:l(({record:c})=>[t(h,{type:"text",onClick:r=>i.$router.push(`/system/attachmentManage/operate?id=${c.id}`)},{default:l(()=>[w("详情")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{oe as default};
