import{n as i,d as b,E as I,s as M,v as Y,b as E,r as d,o as L,e as U,g as t,w as n,c as e,i as O,f as R,k as B,S as A,X as g}from"./index-8a2cb146.js";import{A as $}from"./options-aafac76d.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const P=()=>[{title:"接口名称",dataIndex:"interfaceName",show:!0,align:"center",render:({record:r})=>i(r.interfaceName)},{title:"方法名称",dataIndex:"methodName",show:!0,align:"center",render:({record:r})=>i(r.methodName)},{title:"接口地址",dataIndex:"address",show:!0,align:"center",ellipsis:!0,tooltip:!0,render:({record:r})=>i(r.address)},{title:"接口类别",dataIndex:"interfaceType",show:!0,align:"center",render:({record:r})=>i(r.interfaceType)},{title:"状态",dataIndex:"state",show:!0,align:"center",render:({record:r})=>i(r.state==="1"?"成功":"失败")},{title:"创建时间",dataIndex:"createTime",show:!0,align:"center",render:({record:r})=>i(r.createTime)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],F=[{label:"成功",value:"1"},{label:"失败",value:"0"}],q=R("span",{class:"mx-3"},"-",-1),X=b({name:"SystemLogManage"}),te=b({...X,setup(r){I(null);const{form:a,resetForm:T}=M(()=>({createTimeStart:"",createTimeEnd:"",interfaceName:"",methodName:"",interfaceType:"",state:""}),()=>f()),{selectRow:j,columnsData:S,visibleColumnsData:h,tableBaseOptions:s,resetData:f,extendTableList:G,setSelectRow:H,changeTableColumn:V,changeTableSize:w}=Y(P(),()=>N()),{data:x,loading:y,initData:N}=E(async()=>{const{res:c,err:l}=await B(()=>A.getInterfaceLogList({...a.value,createTimeStart:g(a.value.createTimeStart,"YYYYMMDD",""),createTimeEnd:g(a.value.createTimeEnd,"YYYYMMDD",""),currentPage:s.pagination.current,pageSize:s.pagination.pageSize,pagingOrNot:"1"}));if(!l)return s.pagination.total=c.data.totalCount,c.data.dataList});return(c,l)=>{const p=d("a-input"),u=d("a-form-item"),m=d("a-grid-item"),C=d("a-select"),_=d("a-date-picker"),z=d("a-grid"),v=d("a-form"),D=d("a-button"),k=d("a-table");return L(),U("div",null,[t(K,{"table-columns":e(S),"table-size":e(s).size,onResetSearch:e(T),onSearch:e(f),onChangeTableSize:e(w),onChangeTableColumn:e(V)},{form:n(()=>[t(v,{model:e(a),"label-align":"left",size:"large","auto-label-width":""},{default:n(()=>[t(z,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:n(()=>[t(m,null,{default:n(()=>[t(u,{label:"接口名称:"},{default:n(()=>[t(p,{modelValue:e(a).interfaceName,"onUpdate:modelValue":l[0]||(l[0]=o=>e(a).interfaceName=o),modelModifiers:{trim:!0},placeholder:"请输入接口名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,null,{default:n(()=>[t(u,{label:"方法名称:"},{default:n(()=>[t(p,{modelValue:e(a).methodName,"onUpdate:modelValue":l[1]||(l[1]=o=>e(a).methodName=o),modelModifiers:{trim:!0},placeholder:"请输入方法名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,null,{default:n(()=>[t(u,{label:"接口类别:"},{default:n(()=>[t(p,{modelValue:e(a).interfaceType,"onUpdate:modelValue":l[2]||(l[2]=o=>e(a).interfaceType=o),modelModifiers:{trim:!0},placeholder:"请输入接口类别"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,null,{default:n(()=>[t(u,{label:"接口状态:"},{default:n(()=>[t(C,{modelValue:e(a).state,"onUpdate:modelValue":l[3]||(l[3]=o=>e(a).state=o),options:[...e($),...e(F)],"field-names":{label:"label",value:"value"},"allow-search":"",placeholder:"请选择接口状态"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(m,null,{default:n(()=>[t(u,{label:"选择日期:"},{default:n(()=>[t(_,{modelValue:e(a).createTimeStart,"onUpdate:modelValue":l[4]||(l[4]=o=>e(a).createTimeStart=o),class:"flex1",placeholder:"创建日期开始"},null,8,["modelValue"]),q,t(_,{modelValue:e(a).createTimeEnd,"onUpdate:modelValue":l[5]||(l[5]=o=>e(a).createTimeEnd=o),class:"flex1",placeholder:"创建日期结束"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),table:n(()=>[t(k,{"selected-keys":e(s).selectedKeys,"onUpdate:selectedKeys":l[6]||(l[6]=o=>e(s).selectedKeys=o),class:"zs-table","row-key":"id",data:e(x),"row-selection":e(s).rowSelection,bordered:e(s).bordered,pagination:e(s).pagination,size:e(s).size,columns:e(h),stripe:e(s).stripe,loading:e(y)},{operate:n(({record:o})=>[t(D,{type:"text",status:"success",onClick:J=>c.$router.push(`/system/logManage/operate?id=${o.id}&isReadOnly=true`)},{default:n(()=>[O("详情")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{te as default};
