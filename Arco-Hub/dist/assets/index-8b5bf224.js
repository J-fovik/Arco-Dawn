import{d as R,g as O,h as $,i as j,r,o as L,l as N,w as t,a as e,b as l,m as T,n as Z,j as ee,c as le,e as S,p as te,q as oe}from"./index-d007178a.js";import{f as V,c as ae,_ as de}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as B}from"./options-aafac76d.js";import{R as P}from"./recruit-3c2f52ae.js";import"./index-13860ba0.js";const ne=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:i})=>V(i.sf)},{title:"年份",dataIndex:"nf",show:!0,align:"center",render:({record:i})=>V(i.nf)},{title:"批次",dataIndex:"pc",show:!0,align:"center",render:({record:i})=>V(i.pc)},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:i})=>V(i.yxmc)},{title:"招生类型",dataIndex:"zslx",show:!0,align:"center",render:({record:i})=>V(i.zslx)},{title:"专业类",dataIndex:"zyl",show:!0,align:"center",render:({record:i})=>V(i.zyl)},{title:"专业名称",dataIndex:"zymc",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:i})=>V(i.zymc)},{title:"最低分",dataIndex:"zdf",show:!0,align:"right",render:({record:i})=>V(i.zdf)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ue=R({name:"zsAddProHistoricalData"}),re=R({...ue,props:{data:{default:()=>({})}},emits:["close","success"],setup(i,{emit:k}){const b=i,U=O(),[q,f]=$(null),{form:d,formRef:C}=j(()=>({...b.data})),D={nf:{required:!0,message:"请输入年份"},sf:{required:!0,message:"请输入省份"},pc:{required:!0,message:"请输入批次"},kl:{required:!0,message:"请输入科类"},yxmc:{required:!0,message:"请输入院校名称"},zymc:{required:!0,message:"请输入专业名称"},zdfwc:{required:!0,message:"请输入最低分位次"},zdf:{required:!0,message:"请输入最低分"}},I=()=>{C.value.validate(g=>{g||(b.data.id?m("editProfessionHistory"):m("addProfessionHistory"))})},m=async g=>{const{err:a}=await T(()=>P[g](d.value),{before:()=>f("okLoading"),after:()=>f(null)});a||(k("success"),k("close"))};return(g,a)=>{const s=r("a-input"),n=r("a-form-item"),u=r("a-grid-item"),K=r("a-select"),_=r("a-input-number"),A=r("a-textarea"),y=r("a-grid"),H=r("a-form"),c=r("a-modal");return L(),N(c,{title:l(ae)("专业历史数据",!!b.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"60vw","align-center":!1,"mask-closable":!1,"ok-loading":l(q)==="okLoading",onCancel:a[24]||(a[24]=o=>k("close")),onOk:I},{default:t(()=>[e(H,{ref_key:"formRef",ref:C,model:l(d),"label-align":"left",size:"large","auto-label-width":"",rules:D},{default:t(()=>[e(y,{cols:2,"col-gap":24},{default:t(()=>[e(u,null,{default:t(()=>[e(n,{field:"nf",label:"年份:"},{default:t(()=>[e(s,{modelValue:l(d).nf,"onUpdate:modelValue":a[0]||(a[0]=o=>l(d).nf=o),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"sf",label:"省份:"},{default:t(()=>[e(K,{modelValue:l(d).sf,"onUpdate:modelValue":a[1]||(a[1]=o=>l(d).sf=o),modelModifiers:{trim:!0},placeholder:"请输入省份","allow-search":"",options:[...l(B),...l(U).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"pc",label:"批次:"},{default:t(()=>[e(s,{modelValue:l(d).pc,"onUpdate:modelValue":a[2]||(a[2]=o=>l(d).pc=o),modelModifiers:{trim:!0},placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"yxmc",label:"院校名称:"},{default:t(()=>[e(s,{modelValue:l(d).yxmc,"onUpdate:modelValue":a[3]||(a[3]=o=>l(d).yxmc=o),modelModifiers:{trim:!0},placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zymc",label:"专业名称:"},{default:t(()=>[e(s,{modelValue:l(d).zymc,"onUpdate:modelValue":a[4]||(a[4]=o=>l(d).zymc=o),modelModifiers:{trim:!0},placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"kl",label:"科类:"},{default:t(()=>[e(s,{modelValue:l(d).kl,"onUpdate:modelValue":a[5]||(a[5]=o=>l(d).kl=o),modelModifiers:{trim:!0},placeholder:"请输入科类"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zdf",label:"最低分:"},{default:t(()=>[e(_,{modelValue:l(d).zdf,"onUpdate:modelValue":a[6]||(a[6]=o=>l(d).zdf=o),modelModifiers:{trim:!0},placeholder:"请输入最低分"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zdfwc",label:"最低分位次:"},{default:t(()=>[e(_,{modelValue:l(d).zdfwc,"onUpdate:modelValue":a[7]||(a[7]=o=>l(d).zdfwc=o),modelModifiers:{trim:!0},placeholder:"请输入最低分位次"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zslx",label:"招生类型:"},{default:t(()=>[e(s,{modelValue:l(d).zslx,"onUpdate:modelValue":a[8]||(a[8]=o=>l(d).zslx=o),modelModifiers:{trim:!0},placeholder:"请输入招生类型"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zyl",label:"专业类:"},{default:t(()=>[e(s,{modelValue:l(d).zyl,"onUpdate:modelValue":a[9]||(a[9]=o=>l(d).zyl=o),modelModifiers:{trim:!0},placeholder:"请输入专业类"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"yxdm",label:"院校代码:"},{default:t(()=>[e(s,{modelValue:l(d).yxdm,"onUpdate:modelValue":a[10]||(a[10]=o=>l(d).yxdm=o),modelModifiers:{trim:!0},placeholder:"请输入院校代码"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"lqrs",label:"录取人数:"},{default:t(()=>[e(_,{modelValue:l(d).lqrs,"onUpdate:modelValue":a[11]||(a[11]=o=>l(d).lqrs=o),modelModifiers:{trim:!0},placeholder:"请输入录取人数"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zyz",label:"专业组:"},{default:t(()=>[e(s,{modelValue:l(d).zyz,"onUpdate:modelValue":a[12]||(a[12]=o=>l(d).zyz=o),modelModifiers:{trim:!0},placeholder:"请输入专业组"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zydm",label:"专业代码:"},{default:t(()=>[e(s,{modelValue:l(d).zydm,"onUpdate:modelValue":a[13]||(a[13]=o=>l(d).zydm=o),modelModifiers:{trim:!0},placeholder:"请输入专业代码"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"xk",label:"首选要求:"},{default:t(()=>[e(s,{modelValue:l(d).xk,"onUpdate:modelValue":a[14]||(a[14]=o=>l(d).xk=o),modelModifiers:{trim:!0},placeholder:"请输入首选要求"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zx",label:"再选科目:"},{default:t(()=>[e(s,{modelValue:l(d).zx,"onUpdate:modelValue":a[15]||(a[15]=o=>l(d).zx=o),modelModifiers:{trim:!0},placeholder:"请输入再选科目"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zymcOrg",label:"原始专业名称:"},{default:t(()=>[e(s,{modelValue:l(d).zymcOrg,"onUpdate:modelValue":a[16]||(a[16]=o=>l(d).zymcOrg=o),modelModifiers:{trim:!0},placeholder:"请输入原始专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"xkCombine",label:"选科编码级:"},{default:t(()=>[e(s,{modelValue:l(d).xkCombine,"onUpdate:modelValue":a[17]||(a[17]=o=>l(d).xkCombine=o),modelModifiers:{trim:!0},placeholder:"请输入选科编码级"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"pjf",label:"平均分:"},{default:t(()=>[e(_,{modelValue:l(d).pjf,"onUpdate:modelValue":a[18]||(a[18]=o=>l(d).pjf=o),modelModifiers:{trim:!0},placeholder:"请输入平均分"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"pjfwc",label:"平均分位次:"},{default:t(()=>[e(_,{modelValue:l(d).pjfwc,"onUpdate:modelValue":a[19]||(a[19]=o=>l(d).pjfwc=o),modelModifiers:{trim:!0},placeholder:"请输入平均分位次"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"zgf",label:"最高分:"},{default:t(()=>[e(_,{modelValue:l(d).zgf,"onUpdate:modelValue":a[20]||(a[20]=o=>l(d).zgf=o),modelModifiers:{trim:!0},placeholder:"请输入最高分"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"xkml",label:"学科门类:"},{default:t(()=>[e(s,{modelValue:l(d).xkml,"onUpdate:modelValue":a[21]||(a[21]=o=>l(d).xkml=o),modelModifiers:{trim:!0},placeholder:"请输入学科门类"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(n,{field:"cc",label:"层次/学历类别:"},{default:t(()=>[e(s,{modelValue:l(d).cc,"onUpdate:modelValue":a[22]||(a[22]=o=>l(d).cc=o),modelModifiers:{trim:!0},placeholder:"请输入层次/学历类别"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(n,{field:"zybz",label:"专业备注:"},{default:t(()=>[e(A,{modelValue:l(d).zybz,"onUpdate:modelValue":a[23]||(a[23]=o=>l(d).zybz=o),modelModifiers:{trim:!0},"auto-size":{minRows:8},placeholder:"请输入专业备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),se=R({name:"RecruitProHistoricalData"}),_e=R({...se,setup(i){const{warningModal:k}=oe(),[b,U]=$(null),q=O(),{form:f,resetForm:d}=j(()=>({sf:"",nf:"",yxmc:"",zymc:"",pc:"",kl:""}),()=>g()),{selectRow:C,columnsData:D,visibleColumnsData:I,tableBaseOptions:m,resetData:g,extendTableList:a,setSelectRow:s,changeTableColumn:n,changeTableSize:u}=Z(ne(),()=>y()),K=()=>{k(`确定删除选中的${m.selectedKeys.length}数据吗？`,async c=>{const{err:o}=await T(()=>P.deleteProfessionHistory({ids:m.selectedKeys}),{successMsg:"操作成功"});o||(c(!0),m.selectedKeys=[],y())})},{data:_,loading:A,initData:y}=ee(async()=>{const{res:c,err:o}=await T(()=>P.getProfessionHistoryList({...f.value,currentPage:m.pagination.current,pageSize:m.pagination.pageSize,pagingOrNot:"1"}));return o?[]:(m.pagination.total=c.data.totalCount,a(c==null?void 0:c.data.resultList))}),H=async c=>{const{err:o}=await T(()=>P.daoruProfessionHistory({path:c.at(-1).file}),{successMsg:"导入成功"});o||y()};return(c,o)=>{const h=r("a-select"),x=r("a-form-item"),w=r("a-grid-item"),M=r("a-input"),F=r("a-grid"),E=r("a-form"),W=r("icon-plus"),v=r("a-button"),G=r("icon-close"),J=r("icon-upload"),Q=r("a-upload"),X=r("a-space"),Y=r("a-table");return L(),le("div",null,[e(de,{fold:"","table-columns":l(D),"table-size":l(m).size,onResetSearch:l(d),onSearch:l(g),onChangeTableSize:l(u),onChangeTableColumn:l(n)},{form:t(({collapsed:z})=>[e(E,{model:l(f),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[e(F,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!z},{default:t(()=>[e(w,null,{default:t(()=>[e(x,{field:"sf",label:"省份:"},{default:t(()=>[e(h,{modelValue:l(f).sf,"onUpdate:modelValue":o[0]||(o[0]=p=>l(f).sf=p),placeholder:"请输入省份","allow-search":"",options:[...l(B),...l(q).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(x,{label:"年份:"},{default:t(()=>[e(M,{modelValue:l(f).nf,"onUpdate:modelValue":o[1]||(o[1]=p=>l(f).nf=p),placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(x,{label:"院校名称:"},{default:t(()=>[e(M,{modelValue:l(f).yxmc,"onUpdate:modelValue":o[2]||(o[2]=p=>l(f).yxmc=p),placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(x,{label:"专业名称:"},{default:t(()=>[e(M,{modelValue:l(f).zymc,"onUpdate:modelValue":o[3]||(o[3]=p=>l(f).zymc=p),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(x,{label:"批次:"},{default:t(()=>[e(M,{modelValue:l(f).pc,"onUpdate:modelValue":o[4]||(o[4]=p=>l(f).pc=p),placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(x,{label:"科类:"},{default:t(()=>[e(M,{modelValue:l(f).kl,"onUpdate:modelValue":o[5]||(o[5]=p=>l(f).kl=p),placeholder:"请输入科类"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:t(()=>[e(X,null,{default:t(()=>[e(v,{type:"outline",onClick:o[6]||(o[6]=z=>l(U)("zsAddProHistoricalData"))},{icon:t(()=>[e(W)]),default:t(()=>[S(" 新增 ")]),_:1}),e(v,{type:"outline",status:"danger",disabled:!l(m).selectedKeys.length,loading:l(b)==="删除",onClick:K},{icon:t(()=>[e(G)]),default:t(()=>[S(" 删除 ")]),_:1},8,["disabled","loading"]),e(Q,{"list-type":"text","auto-upload":!1,"show-cancel-button":!1,"show-link":!1,"show-file-list":!1,accept:".xlsx,.xls",onChange:H},{"upload-button":t(()=>[e(v,{type:"outline",loading:l(b)==="批量上传",status:"warning"},{icon:t(()=>[e(J)]),default:t(()=>[S(" 批量上传 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),table:t(()=>[e(Y,{"selected-keys":l(m).selectedKeys,"onUpdate:selectedKeys":o[7]||(o[7]=z=>l(m).selectedKeys=z),class:"zs-table","row-key":"id",data:l(_),"row-selection":l(m).rowSelection,bordered:l(m).bordered,pagination:l(m).pagination,size:l(m).size,columns:l(I),stripe:l(m).stripe,loading:l(A)},{operate:t(({record:z})=>[e(v,{type:"text",onClick:p=>l(s)(z,()=>l(U)("zsAddProHistoricalData"))},{default:t(()=>[S("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),l(b)==="zsAddProHistoricalData"?(L(),N(re,{key:0,data:l(C),onSuccess:l(y),onClose:o[8]||(o[8]=z=>l(s)({},()=>l(U)(null)))},null,8,["data","onSuccess"])):te("",!0)])}}});export{_e as default};
