import{d as O,g as A,h as R,i as X,r as d,o as h,l as L,w as a,a as l,b as e,m as I,n as Q,j as W,c as Y,e as q,p as Z,q as ee}from"./index-d007178a.js";import{f as b,c as le,_ as ae}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as $}from"./options-aafac76d.js";import{O as K}from"./otherData-17ba8805.js";import"./index-13860ba0.js";const te=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"年份",dataIndex:"nf",show:!0,align:"center",render:({record:u})=>b(u.nf)},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:u})=>b(u.sf)},{title:"批次-测概率/智能填报",dataIndex:"pcCgl",show:!0,align:"center",render:({record:u})=>b(u.pcCgl)},{title:"科类-信息填写",dataIndex:"klXxtx",show:!0,align:"center",render:({record:u})=>b(u.klXxtx)},{title:"科类-招生计划或专业",dataIndex:"klPlanData",show:!0,align:"center",render:({record:u})=>b(u.klPlanData)},{title:"批次-招生计划或专业",dataIndex:"pcPlanData",show:!0,align:"center",render:({record:u})=>b(u.pcPlanData)},{title:"分数线",dataIndex:"score",show:!0,align:"right",render:({record:u})=>b(u.score)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],oe=O({name:"zsAddProHistoricalData"}),ne=O({...oe,props:{data:{default:()=>({})}},emits:["close","success"],setup(u,{emit:y}){const V=u,D=A(),[v,s]=R(null),{form:n,formRef:P}=X(()=>({...V.data})),S={nf:{required:!0,message:"请输入年份"},sf:{required:!0,message:"请输入省份"},pcCgl:{required:!0,message:"请输入批次"},klXxtx:{required:!0,message:"请输入科类"},yxmc:{required:!0,message:"请输入院校名称"},zymc:{required:!0,message:"请输入专业名称"},zdfwc:{required:!0,message:"请输入最低分位次"},zdf:{required:!0,message:"请输入最低分"},klPlanData:{required:!0,message:"请输入招生数据-省份"},pcPlanData:{required:!0,message:"请输入招生数据-年份"},score:{required:!0,message:"请输入分数线"}},M=()=>{P.value.validate(_=>{_||(V.data.id?r("editNewOld"):r("addNewOld"))})},r=async _=>{const{err:o}=await I(()=>K[_](n.value),{before:()=>s("okLoading"),after:()=>s(null)});o||(y("success"),y("close"))};return(_,o)=>{const p=d("a-input-number"),i=d("a-form-item"),m=d("a-grid-item"),U=d("a-select"),w=d("a-input"),T=d("a-grid"),C=d("a-form"),f=d("a-modal");return h(),L(f,{title:e(le)("新老高考匹配关系",!!V.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"60vw","align-center":!1,"mask-closable":!1,"ok-loading":e(v)==="okLoading",onCancel:o[10]||(o[10]=t=>y("close")),onOk:M},{default:a(()=>[l(C,{ref_key:"formRef",ref:P,model:e(n),"label-align":"left",size:"large","auto-label-width":"",rules:S},{default:a(()=>[l(T,{cols:2,"col-gap":24},{default:a(()=>[l(m,null,{default:a(()=>[l(i,{field:"nf",label:"年份:"},{default:a(()=>[l(p,{modelValue:e(n).nf,"onUpdate:modelValue":o[0]||(o[0]=t=>e(n).nf=t),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"sf",label:"省份:"},{default:a(()=>[l(U,{modelValue:e(n).sf,"onUpdate:modelValue":o[1]||(o[1]=t=>e(n).sf=t),placeholder:"请输入省份","allow-search":"",options:[...e($),...e(D).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"pcCgl",label:"批次-测概率/智能填报:"},{default:a(()=>[l(w,{modelValue:e(n).pcCgl,"onUpdate:modelValue":o[2]||(o[2]=t=>e(n).pcCgl=t),modelModifiers:{trim:!0},placeholder:"请输入批次-测概率/智能填报"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"klXxtx",label:"科类-信息填写:"},{default:a(()=>[l(w,{modelValue:e(n).klXxtx,"onUpdate:modelValue":o[3]||(o[3]=t=>e(n).klXxtx=t),modelModifiers:{trim:!0},placeholder:"请输入科类-信息填写"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"pcPlanData",label:"批次-招生计划或专业:"},{default:a(()=>[l(w,{modelValue:e(n).pcPlanData,"onUpdate:modelValue":o[4]||(o[4]=t=>e(n).pcPlanData=t),modelModifiers:{trim:!0},placeholder:"请输入批次-招生计划或专业"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"klPlanData",label:"科类-招生计划或专业:"},{default:a(()=>[l(w,{modelValue:e(n).klPlanData,"onUpdate:modelValue":o[5]||(o[5]=t=>e(n).klPlanData=t),modelModifiers:{trim:!0},placeholder:"请输入科类-招生计划或专业"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"score",label:"分数线:"},{default:a(()=>[l(p,{modelValue:e(n).score,"onUpdate:modelValue":o[6]||(o[6]=t=>e(n).score=t),modelModifiers:{trim:!0},placeholder:"请输入分数线"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"zyf",label:"专业分:"},{default:a(()=>[l(p,{modelValue:e(n).zyf,"onUpdate:modelValue":o[7]||(o[7]=t=>e(n).zyf=t),modelModifiers:{trim:!0},placeholder:"请输入专业分"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"scoreOriginal",label:"原分数线:"},{default:a(()=>[l(p,{modelValue:e(n).scoreOriginal,"onUpdate:modelValue":o[8]||(o[8]=t=>e(n).scoreOriginal=t),modelModifiers:{trim:!0},placeholder:"请输入原分数线"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,null,{default:a(()=>[l(i,{field:"zyfOriginal",label:"原专业分:"},{default:a(()=>[l(p,{modelValue:e(n).zyfOriginal,"onUpdate:modelValue":o[9]||(o[9]=t=>e(n).zyfOriginal=t),modelModifiers:{trim:!0},placeholder:"请输入原专业分"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),de=O({name:"OtherNewOldData"}),ce=O({...de,setup(u){const{warningModal:y}=ee(),[V,D]=R(null),v=A(),{form:s,resetForm:n}=X(()=>({sf:"",nf:"",klXxtx:"",pcCgl:"",klPlanData:"",pcPlanData:""}),()=>_()),{selectRow:P,columnsData:S,visibleColumnsData:M,tableBaseOptions:r,resetData:_,extendTableList:o,setSelectRow:p,changeTableColumn:i,changeTableSize:m}=Q(te(),()=>C()),U=()=>{y(`确定删除选中的${r.selectedKeys.length}数据吗？`,async f=>{const{err:t}=await I(()=>K.deleteNewOld({ids:r.selectedKeys}),{successMsg:"操作成功"});t||(f(!0),r.selectedKeys=[],C())})},{data:w,loading:T,initData:C}=W(async()=>{const{res:f,err:t}=await I(()=>K.getNewOldList({...s.value,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return t?[]:(r.pagination.total=f.data.totalCount,o(f==null?void 0:f.data.list))});return(f,t)=>{const B=d("a-select"),x=d("a-form-item"),k=d("a-grid-item"),z=d("a-input"),E=d("a-grid"),F=d("a-form"),H=d("icon-plus"),N=d("a-button"),j=d("icon-close"),G=d("a-space"),J=d("a-table");return h(),Y("div",null,[l(ae,{fold:"","table-columns":e(S),"table-size":e(r).size,onResetSearch:e(n),onSearch:e(_),onChangeTableSize:e(m),onChangeTableColumn:e(i)},{form:a(({collapsed:g})=>[l(F,{model:e(s),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[l(E,{cols:{md:3,lg:3,xl:3,xxl:3},"col-gap":12,collapsed:!g},{default:a(()=>[l(k,null,{default:a(()=>[l(x,{field:"sf",label:"省份:"},{default:a(()=>[l(B,{modelValue:e(s).sf,"onUpdate:modelValue":t[0]||(t[0]=c=>e(s).sf=c),placeholder:"请输入省份","allow-search":"",options:[...e($),...e(v).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(x,{label:"年份:"},{default:a(()=>[l(z,{modelValue:e(s).nf,"onUpdate:modelValue":t[1]||(t[1]=c=>e(s).nf=c),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(x,{label:"批次-测概率/智能填报:"},{default:a(()=>[l(z,{modelValue:e(s).pcCgl,"onUpdate:modelValue":t[2]||(t[2]=c=>e(s).pcCgl=c),modelModifiers:{trim:!0},placeholder:"请输入批次-测概率/智能填报"},null,8,["modelValue"])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(x,{label:"科类-信息填写:"},{default:a(()=>[l(z,{modelValue:e(s).klXxtx,"onUpdate:modelValue":t[3]||(t[3]=c=>e(s).klXxtx=c),modelModifiers:{trim:!0},placeholder:"请输入科类-信息填写"},null,8,["modelValue"])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(x,{field:"klPlanData",label:"科类-招生计划或专业:"},{default:a(()=>[l(z,{modelValue:e(s).klPlanData,"onUpdate:modelValue":t[4]||(t[4]=c=>e(s).klPlanData=c),modelModifiers:{trim:!0},placeholder:"请输入科类-招生计划或专业"},null,8,["modelValue"])]),_:1})]),_:1}),l(k,null,{default:a(()=>[l(x,{field:"pcPlanData",label:"批次-招生计划或专业:"},{default:a(()=>[l(z,{modelValue:e(s).pcPlanData,"onUpdate:modelValue":t[5]||(t[5]=c=>e(s).pcPlanData=c),modelModifiers:{trim:!0},placeholder:"请输入批次-招生计划或专业"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:a(()=>[l(G,null,{default:a(()=>[l(N,{type:"outline",onClick:t[6]||(t[6]=g=>e(D)("zsAddNewOld"))},{icon:a(()=>[l(H)]),default:a(()=>[q(" 新增 ")]),_:1}),l(N,{type:"outline",status:"danger",disabled:!e(r).selectedKeys.length,loading:e(V)==="删除",onClick:U},{icon:a(()=>[l(j)]),default:a(()=>[q(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:a(()=>[l(J,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":t[7]||(t[7]=g=>e(r).selectedKeys=g),class:"zs-table","row-key":"id",data:e(w),"row-selection":e(r).rowSelection,bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(M),stripe:e(r).stripe,loading:e(T)},{operate:a(({record:g})=>[l(N,{type:"text",onClick:c=>e(p)(g,()=>e(D)("zsAddNewOld"))},{default:a(()=>[q("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(V)==="zsAddNewOld"?(h(),L(ne,{key:0,data:e(P),onSuccess:e(C),onClose:t[8]||(t[8]=g=>e(p)({},()=>e(D)(null)))},null,8,["data","onSuccess"])):Z("",!0)])}}});export{ce as default};
