import{d as S,g as J,h as q,i as A,D as F,r as d,o as D,l as P,w as a,a as t,b as e,m as E,n as G,j as H,c as Q,e as U,p as W,q as X}from"./index-d007178a.js";import{f as V,t as Y,c as Z,_ as ee}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{M as I}from"./major-b28f8c7d.js";import"./index-13860ba0.js";const te=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"专业名称",dataIndex:"zymc",show:!0,align:"center",render:({record:u})=>V(u.zymc)},{title:"岗位",dataIndex:"gw",show:!0,align:"center",render:({record:u})=>V(u.gw)},{title:"比例",dataIndex:"percent",show:!0,align:"center",render:({record:u})=>V(u.percent)},{title:"具体职位",dataIndex:"detailJob",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:u})=>V(u.detailJob)},{title:"所在行业",dataIndex:"hy",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:u})=>V(u.hy)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],le=S({name:"zsAddEmploymentPositions"}),ae=S({...le,props:{data:{default:()=>({})}},emits:["close","success"],setup(u,{emit:b}){const g=u;J();const[y,r]=q(null),{form:o,formRef:z}=A(()=>({...g.data})),k={gw:{required:!0,message:"请输入岗位"},zyId:{required:!0,message:"请输入专业ID"},percent:{required:!0,message:"请输入比例"},gwSort:{required:!0,message:"请输入排序"},zymc:{required:!0,message:"请输入专业名称"},detailJob:{required:!0,message:"请输入具体职位"},hy:{required:!0,message:"请输入所在行业"}},T=()=>{z.value.validate(m=>{m||(g.data.id?n("editMajorEmplgw"):n("addMajorEmplgw"))})},n=async m=>{const{err:s}=await E(()=>I[m](o.value),{before:()=>r("okLoading"),after:()=>r(null)});s||(b("success"),b("close"))};return F(()=>o.value.nBl,m=>{o.value.vBl=100-m}),(m,s)=>{const f=d("a-input"),p=d("a-form-item"),_=d("a-grid-item"),R=d("a-input-number"),h=d("a-textarea"),K=d("a-grid"),w=d("a-form"),c=d("a-modal");return D(),P(c,{title:e(Z)("就业岗位占比",!!g.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"80vw","align-center":!1,"mask-closable":!1,"ok-loading":e(y)==="okLoading",onCancel:s[6]||(s[6]=l=>b("close")),onOk:T},{default:a(()=>[t(w,{ref_key:"formRef",ref:z,model:e(o),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:a(()=>[t(K,{cols:2,"col-gap":24},{default:a(()=>[t(_,null,{default:a(()=>[t(p,{field:"zymc",label:"专业名称:"},{default:a(()=>[t(f,{modelValue:e(o).zymc,"onUpdate:modelValue":s[0]||(s[0]=l=>e(o).zymc=l),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(p,{field:"gw",label:"岗位:"},{default:a(()=>[t(f,{modelValue:e(o).gw,"onUpdate:modelValue":s[1]||(s[1]=l=>e(o).gw=l),placeholder:"请输入岗位"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(p,{field:"percent",label:"比例:"},{default:a(()=>[t(R,{modelValue:e(o).percent,"onUpdate:modelValue":s[2]||(s[2]=l=>e(o).percent=l),formatter:l=>e(Y)(l,""),parser:l=>l.replace(/,/g,""),precision:2,min:0,max:100,"hide-button":"",placeholder:"请输入比例"},null,8,["modelValue","formatter","parser","max"])]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(p,{field:"gwSort",label:"排序:"},{default:a(()=>[t(f,{modelValue:e(o).gwSort,"onUpdate:modelValue":s[3]||(s[3]=l=>e(o).gwSort=l),placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:24},{default:a(()=>[t(p,{field:"detailJob",label:"具体职位:"},{default:a(()=>[t(h,{modelValue:e(o).detailJob,"onUpdate:modelValue":s[4]||(s[4]=l=>e(o).detailJob=l),"auto-size":{minRows:4},placeholder:"请输入具体职位"},null,8,["modelValue"])]),_:1})]),_:1}),t(_,{span:24},{default:a(()=>[t(p,{field:"hy",label:"所在行业:"},{default:a(()=>[t(h,{modelValue:e(o).hy,"onUpdate:modelValue":s[5]||(s[5]=l=>e(o).hy=l),"auto-size":{minRows:4},placeholder:"请输入所在行业"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),oe=S({name:"MajorEmploymentPositions"}),ue=S({...oe,setup(u){const{warningModal:b}=X(),[g,y]=q(null);J();const{form:r,resetForm:o}=A(()=>({gw:"",zymc:"",hy:"",detailJob:""}),()=>m()),{selectRow:z,columnsData:k,visibleColumnsData:T,tableBaseOptions:n,resetData:m,extendTableList:s,setSelectRow:f,changeTableColumn:p,changeTableSize:_}=G(te(),()=>w()),R=()=>{b(`确定删除选中的${n.selectedKeys.length}数据吗？`,async c=>{const{err:l}=await E(()=>I.deleteMajorEmplgw({ids:n.selectedKeys}),{successMsg:"操作成功"});l||(c(!0),n.selectedKeys=[],w())})},{data:h,loading:K,initData:w}=H(async()=>{const{res:c,err:l}=await E(()=>I.getMajorEmplgwList({...r.value,currentPage:n.pagination.current,pageSize:n.pagination.pageSize,pagingOrNot:"1"}));return l?[]:(n.pagination.total=c.data.totalCount,s(c==null?void 0:c.data.resultList))});return(c,l)=>{const v=d("a-input"),x=d("a-form-item"),C=d("a-grid-item"),$=d("a-grid"),B=d("a-form"),j=d("icon-plus"),M=d("a-button"),N=d("icon-close"),L=d("a-space"),O=d("a-table");return D(),Q("div",null,[t(ee,{"table-columns":e(k),"table-size":e(n).size,onResetSearch:e(o),onSearch:e(m),onChangeTableSize:e(_),onChangeTableColumn:e(p)},{form:a(()=>[t(B,{model:e(r),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[t($,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:a(()=>[t(C,null,{default:a(()=>[t(x,{label:"专业名称:"},{default:a(()=>[t(v,{modelValue:e(r).zymc,"onUpdate:modelValue":l[0]||(l[0]=i=>e(r).zymc=i),placeholder:"请输入专业名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(x,{label:"就业岗位:"},{default:a(()=>[t(v,{modelValue:e(r).gw,"onUpdate:modelValue":l[1]||(l[1]=i=>e(r).gw=i),placeholder:"请输入就业岗位"},null,8,["modelValue"])]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(x,{label:"行业:"},{default:a(()=>[t(v,{modelValue:e(r).hy,"onUpdate:modelValue":l[2]||(l[2]=i=>e(r).hy=i),placeholder:"请输入行业"},null,8,["modelValue"])]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(x,{label:"具体职位:"},{default:a(()=>[t(v,{modelValue:e(r).detailJob,"onUpdate:modelValue":l[3]||(l[3]=i=>e(r).detailJob=i),placeholder:"请输入具体职位"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:a(()=>[t(L,null,{default:a(()=>[t(M,{type:"outline",onClick:l[4]||(l[4]=i=>e(y)("zsAddEmploymentPositions"))},{icon:a(()=>[t(j)]),default:a(()=>[U(" 新增 ")]),_:1}),t(M,{type:"outline",status:"danger",disabled:!e(n).selectedKeys.length,loading:e(g)==="删除",onClick:R},{icon:a(()=>[t(N)]),default:a(()=>[U(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:a(()=>[t(O,{"selected-keys":e(n).selectedKeys,"onUpdate:selectedKeys":l[5]||(l[5]=i=>e(n).selectedKeys=i),class:"zs-table","row-key":"id",data:e(h),"row-selection":e(n).rowSelection,bordered:e(n).bordered,pagination:e(n).pagination,size:e(n).size,columns:e(T),stripe:e(n).stripe,loading:e(K)},{operate:a(({record:i})=>[t(M,{type:"text",onClick:ne=>e(f)(i,()=>e(y)("zsAddEmploymentPositions"))},{default:a(()=>[U("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(g)==="zsAddEmploymentPositions"?(D(),P(ae,{key:0,data:e(z),onSuccess:e(w),onClose:l[6]||(l[6]=i=>e(f)({},()=>e(y)(null)))},null,8,["data","onSuccess"])):W("",!0)])}}});export{ue as default};
