import{a as G,n as $,d as x,E as F,s as M,r as n,o as f,l as y,w as a,g as t,c as e,i as V,k as Z,_ as E,q as te,v as ae,x as le,y as oe,e as q,z as I,h as S,F as j,f as ne}from"./index-8a2cb146.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{B as K}from"./bid-5ab5e053.js";import"./index-2bbe694f.js";const ie=()=>{const{getDictionaryItem:D}=G();return[{title:"营业部名称",dataIndex:"departName",show:!0,align:"center",render:({record:i})=>$(i.departName)},{title:"申请人",show:!0,align:"center",render:({record:i})=>$(i.applyAccount)},{title:"申请人身份证号",show:!0,align:"center",render:({record:i})=>$(i.applyIdNumber)},{title:"申领文件名称",show:!0,align:"center",render:({record:i})=>$(i.applyFileName)},{title:"是否加盖公章",show:!0,align:"center",render:({record:i})=>$(i.isOfficialSeal==="1"?"是":"否")},{title:"用途",show:!0,align:"center",render:({record:i})=>$(i.useDesc)},{title:"状态",show:!0,align:"center",render:({record:i})=>$(D("bidDocApplyState",i.state).detailName)},{title:"操作",width:200,slotName:"operate",show:!0,align:"center"}]},de=x({name:"ZsAddRecord"}),re=x({...de,emits:["close","success"],setup(D,{emit:i}){const g=i,[p,m]=F(null),{form:d,formRef:s}=M(()=>({applyFileName:"",isOfficialSeal:"1",useDesc:"",fileList:[]})),v={applyFileName:{required:!0,message:"请输入申请文件名"},useDesc:{required:!0,message:"请输入用途"},fileList:{required:!0,message:"请上传用印资料"}},k=()=>{s.value.validate(b=>{b||U()})},U=async()=>{const{err:b}=await Z(()=>K.addRecord({...d.value,fileList:d.value.fileList.map(l=>l.file)}),{before:()=>m("okLoading"),after:()=>m(""),successMsg:"操作成功"});b||(g("success"),g("close"))};return(b,l)=>{const r=n("a-input"),w=n("a-form-item"),_=n("a-radio"),A=n("a-radio-group"),N=n("a-textarea"),C=n("a-upload"),O=n("a-form"),R=n("a-alert"),L=n("a-modal");return f(),y(L,{width:"600px",top:"10%","unmount-on-close":"",visible:"","align-center":!1,title:"申请投标","mask-closable":!1,"ok-loading":e(p)==="okLoading",onCancel:l[4]||(l[4]=o=>g("close")),onOk:k},{default:a(()=>[t(O,{ref_key:"formRef",ref:s,model:e(d),"label-align":"left",size:"large","auto-label-width":"",rules:v},{default:a(()=>[t(w,{field:"applyFileName",label:"申请文件名:"},{default:a(()=>[t(r,{modelValue:e(d).applyFileName,"onUpdate:modelValue":l[0]||(l[0]=o=>e(d).applyFileName=o),modelModifiers:{trim:!0},placeholder:"请输入申请文件名"},null,8,["modelValue"])]),_:1}),t(w,{field:"isOfficialSeal",label:"是否加盖公章:"},{default:a(()=>[t(A,{modelValue:e(d).isOfficialSeal,"onUpdate:modelValue":l[1]||(l[1]=o=>e(d).isOfficialSeal=o)},{default:a(()=>[t(_,{value:"1"},{default:a(()=>[V("是")]),_:1}),t(_,{value:"0"},{default:a(()=>[V("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(w,{field:"useDesc",label:"用途:"},{default:a(()=>[t(N,{modelValue:e(d).useDesc,"onUpdate:modelValue":l[2]||(l[2]=o=>e(d).useDesc=o),modelModifiers:{trim:!0},placeholder:"请输入用途"},null,8,["modelValue"])]),_:1}),t(w,{field:"fileList",label:"用印资料上传:"},{default:a(()=>[t(C,{"file-list":e(d).fileList,"onUpdate:fileList":l[3]||(l[3]=o=>e(d).fileList=o),"auto-upload":!1,accept:".pdf",limit:1,"show-retry-button":!1},null,8,["file-list"])]),_:1})]),_:1},8,["model"]),t(R,{title:"提示"},{default:a(()=>[V("由申请人根据业务需要申领上述资料，用于招徕旅游业务，上述业务已由申请人审核认可并全面负责上述相关业务的执行，因上述业务签订的相关合同所产生的一切经济和法律责任，均由申请人承担。")]),_:1})]),_:1},8,["ok-loading"])}}});const ue=E(re,[["__scopeId","data-v-8422d7d8"]]),ce=x({name:"ZsUploadApplyInformation"}),pe=x({...ce,props:{data:{default:()=>({})}},emits:["close","success"],setup(D,{emit:i}){const g=D,p=i,[m,d]=F(null),{form:s,formRef:v}=M(()=>({fileList:[]})),k={fileList:{required:!0,message:"请上传申领资料"}},U=()=>{v.value.validate(l=>{l||b()})},b=async()=>{const{err:l}=await Z(()=>K.uploadApplyInformationFile({id:g.data.id,fileList:s.value.fileList.map(r=>r.file)}),{before:()=>d("okLoading"),after:()=>d(""),successMsg:"操作成功"});l||(p("success"),p("close"))};return(l,r)=>{const w=n("a-upload"),_=n("a-form-item"),A=n("a-form"),N=n("a-modal");return f(),y(N,{width:"600px",top:"10%","unmount-on-close":"",visible:"","align-center":!1,title:"上传申领资料","mask-closable":!1,"ok-loading":e(m)==="okLoading",onCancel:r[1]||(r[1]=C=>p("close")),onOk:U},{default:a(()=>[t(A,{ref_key:"formRef",ref:v,model:e(s),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:a(()=>[t(_,{field:"fileList",label:"申领资料上传:"},{default:a(()=>[t(w,{"file-list":e(s).fileList,"onUpdate:fileList":r[0]||(r[0]=C=>e(s).fileList=C),"auto-upload":!1,accept:".pdf",limit:1,"show-retry-button":!1},null,8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["ok-loading"])}}});const me=E(pe,[["__scopeId","data-v-dafbfb6a"]]),fe=x({name:"ZsUploadBid"}),_e=x({...fe,props:{data:{default:()=>({})}},emits:["close","success"],setup(D,{emit:i}){const g=D,p=i,[m,d]=F(null),{form:s,formRef:v}=M(()=>({fileList:[]})),k={fileList:{required:!0,message:"请上传申领资料"}},U=()=>{v.value.validate(l=>{l||b()})},b=async()=>{const{err:l}=await Z(()=>K.uploadBidFile({id:g.data.id,fileList:s.value.fileList.map(r=>r.file)}),{before:()=>d("okLoading"),after:()=>d(""),successMsg:"操作成功"});l||(p("success"),p("close"))};return(l,r)=>{const w=n("a-upload"),_=n("a-form-item"),A=n("a-form"),N=n("a-modal");return f(),y(N,{width:"600px",top:"10%","unmount-on-close":"",visible:"","align-center":!1,title:"上传电子标书","mask-closable":!1,"ok-loading":e(m)==="okLoading",onCancel:r[1]||(r[1]=C=>p("close")),onOk:U},{default:a(()=>[t(A,{ref_key:"formRef",ref:v,model:e(s),"label-align":"left",size:"large","auto-label-width":"",rules:k},{default:a(()=>[t(_,{field:"fileList",label:"申领资料上传:"},{default:a(()=>[t(w,{"file-list":e(s).fileList,"onUpdate:fileList":r[0]||(r[0]=C=>e(s).fileList=C),"auto-upload":!1,accept:".pdf",limit:1,"show-retry-button":!1},null,8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["ok-loading"])}}});const ge=E(_e,[["__scopeId","data-v-29605bb4"]]),be=ne("span",{class:"mx-3"},"-",-1),ye=x({name:"BidRecordsManage"}),Le=x({...ye,setup(D){const{vAuthority:i,userInfo:g}=te(),[p,m]=F(null),{getDictionaryInfo:d}=G(),{form:s,resetForm:v}=M(()=>({applyFileName:"",departName:"",departCode:"",createTimeStart:"",createTimeEnd:"",state:""}),()=>r()),{selectRow:k,columnsData:U,visibleColumnsData:b,tableBaseOptions:l,resetData:r,extendTableList:w,setSelectRow:_,changeTableColumn:A,changeTableSize:N}=ae(ie(),()=>R()),{data:C,loading:O,initData:R}=le(async()=>{const{res:L,err:o}=await Z(()=>K.getRecordList({...s.value,currentPage:l.pagination.current,pageSize:l.pagination.pageSize}));if(!o)return l.pagination.total=L.data.totalCount,L==null?void 0:L.data.list});return oe(R),(L,o)=>{const h=n("a-input"),z=n("a-form-item"),B=n("a-grid-item"),H=n("a-select"),P=n("a-date-picker"),J=n("a-grid"),Q=n("a-form"),W=n("icon-plus"),T=n("a-button"),X=n("a-space"),Y=n("a-button-group"),ee=n("a-table");return f(),q("div",null,[t(se,{fold:"","table-columns":e(U),"table-size":e(l).size,onResetSearch:e(v),onSearch:e(r),onChangeTableSize:e(N),onChangeTableColumn:e(A)},{form:a(({collapsed:u})=>[t(Q,{model:e(s),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[t(J,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!u},{default:a(()=>[t(B,null,{default:a(()=>[t(z,{label:"申领文件名:"},{default:a(()=>[t(h,{modelValue:e(s).applyFileName,"onUpdate:modelValue":o[0]||(o[0]=c=>e(s).applyFileName=c),placeholder:"请输入申领文件名"},null,8,["modelValue"])]),_:1})]),_:1}),t(B,null,{default:a(()=>[t(z,{label:"营业部名称:"},{default:a(()=>[t(h,{modelValue:e(s).departName,"onUpdate:modelValue":o[1]||(o[1]=c=>e(s).departName=c),placeholder:"请输入营业部名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(B,null,{default:a(()=>[t(z,{label:"部门代码:"},{default:a(()=>[t(h,{modelValue:e(s).departCode,"onUpdate:modelValue":o[2]||(o[2]=c=>e(s).departCode=c),placeholder:"请输入营业部代码"},null,8,["modelValue"])]),_:1})]),_:1}),t(B,null,{default:a(()=>[t(z,{label:"状态:"},{default:a(()=>[t(H,{modelValue:e(s).state,"onUpdate:modelValue":o[3]||(o[3]=c=>e(s).state=c),options:e(d)("bidDocApplyState"),"field-names":{label:"detailName",value:"detailCode"},placeholder:"请选择状态"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(B,null,{default:a(()=>[t(z,{label:"申请日期:"},{default:a(()=>[t(P,{modelValue:e(s).createTimeStart,"onUpdate:modelValue":o[4]||(o[4]=c=>e(s).createTimeStart=c),class:"flex1",placeholder:"申请开始日期"},null,8,["modelValue"]),be,t(P,{modelValue:e(s).createTimeEnd,"onUpdate:modelValue":o[5]||(o[5]=c=>e(s).createTimeEnd=c),class:"flex1",placeholder:"申请截止日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:a(()=>[t(X,null,{default:a(()=>[e(g).departType==="1"?I((f(),y(T,{key:0,type:"outline",status:"warning",onClick:o[6]||(o[6]=u=>e(m)("ZsAddRecord"))},{default:a(()=>[t(W),V(" 申请投标 ")]),_:1})),[[e(i),"BidRecordsManageAdd"]]):S("",!0)]),_:1})]),table:a(()=>[t(ee,{"selected-keys":e(l).selectedKeys,"onUpdate:selectedKeys":o[7]||(o[7]=u=>e(l).selectedKeys=u),class:"zs-table","row-key":"id",data:e(C),"row-selection":e(l).rowSelection,bordered:e(l).bordered,pagination:e(l).pagination,size:e(l).size,columns:e(b),stripe:e(l).stripe,loading:e(O)},{operate:a(({record:u})=>[t(Y,null,{default:a(()=>[t(T,{type:"text",status:"success",onClick:c=>L.$router.push(`/bid/recordsManage/operate?id=${u.id}`)},{default:a(()=>[V("详情")]),_:2},1032,["onClick"]),e(g).departType==="0"?(f(),q(j,{key:0},[u.state==="0"?I((f(),y(T,{key:0,type:"text",onClick:c=>L.$router.push(`/bid/recordsManage/operate?id=${u.id}&isExamine=true`)},{default:a(()=>[V("审核")]),_:2},1032,["onClick"])),[[e(i),"BidRecordsManageExamine"]]):S("",!0),u.state==="2"?I((f(),y(T,{key:1,type:"text",onClick:c=>e(_)(u,()=>e(m)("ZsUploadApplyInformation"))},{default:a(()=>[V("上传申领资料")]),_:2},1032,["onClick"])),[[e(i),"BidRecordsManageUploadApplyInformation"]]):S("",!0)],64)):S("",!0),e(g).departType==="1"?(f(),q(j,{key:1},[u.state==="3"?I((f(),y(T,{key:0,type:"text",onClick:c=>e(_)(u,()=>e(m)("ZsUploadBid"))},{default:a(()=>[V("上传电子标书")]),_:2},1032,["onClick"])),[[e(i),"BidRecordsManageBid"]]):S("",!0)],64)):S("",!0)]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(p)==="ZsAddRecord"?(f(),y(ue,{key:0,data:e(k),onClose:o[8]||(o[8]=u=>e(_)({},()=>e(m)(""))),onSuccess:e(R)},null,8,["data","onSuccess"])):S("",!0),e(p)==="ZsUploadApplyInformation"?(f(),y(me,{key:1,data:e(k),onClose:o[9]||(o[9]=u=>e(_)({},()=>e(m)(""))),onSuccess:e(R)},null,8,["data","onSuccess"])):S("",!0),e(p)==="ZsUploadBid"?(f(),y(ge,{key:2,data:e(k),onClose:o[10]||(o[10]=u=>e(_)({},()=>e(m)(""))),onSuccess:e(R)},null,8,["data","onSuccess"])):S("",!0)])}}});export{Le as default};
