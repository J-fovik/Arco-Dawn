import{a as Q,n as p,X as H,p as g,O as _,d as U,q as J,E as W,s as ee,v as te,M as ae,x as le,y as oe,r as d,o as h,e as ne,g as t,w as l,c as e,i as f,t as k,z as se,l as D,h as T,f as ie,k as v}from"./index-8a2cb146.js";import{_ as re}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_name_ZsPreviewSupplier_lang-c781d4ca.js";import{Q as z}from"./quitGroup-313e3abb.js";import"./index-2bbe694f.js";const de=()=>{const{getDictionaryItem:b}=Q();return[{title:"编号",dataIndex:"routeId",show:!0,align:"center",render:({record:a})=>p(a.routeId)},{title:"团号",show:!0,align:"center",ellipsis:!0,tooltip:!0,slotName:"signupNo"},{title:"线路名称",dataIndex:"routeName",show:!0,align:"center",ellipsis:!0,tooltip:!0,render:({record:a})=>p(a.routeName)},{title:"报名营业部",dataIndex:"departName",show:!0,align:"center",ellipsis:!0,tooltip:!0,render:({record:a})=>p(a.departName)},{title:"供应商名称",slotName:"supName",show:!0,ellipsis:!0,tooltip:!0,align:"center"},{title:"创建日期",dataIndex:"createTime",show:!0,align:"center",render:({record:a})=>p(H(a.createTime,"YYYY-MM-DD"))},{title:"退团人数",dataIndex:"outNum",show:!0,align:"right",render:({record:a})=>p(a.outNum)},{title:"订单同行总费用",dataIndex:"supsigCost",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},_(`${a.supsigCost??"0"}`))},{title:"退团同行总金额",dataIndex:"settleTotal",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},_(`${a.settleTotal??"0"}`))},{title:"订单剩余金额",dataIndex:"sigRemainingCost",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},_(`${a.sigRemainingCost??"0"}`))},{title:"退团保险费",dataIndex:"inssettleTotal",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},_(`${a.inssettleTotal??"0"}`))},{title:"退团类型",dataIndex:"signoutType",show:!0,align:"center",render:({record:a})=>p(b("new_quit_type",a.signoutType).detailName)},{title:"退团状态",dataIndex:"state",show:!0,align:"center",render:({record:a})=>p(b("signoutOrderState",a.state).detailName)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"left"}]},pe=ie("span",{class:"mx-3"},"-",-1),me=U({name:"QuitGroupBusinessQuit"}),he=U({...me,setup(b){const{getDictionaryInfo:a}=Q(),{vAuthority:R}=J(),[B,N]=W(null),{form:i,resetForm:q}=ee(()=>({groupId:"",routeName:"",supName:"",state:"",startDate:"",endDate:""}),()=>w()),{selectRow:G,columnsData:A,visibleColumnsData:P,tableBaseOptions:u,resetData:w,setSelectRow:x,extendTableList:K,changeTableColumn:L,changeTableSize:O}=te(de(),()=>C()),{data:Y}=ae(async()=>{const{res:r}=await v(()=>z.getSupplierSelectList({}));return(r==null?void 0:r.data)??[]},[]),{data:M,loading:E,initData:C}=le(async()=>{const{res:r,err:n}=await v(()=>z.getBusinessQuitGroupList({...i.value,currentPage:u.pagination.current,pageSize:u.pagination.pageSize,pagingOrNot:"1"}));return n?[]:(u.pagination.total=r.data.totalCount,K(r==null?void 0:r.data.signoutRecordList))});return oe(C),(r,n)=>{const I=d("a-input"),m=d("a-form-item"),c=d("a-grid-item"),y=d("a-select"),$=d("a-date-picker"),F=d("a-grid"),Z=d("a-form"),S=d("a-link"),V=d("a-button"),X=d("a-button-group"),j=d("a-table");return h(),ne("div",null,[t(re,{fold:"","table-columns":e(A),"table-size":e(u).size,onResetSearch:e(q),onSearch:e(w),onChangeTableSize:e(O),onChangeTableColumn:e(L)},{form:l(({collapsed:o})=>[t(Z,{model:e(i),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[t(F,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!o},{default:l(()=>[t(c,null,{default:l(()=>[t(m,{field:"groupId",label:"团号:"},{default:l(()=>[t(I,{modelValue:e(i).groupId,"onUpdate:modelValue":n[0]||(n[0]=s=>e(i).groupId=s),placeholder:"请输入团号"},null,8,["modelValue"])]),_:1})]),_:1}),t(c,null,{default:l(()=>[t(m,{field:"routeName",label:"线路名称:"},{default:l(()=>[t(I,{modelValue:e(i).routeName,"onUpdate:modelValue":n[1]||(n[1]=s=>e(i).routeName=s),placeholder:"请输入线路名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(c,null,{default:l(()=>[t(m,{field:"supName",label:"供应商名称:"},{default:l(()=>[t(y,{modelValue:e(i).supName,"onUpdate:modelValue":n[2]||(n[2]=s=>e(i).supName=s),options:e(Y),"allow-search":"","field-names":{label:"supName",value:"supName"},"virtual-list-props":{height:200},placeholder:"请选择"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(c,null,{default:l(()=>[t(m,{field:"code",label:"订单状态:"},{default:l(()=>[t(y,{modelValue:e(i).state,"onUpdate:modelValue":n[3]||(n[3]=s=>e(i).state=s),options:e(a)("new_quit_group_state"),"field-names":{label:"detailName",value:"detailCode"},placeholder:"请选择"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(c,null,{default:l(()=>[t(m,{label:"出团日期:"},{default:l(()=>[t($,{modelValue:e(i).startDate,"onUpdate:modelValue":n[4]||(n[4]=s=>e(i).startDate=s),class:"flex1",placeholder:"出团日期(开始)"},null,8,["modelValue"]),pe,t($,{modelValue:e(i).endDate,"onUpdate:modelValue":n[5]||(n[5]=s=>e(i).endDate=s),class:"flex1",placeholder:"出团日期(结束)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),table:l(()=>[t(j,{"selected-keys":e(u).selectedKeys,"onUpdate:selectedKeys":n[6]||(n[6]=o=>e(u).selectedKeys=o),class:"zs-table","row-key":"id",data:e(M),"row-selection":e(u).rowSelection,bordered:e(u).bordered,pagination:e(u).pagination,size:e(u).size,columns:e(P),stripe:e(u).stripe,loading:e(E)},{signupNo:l(({record:o})=>[t(S,{onClick:s=>r.$router.push(`/quitGroup/businessQuit/confirm?id=${o.id}&groupId=${o.signupNo}&state=${o.state}`)},{default:l(()=>[f(k(o.signupNo),1)]),_:2},1032,["onClick"])]),supName:l(({record:o})=>[t(S,{onClick:s=>e(x)({id:o.supId},()=>e(N)("ZsPreviewSupplier"))},{default:l(()=>[f(k(o.supName),1)]),_:2},1032,["onClick"])]),operate:l(({record:o})=>[t(X,null,{default:l(()=>[t(V,{type:"text",status:"success",onClick:s=>r.$router.push(`/quitGroup/businessQuit/operate?id=${o.id}&groupId=${o.signupNo}&state=${o.state}`)},{default:l(()=>[f("详情")]),_:2},1032,["onClick"]),o.state==="01"?se((h(),D(V,{key:0,type:"text",onClick:s=>r.$router.push(`/quitGroup/businessQuit/confirm?id=${o.id}&groupId=${o.signupNo}&state=${o.state}&isConfirm=true`)},{default:l(()=>[f("营业部确定")]),_:2},1032,["onClick"])),[[e(R),"QuitGroupPlatformQuitConfirm"]]):T("",!0)]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(B)==="ZsPreviewSupplier"?(h(),D(ue,{key:0,data:e(G),onClose:n[7]||(n[7]=o=>e(x)({},()=>e(N)("")))},null,8,["data"])):T("",!0)])}}});export{he as default};
