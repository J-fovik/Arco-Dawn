import{n as f,p as m,O as y,d as N,u as F,C as E,E as A,b as V,k as h,r as c,o as x,l as b,w as t,g as r,i as n,t as o,c as a,X as w,h as D,f as M,e as Z,F as j,L as z,A as K}from"./index-8a2cb146.js";import{Z as X}from"./index-2bbe694f.js";import{_ as G}from"./zsPreviewDumplingDate.vue_vue_type_script_setup_true_name_ZsPreviewDumplingDate_lang-410dbbba.js";import{O as I}from"./order-70291d37.js";import"./zsRoutePrice-e3a5f38b.js";import"./line-7661aa01.js";const H=e=>{if(e.otherType==="1"){if(e.diffPrice==="1")switch(e.priceType){case"0":return"成人单房差其他价格";case"3":return"老人单房差其他价格";case"6":return"儿童单房差其他价格";case"10":return"占床儿童单房差其他价格";default:return"未知单房差其他价格"}if(e.diffPrice==="0")switch(e.priceType){case"0":return"成人其他价格";case"3":return"老人其他价格";case"6":return"儿童其他价格";case"10":return"占床儿童其他价格";default:return"未知其他价格"}}if(e.otherType==="0"){if(e.diffPrice==="1")switch(e.priceType){case"0":return"成人单房差价格";case"3":return"老人单房差价格";case"6":return"儿童单房差价格";case"10":return"占床儿童单房差价格";default:return"未知单房差价格"}if(e.diffPrice==="0")switch(e.priceType){case"0":return"成人同行价格";case"3":return"老人同行价格";case"6":return"儿童同行价格";case"10":return"占床儿童同行价格";default:return"未知同行价格"}}return"未知价格"},J=[{title:"姓名",dataIndex:"name",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:e})=>f(e.name)},{title:"性别",dataIndex:"gender",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:e})=>f(e.gender)},{title:"联系电话",dataIndex:"phone",show:!0,align:"center",render:({record:e})=>f(e.phone)},{title:"证件类型",dataIndex:"IDType",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:e})=>f(e.IDType)},{title:"证件号码",dataIndex:"IDNumber",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:e})=>f(e.IDNumber)},{title:"年龄",dataIndex:"age",show:!0,align:"right",render:({record:e})=>f(e.age)},{title:"类别",dataIndex:"priceType",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:e})=>f(e.name==="总计"?"-":H(e))},{title:"订单同行价",dataIndex:"signCost",show:!0,align:"right",render:({record:e})=>m("span",{class:"text-red text-price"},y(`${e.signCost??0}`))},{title:"单房差同行价",dataIndex:"diffFree",show:!0,align:"right",render:({record:e})=>m("span",{class:"text-red text-price"},y(`${e.diffFree??0}`))},{title:"其他价格",dataIndex:"otherFee",show:!0,align:"right",render:({record:e})=>m("span",{class:"text-red text-price"},y(`${e.otherFee??0}`))},{title:"订单同行总费用",dataIndex:"supsigCost",show:!0,align:"right",render:({record:e})=>m("span",{class:"text-red text-price"},y(`${e.supsigCost??0}`))}],Q=M("div",{style:{height:"100px"}},null,-1),U={class:"orderSubmit-footer box-flex jc-fe"},W=N({name:"OrderSupplierManageOperate"}),se=N({...W,setup(e){const p=F(),{jumpTabName:v}=E(),{warningModal:R}=K(),[T,_]=A(null),{data:l}=V(async()=>{const{res:u,err:s}=await h(()=>I.getSupplierListDetail({groupId:p.query.groupId,mark:"0",routeId:p.query.routeId}));return s?{}:u==null?void 0:u.data},{tourList:[],travelRoute:{}}),O=async()=>{const{err:u,res:s}=await h(()=>I.exportTourists({groupId:p.query.groupId}),{after:()=>_(""),before:()=>_("导出游客")});u||z(s,`${p.query.groupId}_游客信息.xls`)},q=async()=>{R("确定通过当前订单吗？",async u=>{const{err:s}=await h(()=>I.confirmLineOrder({groupId:p.query.groupId}),{successMsg:"操作成功"});u(!0),!s&&v()})},L=async()=>{R("确定拒绝当前订单吗？",async u=>{const{err:s}=await h(()=>I.refuseLineOrder({groupId:p.query.groupId}),{successMsg:"操作成功"});u(!0),!s&&v()})};return(u,s)=>{const i=c("a-tag"),d=c("a-descriptions-item"),P=c("a-descriptions"),g=c("a-button"),C=c("a-space"),k=c("a-card"),Y=c("a-alert"),S=c("a-table"),B=c("a-typography-title");return x(),b(X,null,{default:t(()=>[r(k,{title:"基本信息",bordered:!1,class:"general-card"},{default:t(()=>[r(P,{column:{xs:1,md:2,lg:3},size:"large"},{default:t(()=>[r(d,{label:"线路名称："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.routeName),1)]),_:1})]),_:1}),r(d,{label:"供应商名称："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.supName),1)]),_:1})]),_:1}),r(d,{label:"团号："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.groupId),1)]),_:1})]),_:1}),r(d,{label:"所属地区："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.areaName),1)]),_:1})]),_:1}),r(d,{label:"目的地："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.arrival),1)]),_:1})]),_:1}),r(d,{label:"集合地点："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(f)(a(l).travelRoute.aggregatePlace,"--")),1)]),_:1})]),_:1}),r(d,{label:"旅行时间："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(w)(a(l).travelRoute.startDate,"YYYY-MM-DD"))+"至"+o(a(w)(a(l).travelRoute.endDate,"YYYY-MM-DD")),1)]),_:1})]),_:1}),r(d,{label:"旅行天数/天："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.travelDays),1)]),_:1})]),_:1}),r(d,{label:"旅行类型："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.travelType),1)]),_:1})]),_:1}),r(d,{label:"成团类别："},{default:t(()=>[r(i,null,{default:t(()=>[n(o(a(l).travelRoute.groupType==1?"单团":"散客"),1)]),_:1})]),_:1})]),_:1}),r(C,{class:"margin-top"},{default:t(()=>[r(g,{type:"primary",onClick:s[0]||(s[0]=$=>a(_)("ZsPreviewDumplingDate"))},{default:t(()=>[n("信息价格")]),_:1}),r(g,{type:"primary",loading:a(T)==="导出游客",onClick:O},{default:t(()=>[n("导出游客")]),_:1},8,["loading"]),a(p).query.isExamine?D("",!0):(x(),b(g,{key:0,type:"primary",onClick:s[1]||(s[1]=$=>u.$router.push(`/line/addTourismManage/operate?mark=2&id=${a(l).travelRoute.routeId}&isReadOnly=true&name=${u.$route.name}`))},{default:t(()=>[n("查看行程")]),_:1}))]),_:1})]),_:1}),r(k,{title:"游客信息",bordered:!1,class:"general-card margin-top"},{default:t(()=>[r(Y,null,{default:t(()=>[n(" 当前订单总计是每个游客价格的汇总，若订单有过退团或订单调账操作，可能与实际订单金额有出入，请以订单管理页面中金额为准。 ")]),_:1}),r(S,{size:"large",class:"margin-top",columns:a(J),data:a(l).tourList,pagination:!1,bordered:!1},null,8,["columns","data"]),r(B,{heading:6,class:"box-flex jc-fe margin-top"},{default:t(()=>[n("游客共计： "+o(a(l).tourList.length-1)+"位",1)]),_:1})]),_:1}),a(T)==="ZsPreviewDumplingDate"?(x(),b(G,{key:0,data:{id:a(l).travelRoute.routeId},"default-time-arr":[a(w)(a(l).travelRoute.startDate)],onClose:s[2]||(s[2]=$=>a(_)(""))},null,8,["data","default-time-arr"])):D("",!0),Q,M("div",U,[r(C,null,{default:t(()=>[a(p).query.isExamine?(x(),Z(j,{key:0},[r(g,{status:"success",onClick:q},{default:t(()=>[n("通过")]),_:1}),r(g,{status:"danger",onClick:L},{default:t(()=>[n("拒绝")]),_:1})],64)):D("",!0),r(g,{onClick:s[3]||(s[3]=()=>a(v)())},{default:t(()=>[n("返回")]),_:1})]),_:1})])]),_:1})}}});export{se as default};
