import{d as F,s as re,a1 as te,M as fe,r as n,o as h,l as S,w as a,g as e,i as c,c as l,e as G,j as Y,F as K,k as W,S as De,t as oe,a as Te,_ as se,u as pe,R as ne,D as de,E as ce,f as A,V as $,ac as ue,G as _e,H as ge,ad as ke,C as xe,a0 as me,O as Q,h as ae,X as Ae}from"./index-8a2cb146.js";import{Z as Le}from"./index-2bbe694f.js";import{Z as Me}from"./zsMultipleCalendar-2e3f8778.js";import{Z as ve}from"./zsRoutePrice-e3a5f38b.js";import{L as le}from"./line-7661aa01.js";const qe=F({name:"zsGenerateItinerary"}),we=F({...qe,props:{areaData:{default:()=>({})},defaultData:{default:()=>[]},disabled:{type:Boolean,default:!1}},setup(M,{expose:L}){const f=M;L({validateData:()=>!!T.value.visibleDepart.length,getFormData:()=>({areaNo:f.areaData.provinceCode,areaName:f.areaData.cityName,allDepart:C.value?"1":"0",visibleDepart:T.value.visibleDepart.join(",")}),changeAllArea:()=>I(!0)});const{form:T,formRef:v}=re(()=>({visibleDepart:f.defaultData})),C=te(()=>T.value.visibleDepart.length===t.value.length),{data:t}=fe(async()=>{const{err:p,res:u}=await W(()=>De.getAreaDepartmentList({areaNoList:[f.areaData.provinceCode]}));return p?[]:u==null?void 0:u.data},[]),I=p=>{p?T.value.visibleDepart=t.value.map(u=>u.departCode):T.value.visibleDepart=[]};return(p,u)=>{const z=n("a-checkbox"),b=n("a-checkbox-group"),x=n("a-space"),j=n("a-form-item"),O=n("a-form");return h(),S(O,{ref_key:"formRef",ref:v,model:l(T),disabled:p.disabled,"label-align":"left",size:"large",layout:"vertical","auto-label-width":""},{default:a(()=>[e(j,{"hide-asterisk":""},{default:a(()=>[e(x,{direction:"vertical"},{default:a(()=>[e(z,{"model-value":C.value,onChange:I},{default:a(()=>[c("全部")]),_:1},8,["model-value"]),e(b,{modelValue:l(T).visibleDepart,"onUpdate:modelValue":u[0]||(u[0]=U=>l(T).visibleDepart=U)},{default:a(()=>[(h(!0),G(K,null,Y(l(t),U=>(h(),S(z,{key:U.departCode,value:U.departCode},{default:a(()=>[c(oe(U.departName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","disabled"])}}}),Ce=F({name:"ZsTravelInformationForm"}),Se=F({...Ce,props:{day:{default:1},defaultData:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(M,{expose:L}){const f=M,{getDictionaryInfo:T}=Te(),{form:v,formRef:C}=re(()=>({schedule:f.day,choiceMode:"0",imgList:[],...f.defaultData})),t={tripTitle:{required:!0,message:"请输入标题"},lodgingInfo:{required:!0,message:"请选择住宿方式"},meals:{required:!0,message:"请选择用餐方式"},tripInfo:{required:!0,message:"请输入内容"}};return L({validateData:()=>C.value.validate(),getFormData:()=>v.value}),(I,p)=>{const u=n("a-input"),z=n("a-form-item"),b=n("a-grid-item"),x=n("a-select"),j=n("a-upload"),O=n("a-textarea"),U=n("a-grid"),J=n("a-form");return h(),S(J,{ref_key:"formRef",ref:C,model:l(v),"label-align":"left",size:"large",layout:"vertical","auto-label-width":"",rules:t,disabled:I.disabled},{default:a(()=>[e(U,{cols:3,"col-gap":12},{default:a(()=>[e(b,null,{default:a(()=>[e(z,{field:"tripTitle",label:"标题"},{default:a(()=>[e(u,{modelValue:l(v).tripTitle,"onUpdate:modelValue":p[0]||(p[0]=q=>l(v).tripTitle=q),modelModifiers:{trim:!0},placeholder:"请输入标题"},null,8,["modelValue"])]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(z,{field:"lodgingInfo",label:"住宿"},{default:a(()=>[e(x,{modelValue:l(v).lodgingInfo,"onUpdate:modelValue":p[1]||(p[1]=q=>l(v).lodgingInfo=q),placeholder:"请选择住宿方式",options:l(T)("new_stay_type"),"field-names":{label:"detailName",value:"detailCode"}},null,8,["modelValue","options"])]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(z,{field:"meals",label:"用餐"},{default:a(()=>[e(x,{modelValue:l(v).meals,"onUpdate:modelValue":p[2]||(p[2]=q=>l(v).meals=q),placeholder:"请选择用餐方式",options:l(T)("new_eat_type"),"field-names":{label:"detailName",value:"detailCode"}},null,8,["modelValue","options"])]),_:1})]),_:1}),e(b,{span:3},{default:a(()=>[e(z,{label:"上传图片"},{default:a(()=>[e(j,{"file-list":l(v).imgList,"onUpdate:fileList":p[3]||(p[3]=q=>l(v).imgList=q),multiple:"","list-type":"picture",accept:".png,.jpg","auto-upload":!1,"show-retry-button":!1,"show-link":!1,"show-remove-button":!I.disabled},null,8,["file-list","show-remove-button"])]),_:1})]),_:1}),e(b,{span:3},{default:a(()=>[e(z,{field:"tripInfo",label:"内容"},{default:a(()=>[e(O,{modelValue:l(v).tripInfo,"onUpdate:modelValue":p[4]||(p[4]=q=>l(v).tripInfo=q),modelModifiers:{trim:!0},placeholder:"请输入内容","auto-size":{minRows:10}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"])}}});const Ie=se(Se,[["__scopeId","data-v-5c23760e"]]),ie=M=>(_e("data-v-c85c9787"),M=M(),ge(),M),ze=ie(()=>A("span",null,"营业部设定",-1)),Pe=ie(()=>A("span",{class:"text-red margin-left",style:{"font-size":"14px"}},"(未选默认全选)",-1)),Ue=ie(()=>A("div",{className:"custom-checkbox-card-mask"},[A("div",{className:"custom-checkbox-card-mask-dot"})],-1)),Ne={className:"custom-checkbox-card-title"},Ee={class:"box-flex jc-fe"},je=ie(()=>A("span",{class:"text-red",style:{"font-weight":"900","font-size":"14px"}}," *此处请上传完整的线路行程单，如不上传不予通过。支持.pdf文件格式;文件名称只支持中文、数字和字母的组合",-1)),Re=F({name:"zsGenerateItinerary"}),$e=F({...Re,props:{defaultData:{default:()=>({})},regionList:{default:()=>[]},otherData:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["close","success"],setup(M,{emit:L}){const f=M,T=L,v=pe(),C=ne([]),t=ne([]),I=de(null),p=de(f.otherData.specialPriceList.length?[...f.otherData.specialPriceList]:f.defaultData.allTimeArr.map(r=>({...f.defaultData.routePrice,validDate:r}))),{form:u,formRef:z,formPlaceholder:b}=re(()=>({dateChecks:[],attachList:f.otherData.attachList,...f.otherData.other})),[x,j]=ce(null),O=te(()=>f.defaultData.areaList.map(r=>f.regionList.find(i=>i.provinceCode===r))),U=r=>{if(u.value.dateChecks=r,r.length){const i=p.value.find(V=>V.validDate===r.at(-1));I.value.setFormData({...i})}},J=()=>{if(!u.value.dateChecks)return $.warning("请先选择要修改的日期");p.value=p.value.map(r=>u.value.dateChecks.includes(r.validDate)?{...I.value.getFormData(),validDate:r.validDate}:r),u.value.dateChecks=[],$.success("修改成功!")},q=()=>{if(!u.value.dateChecks)return $.warning("请先选择要还原日期");p.value=p.value.map(r=>u.value.dateChecks.includes(r.validDate)?{...f.defaultData.routePrice,validDate:r.validDate}:r),u.value.dateChecks=[],$.success("还原成功!")},s=async r=>{if(r.file){const{res:i}=await W(()=>le.uploadTouristRoutesImg({file:r.file}));return{attName:r.name,attSize:parseInt(`${r.file.size/1024}`),attPath:i==null?void 0:i.data}}return{attName:r.name,attSize:r.attSize,attPath:r.url}},o=async r=>{if(r.file){const{res:i}=await W(()=>le.uploadTouristRoutesFile({file:r.file}));return{attName:r.name,attSize:parseInt(`${r.file.size/1024}`),attPath:i==null?void 0:i.data}}return{attName:r.name,attSize:r.attSize,attPath:r.url}},R=async()=>{const r=t.value.map(V=>V.getFormData());return await Promise.all(r.map(V=>(async()=>{const y=await Promise.all(V.imgList.map(w=>s(w)));return{...V,imgList:y}})()))},_=async()=>await Promise.all(u.value.attachList.map(i=>o(i))),g=async()=>{if((await Promise.all(t.value.map(i=>i.validateData()))).some(i=>!!i))return $.warning("存在未填写完整的行程信息");if(u.value.dateChecks.length)return $.warning("您有勾选的未保存的特殊价格设定，请点击保存或者还原。");C.value.forEach(i=>{i.validateData()||i.changeAllArea()}),B()},B=async()=>{const r=$.loading({content:"正在上传数据",duration:2e4});j("okLoading");const i=C.value.map(P=>P.getFormData()),V=await R(),y=await _(),{attachList:w,dateChecks:D,...N}=u.value,Z={...f.defaultData,...N,businessDepartList:i,priceList:p.value,tripList:V,fileList:y,regionList:f.defaultData.areaList.map(P=>f.regionList.find(X=>P===X.provinceCode)),mark:v.query.mark,id:v.query.id,idType:f.defaultData.idType.join(","),vehicle:f.defaultData.vehicle.join(","),adultAge:`${f.defaultData.adultAgeMin}-${f.defaultData.adultAgeMax}`,elderlyAge:`${f.defaultData.ageOfTheElderlyMin}-${f.defaultData.ageOfTheElderlyMax}`,childAge:`${f.defaultData.childrenSAgeMin}-${f.defaultData.childrenSAgeMax}`,allTimeArr:f.defaultData.allTimeArr.map(P=>ue(P))},{err:k}=await W(()=>le.saveTouristRoutes(Z));j(""),r.close(),!k&&($.success("操作成功"),T("close"),T("success"))};return(r,i)=>{const V=n("a-tab-pane"),y=n("a-tabs"),w=n("a-card"),D=n("a-space"),N=n("a-checkbox"),Z=n("a-checkbox-group"),k=n("a-form-item"),P=n("a-grid-item"),X=n("a-button"),ee=n("a-button-group"),d=n("a-grid"),E=n("a-textarea"),be=n("a-upload"),ye=n("a-form"),he=n("a-modal");return h(),S(he,{title:"添加行程","unmount-on-close":"",visible:"",fullscreen:"","align-center":!1,"mask-closable":!1,footer:!r.disabled,"ok-loading":l(x)==="okLoading",onCancel:i[12]||(i[12]=m=>T("close")),onOk:g},{default:a(()=>[e(ye,{ref_key:"formRef",ref:z,model:l(u),disabled:r.disabled,"label-align":"left",size:"large",layout:"vertical","auto-label-width":""},{default:a(()=>[e(w,{bordered:!1,class:"general-card"},{title:a(()=>[ze,Pe]),default:a(()=>[e(y,{type:"card-gutter"},{default:a(()=>[(h(!0),G(K,null,Y(O.value,m=>(h(),S(V,{key:m.provinceCode,title:m.cityName},{default:a(()=>[e(we,{ref_for:!0,ref_key:"areaRefs",ref:C,disabled:r.disabled,"default-data":r.otherData.businessDepartList,areaData:m},null,8,["disabled","default-data","areaData"])]),_:2},1032,["title"]))),128))]),_:1})]),_:1}),e(w,{bordered:!1,title:"特殊价格设定",class:"general-card"},{default:a(()=>[e(d,{cols:5,"col-gap":20},{default:a(()=>[e(P,{span:2},{default:a(()=>[e(k,{"hide-label":""},{default:a(()=>[e(Z,{modelValue:l(u).dateChecks,"onUpdate:modelValue":i[0]||(i[0]=m=>l(u).dateChecks=m),onChange:U},{default:a(()=>[(h(!0),G(K,null,Y(r.defaultData.allTimeArr,m=>(h(),S(N,{key:m,value:m},{checkbox:a(({checked:Ve})=>[e(D,{align:"start",class:ke(["custom-checkbox-card",{"custom-checkbox-card-checked":Ve}])},{default:a(()=>[Ue,A("div",null,[A("div",Ne,oe(l(ue)(m)),1)])]),_:2},1032,["class"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(P,{span:3},{default:a(()=>[e(ve,{ref_key:"routePriceRef",ref:I,disabled:!l(u).dateChecks.length,"default-data":r.defaultData.routePrice},null,8,["disabled","default-data"]),e(k,{"hide-label":""},{default:a(()=>[A("div",Ee,[e(ee,null,{default:a(()=>[e(X,{size:"large",disabled:!l(u).dateChecks.length,type:"primary",onClick:J},{default:a(()=>[c("保存")]),_:1},8,["disabled"]),e(X,{size:"large",disabled:!l(u).dateChecks.length,onClick:q},{default:a(()=>[c("还原")]),_:1},8,["disabled"])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),(h(!0),G(K,null,Y(r.defaultData.travelDays,m=>(h(),S(w,{item:m,bordered:!1,title:`行程信息-第${m}天`,class:"general-card"},{default:a(()=>[e(Ie,{day:m,"default-data":r.otherData.routeTripList[m-1],disabled:r.disabled,ref_for:!0,ref_key:"informationRefs",ref:t},null,8,["day","default-data","disabled"])]),_:2},1032,["item","title"]))),256)),e(w,{bordered:!1,title:"其他信息",class:"general-card"},{default:a(()=>[e(k,{label:"行程特色"},{default:a(()=>[e(E,{modelValue:l(u).routeFeature,"onUpdate:modelValue":i[1]||(i[1]=m=>l(u).routeFeature=m),placeholder:l(b)("请输入行程特色"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"费用包含"},{default:a(()=>[e(E,{modelValue:l(u).costIncludes,"onUpdate:modelValue":i[2]||(i[2]=m=>l(u).costIncludes=m),placeholder:l(b)("请输入费用包含"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"费用不含"},{default:a(()=>[e(E,{modelValue:l(u).costExcludes,"onUpdate:modelValue":i[3]||(i[3]=m=>l(u).costExcludes=m),placeholder:l(b)("请输入费用不含"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"自费项目"},{default:a(()=>[e(E,{modelValue:l(u).selfExpense,"onUpdate:modelValue":i[4]||(i[4]=m=>l(u).selfExpense=m),placeholder:l(b)("请输入自费项目"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"温馨提示"},{default:a(()=>[e(E,{modelValue:l(u).reminder,"onUpdate:modelValue":i[5]||(i[5]=m=>l(u).reminder=m),placeholder:l(b)("请输入温馨提示"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"签证须知"},{default:a(()=>[e(E,{modelValue:l(u).visaNotice,"onUpdate:modelValue":i[6]||(i[6]=m=>l(u).visaNotice=m),placeholder:l(b)("请输入签证须知"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"注意事项"},{default:a(()=>[e(E,{modelValue:l(u).needingMsg,"onUpdate:modelValue":i[7]||(i[7]=m=>l(u).needingMsg=m),placeholder:l(b)("请输入注意事项"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"接待标准"},{default:a(()=>[e(E,{modelValue:l(u).reception,"onUpdate:modelValue":i[8]||(i[8]=m=>l(u).reception=m),placeholder:l(b)("请输入接待标准"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"购物信息"},{default:a(()=>[e(E,{modelValue:l(u).totalInfo1,"onUpdate:modelValue":i[9]||(i[9]=m=>l(u).totalInfo1=m),placeholder:l(b)("请输入购物信息"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"备注"},{default:a(()=>[e(E,{modelValue:l(u).remark,"onUpdate:modelValue":i[10]||(i[10]=m=>l(u).remark=m),placeholder:l(b)("请输入备注"),"auto-size":{minRows:10}},null,8,["modelValue","placeholder"])]),_:1}),e(k,{label:"上传电子行程单",required:""},{extra:a(()=>[je]),default:a(()=>[e(be,{"file-list":l(u).attachList,"onUpdate:fileList":i[11]||(i[11]=m=>l(u).attachList=m),accept:".pdf","auto-upload":!1,limit:1,"show-remove-button":!r.disabled,"show-retry-button":!1},null,8,["file-list","show-remove-button"])]),_:1})]),_:1})]),_:1},8,["model","disabled"])]),_:1},8,["footer","ok-loading"])}}});const Fe=se($e,[["__scopeId","data-v-c85c9787"]]),H=M=>(_e("data-v-f072c848"),M=M(),ge(),M),Oe=H(()=>A("div",{style:{padding:"0 10px"}},"-",-1)),Be=H(()=>A("div",{style:{padding:"0 10px"}},"-",-1)),Ze=H(()=>A("div",{style:{padding:"0 10px"}},"-",-1)),Ge=H(()=>A("div",null,"选择的日期：",-1)),Ke=H(()=>A("span",null,"指定地区",-1)),He=H(()=>A("span",{class:"text-red margin-left",style:{"font-size":"14px"}},"(未选默认全选)",-1)),Xe=H(()=>A("div",{style:{height:"100px"}},null,-1)),Ye={class:"orderSubmit-footer box-flex jc-fe"},Je=F({name:"LineAddTourismOperate"}),Qe=F({...Je,setup(M){const L=pe(),{jumpTabName:f}=xe(),[T,v]=ce(""),C=de(null),{form:t,formRef:I}=re(()=>({routeName:"",travelType:"",routeType:"",groupType:"1",isBefore:"1",beforeDays:1,idType:[],vehicle:[],travelDays:void 0,adultAgeMin:void 0,adultAgeMax:void 0,ageOfTheElderlyMin:void 0,ageOfTheElderlyMax:105,childrenSAgeMin:void 0,childrenSAgeMax:void 0,arrival:"",supplierId:"",isReturnPoint:"1",isSubstrPoint:"1",addRebate:void 0,rebate:void 0,areaList:[],deposit:void 0,allTimeArr:[],routePrice:{crmsjg:void 0,crtxjg:void 0,crdffcmsj:void 0,crdrfctxj:void 0,crqtjg:void 0,lrmsjg:void 0,lrtxjg:void 0,lrdffcmsj2:void 0,lrdrfctxj:void 0,lrqtjg:void 0,etmsjg:void 0,ettxjg:void 0,etdffcmsj:void 0,etqtjg:void 0,zccrdrfctxj:void 0,zcrtdffcmsj:void 0,zcettxjg:void 0,zcetmsjg:void 0,zcetdrfctxj:void 0,zcetqtjg:void 0,qtjg:void 0,qtjg2:void 0,qtjg3:void 0,qtjg4:void 0,remark:""}})),p=de({routeTripList:[],specialPriceList:[],businessDepartList:[],attachList:[],other:{}}),u=te(()=>x.value.routeTypeList.filter(s=>s.lineVer===t.value.travelType)),z=te(()=>t.value.areaList.length===x.value.regionList.length),b={routeName:{required:!0,message:"请输入登录名"},travelType:{required:!0,message:"请选择旅行类型"},routeType:{required:!0,message:"请选择线路类型"},deposit:{required:!0,message:"请输入押金"},beforeDays:{required:!0,message:"请输入提前报名天数"},idType:{required:!0,message:"请选择支持证件"},vehicle:{required:!0,message:"请选择交通工具"},travelDays:{required:!0,message:"请输入天数"},adultAge:{required:!0,validator:(s,o)=>{!t.value.adultAgeMin&&!t.value.adultAgeMax&&o("请输入正确的年龄")}},ageOfTheElderly:{required:!0,validator:(s,o)=>{!t.value.ageOfTheElderlyMin&&!t.value.ageOfTheElderlyMax&&o("请输入正确的年龄")}},childrenSAge:{required:!0,validator:(s,o)=>{!t.value.childrenSAgeMin&&!t.value.childrenSAgeMax&&o("请输入正确的年龄")}},supplierId:{required:!0,message:"请选择供应商"},allTimeArr:{required:!0,message:"请选择发团日期"}},{data:x}=fe(async()=>{const{err:s,res:o}=await W(()=>le.getTouristRoutesDetail({id:L.query.id??"",mark:L.query.mark??"0"}));return s?{}:(L.query.mark!=="0"&&j(o==null?void 0:o.data),o==null?void 0:o.data)},{departType:"",ass:"",regionList:[],travelTypeList:[],supplierList:[],routeTypeList:[]}),j=({travelRoute:s,priceList:o,specialPriceList:R,routeTripList:_,validDateList:g,regionList:B,attachList:r,visibleDepart:i})=>{const V=s.adultAge.split("-"),y=s.elderlyAge.split("-"),w=s.childAge.split("-");t.value={routeName:s.routeName,travelType:s.travelType,routeType:s.routeType,groupType:s.groupType,isBefore:s.isBefore,beforeDays:s.beforeDays,travelDays:s.travelDays,arrival:s.arrival,supplierId:s.arrival,isReturnPoint:s.isReturnPoint,isSubstrPoint:s.isSubstrPoint,addRebate:s.addRebate,rebate:s.rebate,deposit:s.deposit,adultAgeMin:V[0]*1,adultAgeMax:V[1]*1,ageOfTheElderlyMin:y[0]*1,ageOfTheElderlyMax:y[1]*1,childrenSAgeMin:w[0]*1,childrenSAgeMax:w[1]*1,idType:s.idtype.split(","),vehicle:s.vehicle.split(","),allTimeArr:g.map(D=>Ae(D)),areaList:B.map(D=>D.provinceCode),routePrice:o[0]},p.value={other:{routeFeature:s.routeFeature,costIncludes:s.costIncludes,costExcludes:s.costExcludes,selfExpense:s.selfExpense,reminder:s.reminder,visaNotice:s.visaNotice,needingMsg:s.needingMsg,reception:s.reception,totalInfo1:s.totalInfo1,remark:s.remark},routeTripList:_.map(D=>({...D,imgList:D.pictureList.map(N=>({name:N.attName,url:N.attPath,status:"done",uid:N.id,attSize:N.attSize}))})),attachList:r.map(D=>({name:D.attName,url:D.attPath,status:"done",uid:D.id,attSize:D.attSize})),specialPriceList:R??[],businessDepartList:i.split(",")}},O=s=>{t.value.travelType=s,t.value.routeType="",t.value.arrival=""},U=s=>{var o;t.value.routeType=s,t.value.arrival=((o=u.value.find(R=>R.lineId===s))==null?void 0:o.lineDesc)??""},J=async()=>{await I.value.validate()||await C.value.validateData()||(t.value.routePrice=C.value.getFormData(),t.value.areaList.length===0&&q(!0),v("生成行程"))},q=s=>{s?t.value.areaList=x.value.regionList.map(o=>o.provinceCode):t.value.areaList=[]};return me(()=>t.value.adultAgeMin,s=>{L.query.mark==="0"&&(t.value.childrenSAgeMin=1,t.value.childrenSAgeMax=s-1)}),me(()=>t.value.adultAgeMax,s=>{L.query.mark==="0"&&(t.value.ageOfTheElderlyMin=s+1)}),(s,o)=>{const R=n("a-input"),_=n("a-form-item"),g=n("a-grid-item"),B=n("a-select"),r=n("a-input-number"),i=n("a-radio"),V=n("a-radio-group"),y=n("a-checkbox"),w=n("a-checkbox-group"),D=n("a-input-group"),N=n("a-grid"),Z=n("a-card"),k=n("a-tag"),P=n("a-space"),X=n("a-form"),ee=n("a-button");return h(),S(Le,null,{default:a(()=>[e(X,{ref_key:"formRef",ref:I,"label-align":"left",size:"large",layout:"vertical","auto-label-width":"","scroll-to-first-error":"",model:l(t),disabled:!!l(L).query.isReadOnly,rules:b},{default:a(()=>[e(Z,{title:"旅游线路维护",bordered:!1,class:"general-card"},{default:a(()=>[e(N,{cols:3,"col-gap":12},{default:a(()=>[e(g,null,{default:a(()=>[e(_,{label:"线路名称:",field:"routeName",required:""},{default:a(()=>[e(R,{modelValue:l(t).routeName,"onUpdate:modelValue":o[0]||(o[0]=d=>l(t).routeName=d),modelModifiers:{trim:!0},placeholder:"请输入线路名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"旅行类型:",field:"travelType",required:""},{default:a(()=>[e(B,{"model-value":l(t).travelType,options:l(x).travelTypeList,"field-names":{label:"detailName",value:"lineVer"},placeholder:"请输入旅行类型",onChange:O},null,8,["model-value","options"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"线路类型:",field:"routeType",required:""},{default:a(()=>[e(B,{"model-value":l(t).routeType,options:u.value,"field-names":{label:"linename",value:"lineId"},placeholder:"请选择线路类型","allow-search":"",onChange:U},null,8,["model-value","options"])]),_:1})]),_:1}),l(t).travelType==="C00001"?(h(),S(g,{key:0},{default:a(()=>[e(_,{label:"押金:",field:"deposit",required:""},{default:a(()=>[e(r,{modelValue:l(t).deposit,"onUpdate:modelValue":o[1]||(o[1]=d=>l(t).deposit=d),modelModifiers:{trim:!0},formatter:d=>l(Q)(d,""),parser:d=>d.replace(/,/g,""),precision:0,"hide-button":"",placeholder:"请输入押金"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1})):ae("",!0),e(g,null,{default:a(()=>[e(_,{label:"成团类别:",field:"groupType",required:""},{default:a(()=>[e(V,{modelValue:l(t).groupType,"onUpdate:modelValue":o[2]||(o[2]=d=>l(t).groupType=d)},{default:a(()=>[e(i,{value:"1"},{default:a(()=>[c("单团")]),_:1}),e(i,{value:"2"},{default:a(()=>[c("散客")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x).departType!=="2"?(h(),S(g,{key:1},{default:a(()=>[e(_,{label:"是否提前报名:",field:"isBefore",required:""},{default:a(()=>[e(V,{modelValue:l(t).isBefore,"onUpdate:modelValue":o[3]||(o[3]=d=>l(t).isBefore=d)},{default:a(()=>[e(i,{value:"1"},{default:a(()=>[c("是")]),_:1}),e(i,{value:"0"},{default:a(()=>[c("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):ae("",!0),e(g,null,{default:a(()=>[e(_,{label:"提前报名天数:",field:"beforeDays",required:""},{default:a(()=>[e(r,{modelValue:l(t).beforeDays,"onUpdate:modelValue":o[4]||(o[4]=d=>l(t).beforeDays=d),modelModifiers:{trim:!0},formatter:d=>l(Q)(d,""),parser:d=>d.replace(/,/g,""),precision:0,"hide-button":"",placeholder:"请输入提前报名天数"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"支持证件:",field:"idType",required:""},{default:a(()=>[e(w,{modelValue:l(t).idType,"onUpdate:modelValue":o[5]||(o[5]=d=>l(t).idType=d)},{default:a(()=>[e(y,{value:"1"},{default:a(()=>[c("身份证")]),_:1}),e(y,{value:"2"},{default:a(()=>[c("户口本")]),_:1}),e(y,{value:"3"},{default:a(()=>[c("护照")]),_:1}),e(y,{value:"4"},{default:a(()=>[c("驾驶证")]),_:1}),e(y,{value:"5"},{default:a(()=>[c("暂住证")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"交通工具:",field:"vehicle",required:""},{default:a(()=>[e(w,{modelValue:l(t).vehicle,"onUpdate:modelValue":o[6]||(o[6]=d=>l(t).vehicle=d)},{default:a(()=>[e(y,{value:"1"},{default:a(()=>[c("飞机")]),_:1}),e(y,{value:"2"},{default:a(()=>[c("火车")]),_:1}),e(y,{value:"3"},{default:a(()=>[c("大巴")]),_:1}),e(y,{value:"4"},{default:a(()=>[c("轮船")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"天数:",field:"travelDays",required:""},{default:a(()=>[e(r,{modelValue:l(t).travelDays,"onUpdate:modelValue":o[7]||(o[7]=d=>l(t).travelDays=d),formatter:d=>l(Q)(d,""),parser:d=>d.replace(/,/g,""),precision:0,"hide-button":"",placeholder:"请输入天数"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"成人价年龄:",field:"adultAge",required:""},{default:a(()=>[e(D,{class:"flex1"},{default:a(()=>[e(r,{modelValue:l(t).adultAgeMin,"onUpdate:modelValue":o[8]||(o[8]=d=>l(t).adultAgeMin=d),min:0,placeholder:"最小年龄"},null,8,["modelValue"]),Oe,e(r,{modelValue:l(t).adultAgeMax,"onUpdate:modelValue":o[9]||(o[9]=d=>l(t).adultAgeMax=d),min:0,placeholder:"最大年龄"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"老人价年龄:",field:"ageOfTheElderly",required:""},{default:a(()=>[e(D,{class:"flex1"},{default:a(()=>[e(r,{modelValue:l(t).ageOfTheElderlyMin,"onUpdate:modelValue":o[10]||(o[10]=d=>l(t).ageOfTheElderlyMin=d),max:105,min:0,placeholder:"最小年龄"},null,8,["modelValue"]),Be,e(r,{modelValue:l(t).ageOfTheElderlyMax,"onUpdate:modelValue":o[11]||(o[11]=d=>l(t).ageOfTheElderlyMax=d),max:105,min:0,placeholder:"最大年龄"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"儿童价年龄:",field:"childrenSAge"},{default:a(()=>[e(D,{class:"flex1"},{default:a(()=>[e(r,{modelValue:l(t).childrenSAgeMin,"onUpdate:modelValue":o[12]||(o[12]=d=>l(t).childrenSAgeMin=d),min:0,placeholder:"最小年龄"},null,8,["modelValue"]),Ze,e(r,{modelValue:l(t).childrenSAgeMax,"onUpdate:modelValue":o[13]||(o[13]=d=>l(t).childrenSAgeMax=d),min:0,placeholder:"最大年龄"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"目的地:",field:"arrival"},{default:a(()=>[e(R,{modelValue:l(t).arrival,"onUpdate:modelValue":o[14]||(o[14]=d=>l(t).arrival=d),modelModifiers:{trim:!0},readonly:"",placeholder:"请输入目的地"},null,8,["modelValue"])]),_:1})]),_:1}),l(x).ass==="1"?(h(),G(K,{key:2},[e(g,null,{default:a(()=>[e(_,{label:"外交供应商:",field:"supplierId"},{default:a(()=>[e(B,{modelValue:l(t).supplierId,"onUpdate:modelValue":o[15]||(o[15]=d=>l(t).supplierId=d),options:l(x).supplierList,"field-names":{label:"supName",value:"id"},placeholder:"请选择辅助外交供应商"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"是否供应商返点:",field:"isReturnPoint",required:""},{default:a(()=>[e(V,{modelValue:l(t).isReturnPoint,"onUpdate:modelValue":o[16]||(o[16]=d=>l(t).isReturnPoint=d)},{default:a(()=>[e(i,{value:"1"},{default:a(()=>[c("是")]),_:1}),e(i,{value:"0"},{default:a(()=>[c("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"是否营业部扣点:",field:"isSubstrPoint",required:""},{default:a(()=>[e(V,{modelValue:l(t).isSubstrPoint,"onUpdate:modelValue":o[17]||(o[17]=d=>l(t).isSubstrPoint=d)},{default:a(()=>[e(i,{value:"1"},{default:a(()=>[c("是")]),_:1}),e(i,{value:"0"},{default:a(()=>[c("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"供应商返点(%):",field:"addRebate",required:""},{default:a(()=>[e(r,{modelValue:l(t).addRebate,"onUpdate:modelValue":o[18]||(o[18]=d=>l(t).addRebate=d),modelModifiers:{trim:!0},formatter:d=>l(Q)(d,""),parser:d=>d.replace(/,/g,""),precision:2,"hide-button":"",placeholder:"空默认为不扣供应商点"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(_,{label:"营业部扣点(%):",required:""},{default:a(()=>[e(r,{modelValue:l(t).rebate,"onUpdate:modelValue":o[19]||(o[19]=d=>l(t).rebate=d),modelModifiers:{trim:!0},formatter:d=>l(Q)(d,""),parser:d=>d.replace(/,/g,""),precision:2,"hide-button":"",placeholder:"空默认为不扣营业部点"},null,8,["modelValue","formatter","parser"])]),_:1})]),_:1})],64)):ae("",!0)]),_:1})]),_:1}),e(Z,{title:"发团日期选择",bordered:!1,class:"general-card margin-top"},{default:a(()=>[e(N,{cols:3,"col-gap":20},{default:a(()=>[e(g,{span:1},{default:a(()=>[e(_,{field:"allTimeArr","hide-label":"","hide-asterisk":""},{default:a(()=>[e(Me,{modelValue:l(t).allTimeArr,"onUpdate:modelValue":o[20]||(o[20]=d=>l(t).allTimeArr=d),disabled:!!l(L).query.isReadOnly,style:{width:"100%"}},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(g,{span:2},{default:a(()=>[e(P,{wrap:""},{default:a(()=>[Ge,(h(!0),G(K,null,Y(l(t).allTimeArr,d=>(h(),S(k,{size:"large"},{default:a(()=>[c(oe(l(ue)(d)),1)]),_:2},1024))),256))]),_:1}),e(ve,{ref_key:"priceFormRef",ref:C,disabled:!!l(L).query.isReadOnly,"default-data":l(t).routePrice},null,8,["disabled","default-data"])]),_:1})]),_:1})]),_:1}),e(Z,{bordered:!1,class:"general-card margin-top"},{title:a(()=>[Ke,He]),extra:a(()=>[e(P,null,{default:a(()=>[e(y,{"model-value":z.value,onChange:q},{default:a(()=>[c("全选")]),_:1},8,["model-value"])]),_:1})]),default:a(()=>[e(_,{"hide-label":"",field:"areaList"},{default:a(()=>[e(w,{modelValue:l(t).areaList,"onUpdate:modelValue":o[21]||(o[21]=d=>l(t).areaList=d)},{default:a(()=>[(h(!0),G(K,null,Y(l(x).regionList,d=>(h(),S(y,{value:d.provinceCode},{default:a(()=>[c(oe(d.cityName),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","disabled"]),Xe,A("div",Ye,[e(P,null,{default:a(()=>[e(ee,{type:"primary",onClick:J},{default:a(()=>[c("生成行程")]),_:1}),e(ee,{onClick:o[22]||(o[22]=()=>l(f)())},{default:a(()=>[c("返回")]),_:1})]),_:1})]),l(T)==="生成行程"?(h(),S(Fe,{key:0,"default-data":l(t),"region-list":l(x).regionList,disabled:!!l(L).query.isReadOnly,"other-data":p.value,onClose:o[23]||(o[23]=d=>l(v)("")),onSuccess:l(f)},null,8,["default-data","region-list","disabled","other-data","onSuccess"])):ae("",!0)]),_:1})}}});const oa=se(Qe,[["__scopeId","data-v-f072c848"]]);export{oa as default};
