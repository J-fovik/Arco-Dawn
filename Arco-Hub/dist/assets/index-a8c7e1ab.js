import{n as d,p as ee,T as te,d as z,q as ae,E as oe,s as ne,v as le,M as re,I as M,x as se,y as ie,r as c,o as C,e as ce,g as o,w as n,c as e,z as b,l as h,i as _,f as de,k as S,A as ue,Y as pe,X as k}from"./index-8a2cb146.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{S as D}from"./scenicSpot-07a0c57b.js";import"./index-2bbe694f.js";const ge=()=>[{title:"景区名称",dataIndex:"scenicName",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:l})=>d(l.scenicName)},{title:"景区等级",dataIndex:"scenicLevel",show:!0,align:"center",render:({record:l})=>ee(te,{color:"blue"},{default:()=>d(l.scenicLevel)})},{title:"景区联系人",dataIndex:"scenicContacts",show:!0,align:"center",render:({record:l})=>d(l.scenicContacts)},{title:"景区电话",dataIndex:"scenicContactsPhone",show:!0,align:"center",render:({record:l})=>d(l.scenicContactsPhone)},{title:"所属国家",dataIndex:"country",show:!0,align:"center",render:({record:l})=>d(l.country)},{title:"所属省",dataIndex:"province",show:!0,align:"center",render:({record:l})=>d(l.province)},{title:"所属市",dataIndex:"city",show:!0,align:"center",render:({record:l})=>d(l.city)},{title:"详细地址",dataIndex:"detailAddress",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:l})=>d(l.detailAddress)},{title:"合作期限开始",dataIndex:"periodCooperateStart",show:!0,align:"center",render:({record:l})=>d(l.periodCooperateStart)},{title:"合作期限结束",dataIndex:"periodCooperateEnd",show:!0,align:"center",render:({record:l})=>d(l.periodCooperateEnd)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],Ce=de("span",{class:"mx-3"},"-",-1),_e=z({name:"ScenicSpotCooperateManage"}),xe=z({..._e,setup(l){const{vAuthority:f}=ae(),{warningModal:A}=ue(),[T,fe]=oe(null),{form:a,resetForm:E}=ne(()=>({country:"",countryCode:"",province:"",provinceCode:"",city:"",cityCode:"",scenicName:"",periodCooperateStart:"",periodCooperateEnd:""}),()=>w()),{selectRow:ye,columnsData:$,visibleColumnsData:K,tableBaseOptions:i,resetData:w,setSelectRow:ve,extendTableList:be,changeTableColumn:L,changeTableSize:U}=le(ge(),()=>v()),y=async s=>{const{res:t}=await S(()=>pe.getAreaInfo(s));return(t==null?void 0:t.data)??[]},{data:N}=re(async()=>await y({level:"1"}),[]),{data:x}=M(async()=>await y({parentNo:a.value.countryCode}),{watchSource:()=>a.value.countryCode,defaultValue:[]}),{data:V}=M(async()=>await y({parentNo:a.value.provinceCode}),{watchSource:()=>a.value.provinceCode,defaultValue:[]}),Y=s=>{a.value.provinceCode="",a.value.province="",a.value.cityCode="",a.value.city="",a.value.country=N.value.find(t=>t.areaNo==s).areaName},P=s=>{a.value.cityCode="",a.value.city="",a.value.province=x.value.find(t=>t.areaNo==s).areaName},B=s=>{a.value.city=V.value.find(t=>t.areaNo==s).areaName},R=s=>{A(`确定操作选中的${i.selectedKeys.length}数据吗？`,async t=>{const{res:u}=await S(()=>D[s]({idList:i.selectedKeys}),{successMsg:"操作成功"});t(!0),u&&(i.selectedKeys=[],v())})},{data:O,loading:q,initData:v}=se(async()=>{const{res:s,err:t}=await S(()=>D.getScenicList({...a.value,periodCooperateStart:k(a.value.periodCooperateStart,"YYYYMMDD",""),periodCooperateEnd:k(a.value.periodCooperateEnd,"YYYYMMDD",""),currentPage:i.pagination.current,pageSize:i.pagination.pageSize,pagingOrNot:"1"}));return t?[]:(i.pagination.total=s.data.totalCount,s.data.list)});return ie(v),(s,t)=>{const u=c("a-select"),p=c("a-form-item"),m=c("a-grid-item"),F=c("a-input"),I=c("a-date-picker"),W=c("a-grid"),X=c("a-form"),j=c("icon-plus"),g=c("a-button"),G=c("icon-close"),H=c("a-space"),J=c("a-button-group"),Q=c("a-table");return C(),ce("div",null,[o(me,{"table-columns":e($),"table-size":e(i).size,onResetSearch:e(E),onSearch:e(w),onChangeTableSize:e(U),onChangeTableColumn:e(L)},{form:n(()=>[o(X,{model:e(a),"label-align":"left",size:"large","auto-label-width":""},{default:n(()=>[o(W,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:n(()=>[o(m,null,{default:n(()=>[o(p,{field:"country",label:"所属国家:"},{default:n(()=>[o(u,{modelValue:e(a).countryCode,"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).countryCode=r),"allow-search":"",options:e(N),"field-names":{label:"areaName",value:"areaNo"},"virtual-list-props":{height:200},placeholder:"请选择所属国家",onChange:Y},null,8,["modelValue","options"])]),_:1})]),_:1}),o(m,null,{default:n(()=>[o(p,{field:"province",label:"所属省:"},{default:n(()=>[o(u,{modelValue:e(a).provinceCode,"onUpdate:modelValue":t[1]||(t[1]=r=>e(a).provinceCode=r),options:e(x),"field-names":{label:"areaName",value:"areaNo"},"allow-search":"",placeholder:"请选择所属省",onChange:P},null,8,["modelValue","options"])]),_:1})]),_:1}),o(m,null,{default:n(()=>[o(p,{field:"city",label:"所属城市:"},{default:n(()=>[o(u,{modelValue:e(a).cityCode,"onUpdate:modelValue":t[2]||(t[2]=r=>e(a).cityCode=r),options:e(V),"field-names":{label:"areaName",value:"areaNo"},"allow-search":"",placeholder:"请选择所属市",onChange:B},null,8,["modelValue","options"])]),_:1})]),_:1}),o(m,null,{default:n(()=>[o(p,{field:"scenicName",label:"景区名称:"},{default:n(()=>[o(F,{modelValue:e(a).scenicName,"onUpdate:modelValue":t[3]||(t[3]=r=>e(a).scenicName=r),modelModifiers:{trim:!0},placeholder:"请输入景区名称"},null,8,["modelValue"])]),_:1})]),_:1}),o(m,null,{default:n(()=>[o(p,{label:"选择日期:"},{default:n(()=>[o(I,{modelValue:e(a).periodCooperateStart,"onUpdate:modelValue":t[4]||(t[4]=r=>e(a).periodCooperateStart=r),class:"flex1",placeholder:"合作期限开始日期"},null,8,["modelValue"]),Ce,o(I,{modelValue:e(a).periodCooperateEnd,"onUpdate:modelValue":t[5]||(t[5]=r=>e(a).periodCooperateEnd=r),class:"flex1",placeholder:"合作期限结束日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:n(()=>[o(H,null,{default:n(()=>[b((C(),h(g,{type:"outline",onClick:t[6]||(t[6]=r=>s.$router.push("/scenicSpot/cooperateManage/operate"))},{icon:n(()=>[o(j)]),default:n(()=>[_(" 新增 ")]),_:1})),[[e(f),"ScenicSpotCooperateManageAdd"]]),b((C(),h(g,{type:"outline",status:"danger",disabled:!e(i).selectedKeys.length,loading:e(T)==="删除",onClick:t[7]||(t[7]=r=>R("delPlaneScenic"))},{icon:n(()=>[o(G)]),default:n(()=>[_(" 删除 ")]),_:1},8,["disabled","loading"])),[[e(f),"ScenicSpotCooperateManageDelete"]])]),_:1})]),table:n(()=>[o(Q,{"selected-keys":e(i).selectedKeys,"onUpdate:selectedKeys":t[8]||(t[8]=r=>e(i).selectedKeys=r),class:"zs-table","row-key":"id",data:e(O),"row-selection":e(i).rowSelection,bordered:e(i).bordered,pagination:e(i).pagination,size:e(i).size,columns:e(K),stripe:e(i).stripe,loading:e(q)},{operate:n(({record:r})=>[o(J,null,{default:n(()=>[o(g,{type:"text",status:"success",onClick:Z=>s.$router.push(`/scenicSpot/cooperateManage/operate?id=${r.id}&isReadOnly=true`)},{default:n(()=>[_("详情")]),_:2},1032,["onClick"]),b((C(),h(g,{type:"text",onClick:Z=>s.$router.push(`/scenicSpot/cooperateManage/operate?id=${r.id}`)},{default:n(()=>[_("编辑")]),_:2},1032,["onClick"])),[[e(f),"ScenicSpotCooperateManageEdit"]])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{xe as default};
