import{d as M,g as N,h as E,i as B,r as d,o as P,l as R,w as t,a as l,b as e,m as $,n as Y,j as Z,c as ee,e as O,p as F,q as le}from"./index-d007178a.js";import{f as S,c as j,_ as te}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as L}from"./options-aafac76d.js";import{O as A}from"./otherData-17ba8805.js";import"./index-13860ba0.js";const oe=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:r})=>S(r.sf)},{title:"年份",dataIndex:"nf",show:!0,align:"center",render:({record:r})=>S(r.nf)},{title:"省份-招生数据",dataIndex:"wsf",show:!0,align:"center",render:({record:r})=>S(r.wsf)},{title:"年份-招生数据",dataIndex:"wnf",show:!0,align:"center",render:({record:r})=>S(r.wnf)},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:r})=>S(r.yxmc)},{title:"科类",dataIndex:"kl",show:!0,align:"center",render:({record:r})=>S(r.kl)},{title:"批次",dataIndex:"pc",show:!0,align:"center",render:({record:r})=>S(r.pc)},{title:"录取人数",dataIndex:"lqrs",show:!0,align:"right",render:({record:r})=>S(r.lqrs)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ae=M({name:"zsAddProfessionalEnPlan"}),ne=M({...ae,props:{data:{default:()=>({})}},emits:["close","success"],setup(r,{emit:y}){const g=r,b=N(),[U,u]=E(null),{form:a,formRef:x}=B(()=>({...g.data})),q={nf:{required:!0,message:"请输入年份"},sf:{required:!0,message:"请输入省份"},pc:{required:!0,message:"请输入批次"},yxmc:{required:!0,message:"请输入院校名称"},lqrs:{required:!0,message:"请输入录取人数"},wsf:{required:!0,message:"请输入省份-招生数据"},wnf:{required:!0,message:"请输入年份-招生数据"},kl:{required:!0,message:"请输入科类"}},I=()=>{x.value.validate(p=>{p||(g.data.id?i("editSchoolPlan"):i("addSchoolPlan"))})},i=async p=>{const{err:o}=await $(()=>A[p](a.value),{before:()=>u("okLoading"),after:()=>u(null)});o||(y("success"),y("close"))};return(p,o)=>{const V=d("a-input-number"),m=d("a-form-item"),f=d("a-grid-item"),k=d("a-select"),w=d("a-input"),T=d("a-textarea"),v=d("a-grid"),c=d("a-form"),s=d("a-modal");return P(),R(s,{title:e(j)("院校招生计划",!!g.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"60vw","align-center":!1,"mask-closable":!1,"ok-loading":e(U)==="okLoading",onCancel:o[13]||(o[13]=n=>y("close")),onOk:I},{default:t(()=>[l(c,{ref_key:"formRef",ref:x,model:e(a),"label-align":"left",size:"large","auto-label-width":"",rules:q},{default:t(()=>[l(v,{cols:2,"col-gap":24},{default:t(()=>[l(f,null,{default:t(()=>[l(m,{field:"nf",label:"年份:"},{default:t(()=>[l(V,{modelValue:e(a).nf,"onUpdate:modelValue":o[0]||(o[0]=n=>e(a).nf=n),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"lqrs",label:"录取人数:"},{default:t(()=>[l(V,{modelValue:e(a).lqrs,"onUpdate:modelValue":o[1]||(o[1]=n=>e(a).lqrs=n),modelModifiers:{trim:!0},placeholder:"请输入录取人数"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"sf",label:"省份:"},{default:t(()=>[l(k,{modelValue:e(a).sf,"onUpdate:modelValue":o[2]||(o[2]=n=>e(a).sf=n),placeholder:"请输入省份","allow-search":"",options:[...e(L),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"pc",label:"批次:"},{default:t(()=>[l(w,{modelValue:e(a).pc,"onUpdate:modelValue":o[3]||(o[3]=n=>e(a).pc=n),modelModifiers:{trim:!0},placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"yxmc",label:"院校名称:"},{default:t(()=>[l(w,{modelValue:e(a).yxmc,"onUpdate:modelValue":o[4]||(o[4]=n=>e(a).yxmc=n),modelModifiers:{trim:!0},placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"wsf",label:"省份-招生数据:"},{default:t(()=>[l(k,{modelValue:e(a).wsf,"onUpdate:modelValue":o[5]||(o[5]=n=>e(a).wsf=n),placeholder:"请输入省份-招生数据","allow-search":"",options:[...e(L),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"wnf",label:"年份-招生数据:"},{default:t(()=>[l(V,{modelValue:e(a).wnf,"onUpdate:modelValue":o[6]||(o[6]=n=>e(a).wnf=n),modelModifiers:{trim:!0},placeholder:"请输入年份-招生数据"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"kl",label:"科类:"},{default:t(()=>[l(w,{modelValue:e(a).kl,"onUpdate:modelValue":o[7]||(o[7]=n=>e(a).kl=n),modelModifiers:{trim:!0},placeholder:"请输入科类"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"yxdm",label:"院校代码:"},{default:t(()=>[l(w,{modelValue:e(a).yxdm,"onUpdate:modelValue":o[8]||(o[8]=n=>e(a).yxdm=n),modelModifiers:{trim:!0},placeholder:"请输入院校代码"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"zx",label:"再选:"},{default:t(()=>[l(w,{modelValue:e(a).zx,"onUpdate:modelValue":o[9]||(o[9]=n=>e(a).zx=n),modelModifiers:{trim:!0},placeholder:"请输入再选"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"zyz",label:"专业组:"},{default:t(()=>[l(w,{modelValue:e(a).zyz,"onUpdate:modelValue":o[10]||(o[10]=n=>e(a).zyz=n),modelModifiers:{trim:!0},placeholder:"请输入专业组"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"yc",label:"位次预测:"},{default:t(()=>[l(V,{modelValue:e(a).yc,"onUpdate:modelValue":o[11]||(o[11]=n=>e(a).yc=n),modelModifiers:{trim:!0},placeholder:"请输入位次预测"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{span:24},{default:t(()=>[l(m,{field:"yxbz",label:"院校备注:"},{default:t(()=>[l(T,{modelValue:e(a).yxbz,"onUpdate:modelValue":o[12]||(o[12]=n=>e(a).yxbz=n),modelModifiers:{trim:!0},"auto-size":{minRows:4},placeholder:"请输入院校备注"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),de=M({name:"zsSummary"}),se=M({...de,props:{data:{default:()=>({})}},emits:["close","success"],setup(r,{emit:y}){const g=r,b=N(),[U,u]=E(null),{form:a,formRef:x}=B(()=>({...g.data})),q={nf:{required:!0,message:"请输入年份"},province:{required:!0,message:"请输入省份"},yxId:{required:!0,message:"请选择院校名称"}},I=()=>{x.value.validate(p=>{p||g.data.id||i("summarySchoolPlan")})},i=async p=>{const{err:o}=await $(()=>A[p](a.value),{before:()=>u("okLoading"),after:()=>u(null)});o||(y("success"),y("close"))};return(p,o)=>{const V=d("a-input-number"),m=d("a-form-item"),f=d("a-grid-item"),k=d("a-select"),w=d("a-grid"),T=d("a-form"),v=d("a-modal");return P(),R(v,{title:e(j)("填写你想要汇总的数据",!!g.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"500px","align-center":!1,"mask-closable":!1,"ok-loading":e(U)==="okLoading",onCancel:o[3]||(o[3]=c=>y("close")),onOk:I},{default:t(()=>[l(T,{ref_key:"formRef",ref:x,model:e(a),"label-align":"left",size:"large","auto-label-width":"",rules:q},{default:t(()=>[l(w,{cols:1,"col-gap":24},{default:t(()=>[l(f,null,{default:t(()=>[l(m,{field:"nf",label:"年份:"},{default:t(()=>[l(V,{modelValue:e(a).nf,"onUpdate:modelValue":o[0]||(o[0]=c=>e(a).nf=c),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"province",label:"省份:"},{default:t(()=>[l(k,{modelValue:e(a).province,"onUpdate:modelValue":o[1]||(o[1]=c=>e(a).province=c),placeholder:"请输入省份","allow-search":"",options:[...e(L),...e(b).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(m,{field:"yxId",label:"院校名称:"},{default:t(()=>[l(k,{modelValue:e(a).yxId,"onUpdate:modelValue":o[2]||(o[2]=c=>e(a).yxId=c),options:e(b).schoolList,"virtual-list-props":{height:200},"allow-search":"","allow-clear":"",placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),re=M({name:"OtherWPlanSchool"}),pe=M({...re,setup(r){const{warningModal:y}=le(),[g,b]=E(null),U=N(),{form:u,resetForm:a}=B(()=>({sf:"",nf:"",yxmc:"",pc:"",wsf:"",wnf:""}),()=>p()),{selectRow:x,columnsData:q,visibleColumnsData:I,tableBaseOptions:i,resetData:p,extendTableList:o,setSelectRow:V,changeTableColumn:m,changeTableSize:f}=Y(oe(),()=>v()),k=()=>{y(`确定删除选中的${i.selectedKeys.length}数据吗？`,async c=>{const{err:s}=await $(()=>A.deleteSchoolPlan({ids:i.selectedKeys}),{successMsg:"操作成功"});s||(c(!0),i.selectedKeys=[],v())})},{data:w,loading:T,initData:v}=Z(async()=>{const{res:c,err:s}=await $(()=>A.getSchoolPlanList({...u.value,currentPage:i.pagination.current,pageSize:i.pagination.pageSize,pagingOrNot:"1"}));return s?[]:(i.pagination.total=c.data.totalCount,o(c==null?void 0:c.data.list))});return(c,s)=>{const n=d("a-select"),C=d("a-form-item"),h=d("a-grid-item"),K=d("a-input"),H=d("a-grid"),W=d("a-form"),G=d("icon-plus"),D=d("a-button"),J=d("icon-close"),Q=d("a-space"),X=d("a-table");return P(),ee("div",null,[l(te,{fold:"","table-columns":e(q),"table-size":e(i).size,onResetSearch:e(a),onSearch:e(p),onChangeTableSize:e(f),onChangeTableColumn:e(m)},{form:t(({collapsed:z})=>[l(W,{model:e(u),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[l(H,{cols:{md:3,lg:3,xl:3,xxl:3},"col-gap":12,collapsed:!z},{default:t(()=>[l(h,null,{default:t(()=>[l(C,{field:"sf",label:"省份:"},{default:t(()=>[l(n,{modelValue:e(u).sf,"onUpdate:modelValue":s[0]||(s[0]=_=>e(u).sf=_),placeholder:"请输入省份","allow-search":"",options:[...e(L),...e(U).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(h,null,{default:t(()=>[l(C,{label:"年份:"},{default:t(()=>[l(K,{modelValue:e(u).nf,"onUpdate:modelValue":s[1]||(s[1]=_=>e(u).nf=_),modelModifiers:{trim:!0},placeholder:"请输入年份"},null,8,["modelValue"])]),_:1})]),_:1}),l(h,null,{default:t(()=>[l(C,{field:"wsf",label:"省份-招生数据:"},{default:t(()=>[l(n,{modelValue:e(u).wsf,"onUpdate:modelValue":s[2]||(s[2]=_=>e(u).wsf=_),placeholder:"请输入省份-招生数据","allow-search":"",options:[...e(L),...e(U).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),l(h,null,{default:t(()=>[l(C,{field:"wnf",label:"年份-招生数据:"},{default:t(()=>[l(K,{modelValue:e(u).wnf,"onUpdate:modelValue":s[3]||(s[3]=_=>e(u).wnf=_),modelModifiers:{trim:!0},placeholder:"请输入年份-招生数据"},null,8,["modelValue"])]),_:1})]),_:1}),l(h,null,{default:t(()=>[l(C,{field:"yxmc",label:"院校名称:"},{default:t(()=>[l(K,{modelValue:e(u).yxmc,"onUpdate:modelValue":s[4]||(s[4]=_=>e(u).yxmc=_),modelModifiers:{trim:!0},placeholder:"请输入院校名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(h,null,{default:t(()=>[l(C,{label:"批次:"},{default:t(()=>[l(K,{modelValue:e(u).pc,"onUpdate:modelValue":s[5]||(s[5]=_=>e(u).pc=_),modelModifiers:{trim:!0},placeholder:"请输入批次"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:t(()=>[l(Q,null,{default:t(()=>[l(D,{type:"outline",onClick:s[6]||(s[6]=z=>e(b)("zsAddSchoolEnPlan"))},{icon:t(()=>[l(G)]),default:t(()=>[O(" 新增 ")]),_:1}),l(D,{type:"outline",status:"danger",disabled:!e(i).selectedKeys.length,loading:e(g)==="删除",onClick:k},{icon:t(()=>[l(J)]),default:t(()=>[O(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:t(()=>[l(X,{"selected-keys":e(i).selectedKeys,"onUpdate:selectedKeys":s[7]||(s[7]=z=>e(i).selectedKeys=z),class:"zs-table","row-key":"id",data:e(w),"row-selection":e(i).rowSelection,bordered:e(i).bordered,pagination:e(i).pagination,size:e(i).size,columns:e(I),stripe:e(i).stripe,loading:e(T)},{operate:t(({record:z})=>[l(D,{type:"text",onClick:_=>e(V)(z,()=>e(b)("zsAddSchoolEnPlan"))},{default:t(()=>[O("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(g)==="zsAddSchoolEnPlan"?(P(),R(ne,{key:0,data:e(x),onSuccess:e(v),onClose:s[8]||(s[8]=z=>e(V)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):F("",!0),e(g)==="zsSummary"?(P(),R(se,{key:1,data:e(x),onSuccess:e(v),onClose:s[9]||(s[9]=z=>e(V)({},()=>e(b)(null)))},null,8,["data","onSuccess"])):F("",!0)])}}});export{pe as default};
