import{a as j,n as c,d as x,E as B,s as U,v as A,b as L,r as i,o as O,e as F,g as t,w as n,c as e,i as y,f as P,k as S,A as q,S as T}from"./index-8a2cb146.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const G=()=>{const{getDictionaryItem:_}=j();return[{title:"收件人",dataIndex:"recipient",show:!0,align:"center",render:({record:o})=>c(o.recipient)},{title:"标题",dataIndex:"subject",show:!0,align:"center",render:({record:o})=>c(o.subject)},{title:"邮箱内容",dataIndex:"content",show:!0,align:"center",tooltip:!0,ellipsis:!0,render:({record:o})=>c(o.content)},{title:"发件人",dataIndex:"addresser",show:!0,align:"center",render:({record:o})=>c(o.addresser)},{title:"状态",dataIndex:"state",show:!0,align:"center",render:({record:o})=>c(_("new_base_state",o.state).detailName)},{title:"发送时间",dataIndex:"sendTime",show:!0,align:"center",render:({record:o})=>c(o.sendTime)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}]},H=P("span",{class:"mx-3"},"-",-1),J=x({name:"SystemMailViewManage"}),le=x({...J,setup(_){const{warningModal:o}=q(),[h,Q]=B(null),{form:r,resetForm:V}=U(()=>({createTimeStart:"",createTimeEnd:"",recipient:"",subject:""}),()=>g()),{selectRow:W,columnsData:C,visibleColumnsData:z,tableBaseOptions:l,resetData:g,extendTableList:X,setSelectRow:Z,changeTableColumn:k,changeTableSize:v}=A(G(),()=>b()),I=d=>{o(`确定操作选中的${l.selectedKeys.length}数据吗？`,async a=>{const{res:u}=await S(()=>T[d]({idList:l.selectedKeys}),{successMsg:"操作成功"});a(!0),u&&(l.selectedKeys=[],b())})},{data:K,loading:D,initData:b}=L(async()=>{const{res:d,err:a}=await S(()=>T.getEmailList({...r.value,currentPage:l.pagination.current,pageSize:l.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(l.pagination.total=d.data.totalCount,d==null?void 0:d.data.dataList)});return(d,a)=>{const u=i("a-input"),m=i("a-form-item"),p=i("a-grid-item"),f=i("a-date-picker"),E=i("a-grid"),M=i("a-form"),R=i("icon-close"),w=i("a-button"),N=i("a-space"),$=i("a-table");return O(),F("div",null,[t(Y,{"table-columns":e(C),"table-size":e(l).size,onResetSearch:e(V),onSearch:e(g),onChangeTableSize:e(v),onChangeTableColumn:e(k)},{form:n(()=>[t(M,{model:e(r),"label-align":"left",size:"large","auto-label-width":""},{default:n(()=>[t(E,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:n(()=>[t(p,null,{default:n(()=>[t(m,{label:"收件人:"},{default:n(()=>[t(u,{modelValue:e(r).recipient,"onUpdate:modelValue":a[0]||(a[0]=s=>e(r).recipient=s),placeholder:"请输入收件人"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:n(()=>[t(m,{label:"标题:"},{default:n(()=>[t(u,{modelValue:e(r).subject,"onUpdate:modelValue":a[1]||(a[1]=s=>e(r).subject=s),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:n(()=>[t(m,{label:"选择日期:"},{default:n(()=>[t(f,{modelValue:e(r).createTimeStart,"onUpdate:modelValue":a[2]||(a[2]=s=>e(r).createTimeStart=s),class:"flex1",placeholder:"请选择开始日期"},null,8,["modelValue"]),H,t(f,{modelValue:e(r).createTimeEnd,"onUpdate:modelValue":a[3]||(a[3]=s=>e(r).createTimeEnd=s),class:"flex1",placeholder:"请选择截止日期"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:n(()=>[t(N,null,{default:n(()=>[t(w,{type:"outline",status:"danger",disabled:!e(l).selectedKeys.length,loading:e(h)==="删除",onClick:a[4]||(a[4]=s=>I("deleteEmail"))},{icon:n(()=>[t(R)]),default:n(()=>[y(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:n(()=>[t($,{"selected-keys":e(l).selectedKeys,"onUpdate:selectedKeys":a[5]||(a[5]=s=>e(l).selectedKeys=s),class:"zs-table","row-key":"id",data:e(K),"row-selection":e(l).rowSelection,bordered:e(l).bordered,pagination:e(l).pagination,size:e(l).size,columns:e(z),stripe:e(l).stripe,loading:e(D)},{operate:n(({record:s})=>[t(w,{type:"text",status:"success",onClick:ee=>d.$router.push(`/system/mailViewManage/operate?id=${s.id}&isReadOnly=true`)},{default:n(()=>[y("详情")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{le as default};
