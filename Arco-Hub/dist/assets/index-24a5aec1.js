import{d as C,J as f,K as U,E as F,s as P,v as J,x as M,y as Q,r as n,o as G,e as H,g as e,w as a,c as t,i,f as w,t as _,k as I,L as W,B as z}from"./index-8a2cb146.js";import{f as X}from"./options-aafac76d.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const ee=()=>[{title:"指标名称",dataIndex:"name",show:!0,align:"center"},{title:"代码",dataIndex:"code",show:!0,align:"center"},{title:"人次数（本季）",dataIndex:"name",show:!0,align:"center",children:[{title:"组织",dataIndex:"zuzhiNum",align:"center"},{title:"接待",dataIndex:"jiedaiNum",align:"center"}]},{title:"人天数（本季）",dataIndex:"name",align:"center",show:!0,children:[{title:"组织",dataIndex:"zuzhiDays",align:"center"},{title:"接待",dataIndex:"jiedaiDays",align:"center"}]}],T=[{label:"第一季度",value:1},{label:"第二季度",value:2},{label:"第三季度",value:3},{label:"第四季度",value:4}],ae=w("div",{class:"text-red",style:{"margin-bottom":"10px"}},"该统计数据仅供参考",-1),te=C({name:"AdministrationDomesticTravel"}),ce=C({...te,setup(ne){f.extend(U);const[S,g]=F(""),{form:o,resetForm:D}=P(()=>({quarter:f().quarter(),statyear:f().format("YYYY")}),()=>b()),{columnsData:N,visibleColumnsData:k,tableBaseOptions:p,resetData:b,changeTableColumn:V,changeTableSize:q}=J(ee(),()=>y()),{data:r,loading:A,initData:y}=M(async()=>{const{res:s,err:l}=await I(()=>z.getDomesticTourismSituation({...o.value}));return l?[]:s==null?void 0:s.data},{tourismInfoList:[],companyName:"",licenseNumber:"",quarter:"",statyear:""}),B=async()=>{const{res:s,err:l}=await I(()=>z.exportDomesticTourismSituation({...o.value}),{after:()=>g(""),before:()=>g("导出报表")});if(l)return;const c=X(T,o.value.quarter);W(s,`国内旅游情况-${o.value.statyear}${c==null?void 0:c.label}.xls`)};return Q(y),(s,l)=>{const c=n("a-year-picker"),h=n("a-form-item"),x=n("a-grid-item"),O=n("a-select"),R=n("a-grid"),$=n("a-form"),Y=n("icon-download"),v=n("a-button"),j=n("a-space"),E=n("a-typography-title"),d=n("a-tag"),m=n("a-descriptions-item"),K=n("a-descriptions"),L=n("a-table");return G(),H("div",null,[e(Z,{"table-columns":t(N),"table-size":t(p).size,onResetSearch:t(D),onSearch:t(b),onChangeTableSize:t(q),onChangeTableColumn:t(V)},{form:a(()=>[e($,{model:t(o),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[e(R,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:a(()=>[e(x,null,{default:a(()=>[e(h,{label:"年度:"},{default:a(()=>[e(c,{modelValue:t(o).statyear,"onUpdate:modelValue":l[0]||(l[0]=u=>t(o).statyear=u),class:"flex1",placeholder:"请选择年份"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(h,{label:"季度:"},{default:a(()=>[e(O,{modelValue:t(o).quarter,"onUpdate:modelValue":l[1]||(l[1]=u=>t(o).quarter=u),options:t(T),placeholder:"请选择季度"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:a(()=>[e(j,null,{default:a(()=>[e(v,{type:"outline",loading:t(S)==="导出报表",status:"warning",onClick:B},{icon:a(()=>[e(Y)]),default:a(()=>[i(" 导出报表 ")]),_:1},8,["loading"])]),_:1})]),table:a(()=>[w("div",null,[e(E,{heading:6,style:{"text-align":"center"}},{default:a(()=>[i(" 旅行社组织接待国内旅游情况 ")]),_:1}),e(K,{size:"large",column:2},{default:a(()=>[e(m,{label:"单位名称："},{default:a(()=>[e(d,null,{default:a(()=>[i(_(t(r).companyName),1)]),_:1})]),_:1}),e(m,{label:"许可证编号："},{default:a(()=>[e(d,null,{default:a(()=>[i(_(t(r).licenseNumber),1)]),_:1})]),_:1}),e(m,{label:"年度："},{default:a(()=>[e(d,null,{default:a(()=>[i(_(t(r).statyear),1)]),_:1})]),_:1}),e(m,{label:"季度："},{default:a(()=>[e(d,null,{default:a(()=>[i(_(t(r).quarter),1)]),_:1})]),_:1})]),_:1})]),ae,e(L,{class:"zs-table","row-key":"id",data:t(r).tourismInfoList,bordered:{cell:!0},size:t(p).size,pagination:!1,columns:t(k),stripe:t(p).stripe,loading:t(A)},{operate:a(({record:u})=>[e(v,{type:"text",onClick:oe=>s.$router.push(`/administration/companyInfo/operate?id=${u.id}`)},{default:a(()=>[i("编辑")]),_:2},1032,["onClick"])]),_:1},8,["data","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{ce as default};
