import{a as Q,n as c,X as W,p as g,O as f,d as R,q as ee,E as te,s as ae,v as le,M as D,x as oe,y as ne,r as d,o as b,e as se,g as t,w as l,c as e,i as _,t as T,z as re,l as z,h as U,f as ie,k as x}from"./index-8a2cb146.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_name_ZsPreviewSupplier_lang-c781d4ca.js";import{Q as C}from"./quitGroup-313e3abb.js";import"./index-2bbe694f.js";const pe=()=>{const{getDictionaryItem:N}=Q();return[{title:"编号",dataIndex:"routeId",show:!0,align:"center",render:({record:a})=>c(a.routeId)},{title:"团号",dataIndex:"signupNo",show:!0,align:"center",ellipsis:!0,tooltip:!0,slotName:"signupNo"},{title:"线路名称",dataIndex:"routeName",show:!0,align:"center",ellipsis:!0,tooltip:!0,render:({record:a})=>c(a.routeName)},{title:"报名营业部",dataIndex:"departName",show:!0,align:"center",ellipsis:!0,tooltip:!0,render:({record:a})=>c(a.departName)},{title:"供应商名称",slotName:"supName",show:!0,ellipsis:!0,tooltip:!0,align:"center"},{title:"创建日期",dataIndex:"createTime",show:!0,align:"center",render:({record:a})=>c(W(a.createTime,"YYYY-MM-DD"))},{title:"退团人数",dataIndex:"outNum",show:!0,align:"right",render:({record:a})=>c(a.outNum)},{title:"订单同行总费用",dataIndex:"supsigCost",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},f(`${a.supsigCost??"0"}`))},{title:"退团同行总金额",dataIndex:"settleTotal",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},f(`${a.settleTotal??"0"}`))},{title:"订单剩余金额",dataIndex:"sigRemainingCost",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},f(`${a.sigRemainingCost??"0"}`))},{title:"订单保险费",dataIndex:"insuranceCost",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},f(`${a.insuranceCost??"0"}`))},{title:"退团保险费",dataIndex:"inssettleTotal",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},f(`${a.inssettleTotal??"0"}`))},{title:"保险费剩余金额",dataIndex:"remainingInsuranceCost",show:!0,align:"right",render:({record:a})=>g("span",{class:"text-red text-price"},f(`${a.remainingInsuranceCost??"0"}`))},{title:"退团状态",dataIndex:"state",show:!0,align:"center",render:({record:a})=>c(N("signoutOrderState",a.state).detailName)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"left"}]},me=ie("span",{class:"mx-3"},"-",-1),ce=R({name:"QuitGroupPlatformQuit"}),xe=R({...ce,setup(N){const{getDictionaryInfo:a}=Q(),{vAuthority:P}=ee(),[A,w]=te(null),{form:r,resetForm:G}=ae(()=>({groupId:"",routeName:"",supName:"",state:"",startDate:"",endDate:"",provinceCode:""}),()=>I()),{selectRow:L,columnsData:q,visibleColumnsData:B,tableBaseOptions:u,resetData:I,setSelectRow:y,extendTableList:O,changeTableColumn:K,changeTableSize:Y}=le(pe(),()=>v()),{data:M}=D(async()=>{const{res:i}=await x(()=>C.getSupplierSelectList({}));return(i==null?void 0:i.data)??[]},[]),{data:E}=D(async()=>{const{res:i}=await x(()=>C.getPlatformAreaList({}));return(i==null?void 0:i.data)??[]},[]),{data:F,loading:Z,initData:v}=oe(async()=>{const{res:i,err:o}=await x(()=>C.getPlatformQuitGroupList({...r.value,currentPage:u.pagination.current,pageSize:u.pagination.pageSize,pagingOrNot:"1"}));return o?[]:(u.pagination.total=i.data.totalCount,O(i==null?void 0:i.data.signoutRecordList))});return ne(v),(i,o)=>{const V=d("a-input"),p=d("a-form-item"),m=d("a-grid-item"),h=d("a-select"),$=d("a-date-picker"),X=d("a-grid"),j=d("a-form"),S=d("a-link"),k=d("a-button"),H=d("a-button-group"),J=d("a-table");return b(),se("div",null,[t(ue,{fold:"","table-columns":e(q),"table-size":e(u).size,onResetSearch:e(G),onSearch:e(I),onChangeTableSize:e(Y),onChangeTableColumn:e(K)},{form:l(({collapsed:n})=>[t(j,{model:e(r),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[t(X,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!n},{default:l(()=>[t(m,null,{default:l(()=>[t(p,{field:"groupId",label:"团号:"},{default:l(()=>[t(V,{modelValue:e(r).groupId,"onUpdate:modelValue":o[0]||(o[0]=s=>e(r).groupId=s),placeholder:"请输入团号"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(p,{field:"routeName",label:"线路名称:"},{default:l(()=>[t(V,{modelValue:e(r).routeName,"onUpdate:modelValue":o[1]||(o[1]=s=>e(r).routeName=s),placeholder:"请输入线路名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(p,{field:"supName",label:"供应商名称:"},{default:l(()=>[t(h,{modelValue:e(r).supName,"onUpdate:modelValue":o[2]||(o[2]=s=>e(r).supName=s),options:e(M),"allow-search":"","field-names":{label:"supName",value:"supName"},"virtual-list-props":{height:200},placeholder:"请选择"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(p,{field:"code",label:"订单状态:"},{default:l(()=>[t(h,{modelValue:e(r).state,"onUpdate:modelValue":o[3]||(o[3]=s=>e(r).state=s),options:e(a)("new_quit_group_state"),"field-names":{label:"detailName",value:"detailCode"},placeholder:"请选择"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(p,{field:"provinceCode",label:"地区:"},{default:l(()=>[t(h,{modelValue:e(r).provinceCode,"onUpdate:modelValue":o[4]||(o[4]=s=>e(r).provinceCode=s),options:e(E),"field-names":{label:"cityName",value:"provinceCode"},placeholder:"请选择"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(p,{label:"出团日期:"},{default:l(()=>[t($,{modelValue:e(r).startDate,"onUpdate:modelValue":o[5]||(o[5]=s=>e(r).startDate=s),class:"flex1",placeholder:"出团日期(开始)"},null,8,["modelValue"]),me,t($,{modelValue:e(r).endDate,"onUpdate:modelValue":o[6]||(o[6]=s=>e(r).endDate=s),class:"flex1",placeholder:"出团日期(结束)"},null,8,["modelValue"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),table:l(()=>[t(J,{"selected-keys":e(u).selectedKeys,"onUpdate:selectedKeys":o[7]||(o[7]=n=>e(u).selectedKeys=n),class:"zs-table","row-key":"id",data:e(F),"row-selection":e(u).rowSelection,bordered:e(u).bordered,pagination:e(u).pagination,size:e(u).size,columns:e(B),stripe:e(u).stripe,loading:e(Z)},{signupNo:l(({record:n})=>[t(S,{onClick:s=>i.$router.push(`/quitGroup/platformQuit/confirm?id=${n.id}&groupId=${n.signupNo}&state=${n.state}`)},{default:l(()=>[_(T(n.signupNo),1)]),_:2},1032,["onClick"])]),supName:l(({record:n})=>[t(S,{onClick:s=>e(y)({id:n.supId},()=>e(w)("ZsPreviewSupplier"))},{default:l(()=>[_(T(n.supName),1)]),_:2},1032,["onClick"])]),operate:l(({record:n})=>[t(H,null,{default:l(()=>[t(k,{type:"text",status:"success",onClick:s=>i.$router.push(`/quitGroup/platformQuit/operate?id=${n.id}&groupId=${n.signupNo}&state=${n.state}&isReadOnly=true`)},{default:l(()=>[_("详情")]),_:2},1032,["onClick"]),n.insType?U("",!0):re((b(),z(k,{key:0,type:"text",onClick:s=>i.$router.push(`/quitGroup/platformQuit/operate?id=${n.id}&groupId=${n.signupNo}&state=${n.state}`)},{default:l(()=>[_("平台经理确定")]),_:2},1032,["onClick"])),[[e(P),"QuitGroupPlatformQuitConfirm"]])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(A)==="ZsPreviewSupplier"?(b(),z(de,{key:0,data:e(L),onClose:o[8]||(o[8]=n=>e(y)({},()=>e(w)("")))},null,8,["data"])):U("",!0)])}}});export{xe as default};
