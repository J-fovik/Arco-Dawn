import{a as x,n as u,X as v,d as D,q as j,s as G,v as H,x as J,y as Q,r as l,o as m,e as W,g as s,w as a,c as e,z as f,l as y,i as g,k as C,A as Z,S as T}from"./index-8a2cb146.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const te=()=>{const{getDictionaryItem:c}=x();return[{title:"供应商名称",dataIndex:"supName",show:!0,align:"center",render:({record:t})=>u(t.supName)},{title:"供应商等级",dataIndex:"supLevel",show:!0,align:"center",render:({record:t})=>u(c("supLevel",t.supLevel).detailName)},{title:"联系人手机",dataIndex:"mobile",show:!0,align:"center",render:({record:t})=>u(t.mobile)},{title:"联系人",dataIndex:"linkman",show:!0,align:"center",render:({record:t})=>u(t.linkman)},{title:"法人",dataIndex:"legalPerson",show:!0,align:"center",render:({record:t})=>u(t.legalPerson)},{title:"签约时间",dataIndex:"startTime",show:!0,align:"center",render:({record:t})=>u(v(t.startTime,"YYYY-MM-DD"))},{title:"到期时间",dataIndex:"endTime",show:!0,align:"center",render:({record:t})=>u(v(t.endTime,"YYYY-MM-DD"))},{title:"供应商类型",dataIndex:"supType",show:!0,align:"center",render:({record:t})=>u(c("supType",t.supType).detailName)},{title:"状态",dataIndex:"state",show:!0,align:"center",render:({record:t})=>u(c("supState",t.state).detailName)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}]},ae=D({name:"SystemSupplierBasicManage"}),ie=D({...ae,setup(c){const{vAuthority:t}=j(),{warningModal:M}=Z(),{getDictionaryInfo:k}=x(),{form:d,resetForm:z}=G(()=>({supName:"",supLevel:""}),()=>S()),{selectRow:ne,columnsData:I,visibleColumnsData:N,tableBaseOptions:n,resetData:S,extendTableList:B,setSelectRow:se,changeTableColumn:L,changeTableSize:$}=H(te(),()=>_()),Y=r=>{M(`确定操作选中的${n.selectedKeys.length}数据吗？`,async o=>{const{err:b}=await C(()=>T[r]({idList:n.selectedKeys}),{successMsg:"操作成功"});b||(o(!0),n.selectedKeys=[],_())})},{data:V,loading:K,initData:_}=J(async()=>{const{res:r,err:o}=await C(()=>T.getSupplierList({...d.value,currentPage:n.pagination.current,pageSize:n.pagination.pageSize,pagingOrNot:"1"}));return o?[]:(n.pagination.total=r.data.totalCount,B(r==null?void 0:r.data.supplierList))});return Q(_),(r,o)=>{const b=l("a-input"),w=l("a-form-item"),h=l("a-grid-item"),R=l("a-select"),A=l("a-grid"),P=l("a-form"),U=l("icon-plus"),p=l("a-button"),E=l("icon-close"),O=l("a-space"),q=l("a-button-group"),F=l("a-table");return m(),W("div",null,[s(ee,{"table-columns":e(I),"table-size":e(n).size,onResetSearch:e(z),onSearch:e(S),onChangeTableSize:e($),onChangeTableColumn:e(L)},{form:a(()=>[s(P,{model:e(d),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[s(A,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:a(()=>[s(h,null,{default:a(()=>[s(w,{label:"供应商名称:"},{default:a(()=>[s(b,{modelValue:e(d).supName,"onUpdate:modelValue":o[0]||(o[0]=i=>e(d).supName=i),modelModifiers:{trim:!0},placeholder:"请输入供应商名称"},null,8,["modelValue"])]),_:1})]),_:1}),s(h,null,{default:a(()=>[s(w,{label:"供应商等级:"},{default:a(()=>[s(R,{modelValue:e(d).supLevel,"onUpdate:modelValue":o[1]||(o[1]=i=>e(d).supLevel=i),options:e(k)("supLevel"),"field-names":{label:"detailName",value:"detailCode"},placeholder:"请选择供应商等级"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:a(()=>[s(O,null,{default:a(()=>[f((m(),y(p,{type:"outline",onClick:o[2]||(o[2]=i=>r.$router.push("/system/supplierBasicManage/operate"))},{icon:a(()=>[s(U)]),default:a(()=>[g(" 新增 ")]),_:1})),[[e(t),"SystemSupplierBasicManageAdd"]]),f((m(),y(p,{type:"outline",status:"danger",disabled:!e(n).selectedKeys.length,onClick:o[3]||(o[3]=i=>Y("deleteSupplier"))},{icon:a(()=>[s(E)]),default:a(()=>[g(" 删除 ")]),_:1},8,["disabled"])),[[e(t),"SystemSupplierBasicManageDelete"]])]),_:1})]),table:a(()=>[s(F,{"selected-keys":e(n).selectedKeys,"onUpdate:selectedKeys":o[4]||(o[4]=i=>e(n).selectedKeys=i),class:"zs-table","row-key":"id",data:e(V),"row-selection":e(n).rowSelection,bordered:e(n).bordered,pagination:e(n).pagination,size:e(n).size,columns:e(N),stripe:e(n).stripe,loading:e(K)},{operate:a(({record:i})=>[s(q,null,{default:a(()=>[s(p,{type:"text",status:"success",onClick:X=>r.$router.push(`/system/supplierBasicManage/operate?id=${i.id}&isReadOnly=true`)},{default:a(()=>[g("详情")]),_:2},1032,["onClick"]),f((m(),y(p,{type:"text",onClick:X=>r.$router.push(`/system/supplierBasicManage/operate?id=${i.id}`)},{default:a(()=>[g("编辑")]),_:2},1032,["onClick"])),[[e(t),"SystemSupplierBasicManageEdit"]])]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{ie as default};
