import{d as L,g as q,h as B,i as F,j as D,r as o,o as $,l as E,w as t,a,b as e,m as h,n as Y,c as Z,e as P,p as ee,q as ae}from"./index-d007178a.js";import{f as O,t as te,a as le,c as oe,_ as ne}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as k}from"./options-aafac76d.js";import{M as v}from"./major-b28f8c7d.js";import"./index-13860ba0.js";const se=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"省份",dataIndex:"sf",show:!0,align:"center",render:({record:p})=>O(p.sf)},{title:"专业名称",dataIndex:"zyName",show:!0,align:"center",render:({record:p})=>O(p.zyName)},{title:"薪资",dataIndex:"salary",show:!0,align:"right",render:({record:p})=>te(le(p.salary))},{title:"操作",width:300,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],re=L({name:"zsAddProfessionalSalary"}),ie=L({...re,props:{data:{default:()=>({})}},emits:["close","success"],setup(p,{emit:y}){const f=p,b=q(),[T,r]=B(null),{form:c,formRef:x}=F(()=>({...f.data})),I={sf:{required:!0,message:"请选择省份"},zyId:{required:!0,message:"请输入专业名称"},salary:{required:!0,message:"请输入薪资"}},M=()=>{x.value.validate(i=>{i||(f.data.id?V("editMajorSalary"):V("addMajorSalary"))})},V=async i=>{const{err:s}=await h(()=>v[i]({...c.value}),{before:()=>r("okLoading"),after:()=>r(null)});s||(y("success"),y("close"))},{data:n}=D(async()=>{const{res:i,err:s}=await h(()=>v.getMajorList({}));return s?[]:i==null?void 0:i.data.schoolList.map((_,g)=>({label:_.zymc,value:_.id}))});return(i,s)=>{const _=o("a-select"),g=o("a-form-item"),w=o("a-grid-item"),j=o("a-input-number"),A=o("a-grid"),K=o("a-form"),z=o("a-modal");return $(),E(z,{title:e(oe)("专业薪资",!!f.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"30vw","align-center":!1,"mask-closable":!1,"ok-loading":e(T)==="okLoading",onCancel:s[3]||(s[3]=m=>y("close")),onOk:M},{default:t(()=>[a(K,{ref_key:"formRef",ref:x,model:e(c),"label-align":"left",size:"large","auto-label-width":"",rules:I},{default:t(()=>[a(A,{cols:1,"col-gap":24},{default:t(()=>[a(w,null,{default:t(()=>[a(g,{field:"sf",label:"省份:"},{default:t(()=>[a(_,{modelValue:e(c).sf,"onUpdate:modelValue":s[0]||(s[0]=m=>e(c).sf=m),placeholder:"请选择省份","allow-search":"",options:[...e(k),...e(b).provinceList],disabled:f.data.id},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),a(w,null,{default:t(()=>[a(g,{field:"zyId",label:"专业名称:"},{default:t(()=>[a(_,{modelValue:e(c).zyId,"onUpdate:modelValue":s[1]||(s[1]=m=>e(c).zyId=m),placeholder:"请选择专业名称","allow-search":"",options:[...e(k),...e(n)],disabled:f.data.id,"virtual-list-props":{height:200}},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),a(w,null,{default:t(()=>[a(g,{field:"salary",label:"薪资:"},{default:t(()=>[a(j,{modelValue:e(c).salary,"onUpdate:modelValue":s[2]||(s[2]=m=>e(c).salary=m),modelModifiers:{trim:!0},placeholder:"请输入薪资",precision:2,min:0,max:1e5},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),de=L({name:"MajorProfessionalSalary"}),ge=L({...de,setup(p){const{warningModal:y}=ae(),[f,b]=B(null),T=q(),{form:r,resetForm:c}=F(()=>({salaryList:[0,1e5],sf:"",zyId:""}),()=>i()),x={0:"0",2e4:"20000",4e4:"40000",6e4:"60000",8e4:"80000",1e5:"100000"},{selectRow:I,columnsData:M,visibleColumnsData:V,tableBaseOptions:n,resetData:i,extendTableList:s,setSelectRow:_,changeTableColumn:g,changeTableSize:w}=Y(se(),()=>z()),j=()=>{y(`确定删除选中的${n.selectedKeys.length}数据吗？`,async d=>{const{err:l}=await h(()=>v.deleteMajorSalary({ids:n.selectedKeys}),{successMsg:"操作成功"});l||(d(!0),n.selectedKeys=[],z())})},{data:A,loading:K,initData:z}=D(async()=>{const{res:d,err:l}=await h(()=>v.getMajorSalary({...r.value,currentPage:n.pagination.current,pageSize:n.pagination.pageSize,pagingOrNot:"1"}));return l?[]:(n.pagination.total=d.data.totalCount,s(d==null?void 0:d.data.list))}),{data:m}=D(async()=>{const{res:d,err:l}=await h(()=>v.getMajorList({}));return l?[]:d==null?void 0:d.data.schoolList.map((S,C)=>({label:S.zymc,value:S.id}))});return(d,l)=>{const S=o("a-select"),C=o("a-form-item"),N=o("a-grid-item"),J=o("a-slider"),U=o("a-space"),G=o("a-grid"),H=o("a-form"),Q=o("icon-plus"),R=o("a-button"),W=o("icon-close"),X=o("a-table");return $(),Z("div",null,[a(ne,{"table-columns":e(M),"table-size":e(n).size,onResetSearch:e(c),onSearch:e(i),onChangeTableSize:e(w),onChangeTableColumn:e(g)},{form:t(()=>[a(H,{model:e(r),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[a(G,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:t(()=>[a(N,null,{default:t(()=>[a(C,{field:"sf",label:"省份:"},{default:t(()=>[a(S,{modelValue:e(r).sf,"onUpdate:modelValue":l[0]||(l[0]=u=>e(r).sf=u),placeholder:"请输入省份","allow-search":"",options:[...e(k),...e(T).provinceList]},null,8,["modelValue","options"])]),_:1})]),_:1}),a(N,null,{default:t(()=>[a(C,{field:"zyId",label:"专业名称:"},{default:t(()=>[a(S,{modelValue:e(r).zyId,"onUpdate:modelValue":l[1]||(l[1]=u=>e(r).zyId=u),placeholder:"请输入专业名称","allow-search":"","allow-clear":"","virtual-list-props":{height:200},options:[...e(k),...e(m)]},null,8,["modelValue","options"])]),_:1})]),_:1}),a(N,null,{default:t(()=>[a(C,{label:"薪资范围:"},{default:t(()=>[a(U,{direction:"vertical",size:"large",class:"flex1"},{default:t(()=>[a(J,{modelValue:e(r).salaryList,"onUpdate:modelValue":l[2]||(l[2]=u=>e(r).salaryList=u),range:"",min:0,max:1e5,marks:x,style:{width:"380px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:t(()=>[a(U,null,{default:t(()=>[a(R,{type:"outline",onClick:l[3]||(l[3]=u=>e(b)("zsAddProfessionalSalary"))},{icon:t(()=>[a(Q)]),default:t(()=>[P(" 新增 ")]),_:1}),a(R,{type:"outline",status:"danger",disabled:!e(n).selectedKeys.length,loading:e(f)==="删除",onClick:j},{icon:t(()=>[a(W)]),default:t(()=>[P(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:t(()=>[a(X,{"selected-keys":e(n).selectedKeys,"onUpdate:selectedKeys":l[4]||(l[4]=u=>e(n).selectedKeys=u),class:"zs-table","row-key":"id",data:e(A),"row-selection":e(n).rowSelection,bordered:e(n).bordered,pagination:e(n).pagination,size:e(n).size,columns:e(V),stripe:e(n).stripe,loading:e(K)},{operate:t(({record:u})=>[a(R,{type:"text",onClick:ue=>e(_)(u,()=>e(b)("zsAddProfessionalSalary"))},{default:t(()=>[P("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(f)==="zsAddProfessionalSalary"?($(),E(ie,{key:0,data:e(I),majorList:e(m),onSuccess:e(z),onClose:l[5]||(l[5]=u=>e(_)({},()=>e(b)(null)))},null,8,["data","majorList","onSuccess"])):ee("",!0)])}}});export{ge as default};
