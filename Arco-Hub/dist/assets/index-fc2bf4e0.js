import{f as k,U as x,d as C,x as K,h as F,i as $,k as P,r as u,o as L,l as Q,w as l,a as t,b as e,m as q,n as W,j as X,c as Z,e as M,p as ee,q as te}from"./index-d007178a.js";import{f as c,b as oe,c as le,_ as ae}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import"./index-13860ba0.js";const z={getVocationList:o=>k({method:"post",url:x.VOCATIONAL.GET_VOCATION_LIST,data:o}),addVocationList:o=>k({method:"post",url:x.VOCATIONAL.ADD_VOCATION_LIST,data:o}),updateVocation:o=>k({method:"post",url:x.VOCATIONAL.UPDATE_VOCATION_LIST,data:o}),deleteVocation:o=>k({method:"post",url:x.VOCATIONAL.DELETEE_VOCATION_LIST,data:o})},ne=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"职业类",dataIndex:"vocationalType",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>c(o.vocationalType)},{title:"职业岗位",dataIndex:"vocationPost",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.vocationPost)},{title:"职业定义",dataIndex:"vocationDefine",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.vocationDefine)},{title:"任务责任",dataIndex:"taskResponsibility",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.taskResponsibility)},{title:"知识背景",dataIndex:"knowledge",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.knowledge)},{title:"大学课程",dataIndex:"universityCourses",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.universityCourses)},{title:"职业技能",dataIndex:"vocationalSkills",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.vocationalSkills)},{title:"从业资格",dataIndex:"professionQualification",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.professionQualification)},{title:"常用工具",dataIndex:"commonTools",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.commonTools)},{title:"薪酬待遇",dataIndex:"salaryTreatment",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.salaryTreatment)},{title:"工作环境",dataIndex:"workEnvironment",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.workEnvironment)},{title:"发展前景",dataIndex:"promisingFuture",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.promisingFuture)},{title:"职业道德",dataIndex:"professionalEthics",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(o.professionalEthics)},{title:"添加时间",dataIndex:"createTime",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>c(oe(o.createTime,"YYYY-MM-DD HH:mm:ss","-"))},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ie=C({name:"zsAddVocation"}),re=C({...ie,props:{data:{default:()=>({})}},emits:["close","success"],setup(o,{emit:_}){const V=o;K();const[T,m]=F(null),{form:n,formRef:y}=$(()=>({...V.data})),S={vocationalType:{required:!0,message:"请输入请输入姓名"},vocationPost:{required:!0,message:"请输入职业岗位"},vocationDefine:{required:!0,message:"请输入职业定义"},taskResponsibility:{required:!0,message:"请输入任务责任"},knowledge:{required:!0,message:"请输入知识背景"},universityCourses:{required:!0,message:"请输入大学课程"},vocationalSkills:{required:!0,message:"请输入职业技能"},professionQualification:{required:!0,message:"请输入从业资格"},commonTools:{required:!0,message:"请输入常用工具"},salaryTreatment:{required:!0,message:"请输入薪酬待遇"},workEnvironment:{required:!0,message:"请输入工作环境"},promisingFuture:{required:!0,message:"请输入发展前景"},professionalEthics:{required:!0,message:"请输入职业道德"}};P([]),P([]);const I=()=>{y.value.validate(g=>{g||(V.data.id?r("updateVocation"):r("addVocationList"))})},r=async g=>{const{err:a}=await q(()=>z[g]({...n.value}),{before:()=>m("okLoading"),after:()=>m(null)});a||(_("success"),_("close"))};return(g,a)=>{const w=u("a-input"),d=u("a-form-item"),p=u("a-textarea"),E=u("a-form"),A=u("a-modal");return L(),Q(A,{fullscreen:"",title:e(le)("职业库",!!V.data.id),"unmount-on-close":"",visible:"","align-center":!1,"mask-closable":!1,"ok-loading":e(T)==="okLoading",onCancel:a[13]||(a[13]=i=>_("close")),onOk:I},{default:l(()=>[t(E,{ref_key:"formRef",ref:y,model:e(n),"label-align":"left",size:"large","auto-label-width":"",rules:S},{default:l(()=>[t(d,{field:"vocationalType",label:"职业类:",required:""},{default:l(()=>[t(w,{modelValue:e(n).vocationalType,"onUpdate:modelValue":a[0]||(a[0]=i=>e(n).vocationalType=i),modelModifiers:{trim:!0},placeholder:"请输入职业类","max-length":20},null,8,["modelValue"])]),_:1}),t(d,{field:"vocationPost",label:"职业岗位:",required:""},{default:l(()=>[t(w,{modelValue:e(n).vocationPost,"onUpdate:modelValue":a[1]||(a[1]=i=>e(n).vocationPost=i),modelModifiers:{trim:!0},placeholder:"请输入职业岗位","max-length":20},null,8,["modelValue"])]),_:1}),t(d,{field:"vocationDefine",label:"职业定义:"},{default:l(()=>[t(p,{modelValue:e(n).vocationDefine,"onUpdate:modelValue":a[2]||(a[2]=i=>e(n).vocationDefine=i),modelModifiers:{trim:!0},placeholder:"请输入职业定义"},null,8,["modelValue"])]),_:1}),t(d,{field:"taskResponsibility",label:"任务责任:"},{default:l(()=>[t(p,{modelValue:e(n).taskResponsibility,"onUpdate:modelValue":a[3]||(a[3]=i=>e(n).taskResponsibility=i),modelModifiers:{trim:!0},placeholder:"请输入任务责任"},null,8,["modelValue"])]),_:1}),t(d,{field:"knowledge",label:"知识背景:"},{default:l(()=>[t(p,{modelValue:e(n).knowledge,"onUpdate:modelValue":a[4]||(a[4]=i=>e(n).knowledge=i),modelModifiers:{trim:!0},placeholder:"请输入知识背景"},null,8,["modelValue"])]),_:1}),t(d,{field:"universityCourses",label:"大学课程:"},{default:l(()=>[t(p,{modelValue:e(n).universityCourses,"onUpdate:modelValue":a[5]||(a[5]=i=>e(n).universityCourses=i),modelModifiers:{trim:!0},placeholder:"请输入大学课程"},null,8,["modelValue"])]),_:1}),t(d,{field:"vocationalSkills",label:"职业技能:"},{default:l(()=>[t(p,{modelValue:e(n).vocationalSkills,"onUpdate:modelValue":a[6]||(a[6]=i=>e(n).vocationalSkills=i),modelModifiers:{trim:!0},placeholder:"请输入职业技能"},null,8,["modelValue"])]),_:1}),t(d,{field:"professionQualification",label:"从业资格:"},{default:l(()=>[t(p,{modelValue:e(n).professionQualification,"onUpdate:modelValue":a[7]||(a[7]=i=>e(n).professionQualification=i),modelModifiers:{trim:!0},placeholder:"请输入从业资格"},null,8,["modelValue"])]),_:1}),t(d,{field:"commonTools",label:"常用工具:"},{default:l(()=>[t(p,{modelValue:e(n).commonTools,"onUpdate:modelValue":a[8]||(a[8]=i=>e(n).commonTools=i),modelModifiers:{trim:!0},placeholder:"请输入常用工具"},null,8,["modelValue"])]),_:1}),t(d,{field:"salaryTreatment",label:"薪酬待遇:"},{default:l(()=>[t(p,{modelValue:e(n).salaryTreatment,"onUpdate:modelValue":a[9]||(a[9]=i=>e(n).salaryTreatment=i),modelModifiers:{trim:!0},placeholder:"请输入薪酬待遇"},null,8,["modelValue"])]),_:1}),t(d,{field:"workEnvironment",label:"工作环境:"},{default:l(()=>[t(p,{modelValue:e(n).workEnvironment,"onUpdate:modelValue":a[10]||(a[10]=i=>e(n).workEnvironment=i),modelModifiers:{trim:!0},placeholder:"请输入工作环境"},null,8,["modelValue"])]),_:1}),t(d,{field:"promisingFuture",label:"发展前景:"},{default:l(()=>[t(p,{modelValue:e(n).promisingFuture,"onUpdate:modelValue":a[11]||(a[11]=i=>e(n).promisingFuture=i),modelModifiers:{trim:!0},placeholder:"请输入发展前景"},null,8,["modelValue"])]),_:1}),t(d,{field:"professionalEthics",label:"职业道德:"},{default:l(()=>[t(p,{modelValue:e(n).professionalEthics,"onUpdate:modelValue":a[12]||(a[12]=i=>e(n).professionalEthics=i),modelModifiers:{trim:!0},placeholder:"请输入职业道德"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),se=C({name:"OccupationList"}),pe=C({...se,setup(o){K();const{warningModal:_}=te(),[V,T]=F(null),{form:m,resetForm:n}=$(()=>({vocationalType:"",createTimeStart:"",createTimeEnd:"",vocationPost:""}),()=>g()),{selectRow:y,columnsData:S,visibleColumnsData:I,tableBaseOptions:r,resetData:g,extendTableList:a,createRowNo:w,setSelectRow:d,changeTableColumn:p,changeTableSize:E}=W(ne(),()=>h()),A=()=>{_(`确定删除选中的${r.selectedKeys.length}数据吗？`,async b=>{const{err:s}=await q(()=>z.deleteVocation({idList:r.selectedKeys}),{successMsg:"操作成功"});s||(b(!0),r.selectedKeys=[],h())})},{data:i,loading:B,initData:h}=X(async()=>{const{res:b,err:s}=await q(()=>z.getVocationList({...m.value,createTimeStart:m.value.createTimeStart,createTimeEnd:m.value.createTimeEnd,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return s?[]:(r.pagination.total=b.data.totalCount,b.data.list.map((O,v)=>({sortTableNo:w(v),...O})))});return(b,s)=>{const O=u("icon-plus"),v=u("a-button"),Y=u("icon-close"),H=u("a-space"),N=u("a-input"),U=u("a-form-item"),D=u("a-grid-item"),R=u("a-date-picker"),j=u("a-grid"),G=u("a-form"),J=u("a-table");return L(),Z("div",null,[t(ae,{"table-columns":e(S),"table-size":e(r).size,onResetSearch:e(n),onSearch:e(g),onChangeTableSize:e(E),onChangeTableColumn:e(p)},{operate:l(()=>[t(H,null,{default:l(()=>[t(v,{type:"outline",onClick:s[0]||(s[0]=f=>e(T)("zsAddVocation"))},{icon:l(()=>[t(O)]),default:l(()=>[M(" 新增 ")]),_:1}),t(v,{type:"outline",status:"danger",disabled:!e(r).selectedKeys.length,loading:e(V)==="删除",onClick:A},{icon:l(()=>[t(Y)]),default:l(()=>[M(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),form:l(()=>[t(G,{model:e(m),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[t(j,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:l(()=>[t(D,null,{default:l(()=>[t(U,{label:"职业类:"},{default:l(()=>[t(N,{class:"flex1",modelValue:e(m).vocationalType,"onUpdate:modelValue":s[1]||(s[1]=f=>e(m).vocationalType=f),modelModifiers:{trim:!0},placeholder:"请输入职业类"},null,8,["modelValue"])]),_:1})]),_:1}),t(D,null,{default:l(()=>[t(U,{label:"职业岗位:"},{default:l(()=>[t(N,{class:"flex1",modelValue:e(m).vocationPost,"onUpdate:modelValue":s[2]||(s[2]=f=>e(m).vocationPost=f),modelModifiers:{trim:!0},placeholder:"请输入职业岗位"},null,8,["modelValue"])]),_:1})]),_:1}),t(D,null,{default:l(()=>[t(U,{label:"添加日期范围:"},{default:l(()=>[t(R,{style:{width:"200px"},modelValue:e(m).createTimeStart,"onUpdate:modelValue":s[3]||(s[3]=f=>e(m).createTimeStart=f)},null,8,["modelValue"]),t(R,{style:{width:"200px"},modelValue:e(m).createTimeEnd,"onUpdate:modelValue":s[4]||(s[4]=f=>e(m).createTimeEnd=f)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),table:l(()=>[t(J,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":s[5]||(s[5]=f=>e(r).selectedKeys=f),class:"zs-table","row-key":"id",data:e(i),"row-selection":e(r).rowSelection,bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(I),stripe:e(r).stripe,loading:e(B)},{operate:l(({record:f})=>[t(v,{type:"text",onClick:de=>e(d)(f,()=>e(T)("zsAddVocation"))},{default:l(()=>[M("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(V)==="zsAddVocation"?(L(),Q(re,{key:0,data:e(y),onSuccess:e(h),onClose:s[6]||(s[6]=f=>e(d)({},()=>e(T)(null)))},null,8,["data","onSuccess"])):ee("",!0)])}}});export{pe as default};
