import{d as v,h as E,g as L,i as q,r as n,o as R,l as D,w as a,a as t,b as e,m as K,S as A,n as j,j as H,c as G,e as T,p as J,q as W}from"./index-d007178a.js";import{A as X}from"./options-aafac76d.js";import{f as x,c as Y,_ as ee}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import"./index-13860ba0.js";const te=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"院校名称",dataIndex:"yxmc",show:!0,align:"center",render:({record:i})=>x(i.yxmc)},{title:"签约地区流向",dataIndex:"bysQydqlx",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:i})=>x(i.bysQydqlx)},{title:"签约单位性质",dataIndex:"bysQydwxz",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:i})=>x(i.bysQydwxz)},{title:"签约单位",dataIndex:"bysQydw",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:i})=>x(i.bysQydw)},{title:"签约单位说明",dataIndex:"bysQydwsm",show:!0,align:"center",render:({record:i})=>x(i.bysQydwsm)},{title:"操作",width:100,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}],ae=v({name:"ZsAddEmployment"}),le=v({...ae,props:{data:{default:()=>({})}},emits:["close","success"],setup(i,{emit:b}){const u=i,[g,h]=E(null),_=L(),{form:d,formRef:z}=q(()=>({...u.data})),C={yxId:{required:!0,message:"请选择院校信息"}},V=()=>{z.value.validate(c=>{c||(u.data.id?l("editEmployment"):l("addEmployment"))})},l=async c=>{const{err:s}=await K(()=>A[c](d.value),{before:()=>h("okLoading"),after:()=>h(null)});s||(b("success"),b("close"))};return(c,s)=>{const S=n("a-select"),m=n("a-form-item"),p=n("a-grid-item"),f=n("a-textarea"),Q=n("a-grid"),k=n("a-form"),w=n("a-modal");return R(),D(w,{title:e(Y)("就业信息",!!u.data.id),"unmount-on-close":"",visible:"",top:"5%",width:"80vw","align-center":!1,"mask-closable":!1,"ok-loading":e(g)==="okLoading",onCancel:s[5]||(s[5]=o=>b("close")),onOk:V},{default:a(()=>[t(k,{ref_key:"formRef",ref:z,model:e(d),"label-align":"left",size:"large","auto-label-width":"",rules:C},{default:a(()=>[t(Q,{cols:1,"col-gap":24},{default:a(()=>[t(p,null,{default:a(()=>[t(m,{field:"yxId",label:"院校信息:"},{default:a(()=>[t(S,{modelValue:e(d).yxId,"onUpdate:modelValue":s[0]||(s[0]=o=>e(d).yxId=o),options:e(_).schoolList,"virtual-list-props":{height:200},disabled:!!u.data.id,"allow-search":"",placeholder:"请选择院校信息"},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(m,{field:"bysQydqlx",label:"签约地区流向:"},{default:a(()=>[t(f,{"auto-size":{minRows:4},modelValue:e(d).bysQydqlx,"onUpdate:modelValue":s[1]||(s[1]=o=>e(d).bysQydqlx=o),placeholder:"请输入签约地区"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(m,{field:"bysQydwxz",label:"签约单位性质:"},{default:a(()=>[t(f,{"auto-size":{minRows:4},modelValue:e(d).bysQydwxz,"onUpdate:modelValue":s[2]||(s[2]=o=>e(d).bysQydwxz=o),placeholder:"请输入签约单位性质"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(m,{field:"bysQydw",label:"签约单位:"},{default:a(()=>[t(f,{"auto-size":{minRows:4},modelValue:e(d).bysQydw,"onUpdate:modelValue":s[3]||(s[3]=o=>e(d).bysQydw=o),placeholder:"请输入签约单位"},null,8,["modelValue"])]),_:1})]),_:1}),t(p,null,{default:a(()=>[t(m,{field:"bysQydwsm",label:"签约说明:"},{default:a(()=>[t(f,{"auto-size":{minRows:4},modelValue:e(d).bysQydwsm,"onUpdate:modelValue":s[4]||(s[4]=o=>e(d).bysQydwsm=o),placeholder:"请输入签约单位说明"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","ok-loading"])}}}),oe=v({name:"SchoolEmploymentManage"}),ue=v({...oe,setup(i){const{warningModal:b}=W(),[u,g]=E(null),h=L(),{form:_,resetForm:d}=q(()=>({yxId:""}),()=>c()),{selectRow:z,columnsData:C,visibleColumnsData:V,tableBaseOptions:l,resetData:c,extendTableList:s,setSelectRow:S,changeTableColumn:m,changeTableSize:p}=j(te(),()=>w()),f=()=>{b(`确定删除选中的${l.selectedKeys.length}数据吗？`,async o=>{const{err:r}=await K(()=>A.deleteEmployment({ids:l.selectedKeys}),{successMsg:"操作成功"});r||(o(!0),l.selectedKeys=[],w())})},{data:Q,loading:k,initData:w}=H(async()=>{const{res:o,err:r}=await K(()=>A.getEmploymentList({..._.value,currentPage:l.pagination.current,pageSize:l.pagination.pageSize,pagingOrNot:"1"}));return r?[]:(l.pagination.total=o.data.totalCount,s(o==null?void 0:o.data.schoolList))});return(o,r)=>{const $=n("a-select"),N=n("a-form-item"),O=n("a-grid-item"),U=n("a-grid"),B=n("a-form"),M=n("icon-plus"),I=n("a-button"),P=n("icon-close"),Z=n("a-space"),F=n("a-table");return R(),G("div",null,[t(ee,{"table-columns":e(C),"table-size":e(l).size,onResetSearch:e(d),onSearch:e(c),onChangeTableSize:e(p),onChangeTableColumn:e(m)},{form:a(()=>[t(B,{model:e(_),"label-align":"left",size:"large","auto-label-width":""},{default:a(()=>[t(U,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12},{default:a(()=>[t(O,null,{default:a(()=>[t(N,{label:"院校名称:"},{default:a(()=>[t($,{modelValue:e(_).yxId,"onUpdate:modelValue":r[0]||(r[0]=y=>e(_).yxId=y),"virtual-list-props":{height:200},"allow-search":"",options:[...e(X),...e(h).schoolList],placeholder:"请选择院校名称"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),operate:a(()=>[t(Z,null,{default:a(()=>[t(I,{type:"outline",onClick:r[1]||(r[1]=y=>e(g)("ZsAddEmployment"))},{icon:a(()=>[t(M)]),default:a(()=>[T(" 新增 ")]),_:1}),t(I,{type:"outline",status:"danger",disabled:!e(l).selectedKeys.length,loading:e(u)==="删除",onClick:f},{icon:a(()=>[t(P)]),default:a(()=>[T(" 删除 ")]),_:1},8,["disabled","loading"])]),_:1})]),table:a(()=>[t(F,{"selected-keys":e(l).selectedKeys,"onUpdate:selectedKeys":r[2]||(r[2]=y=>e(l).selectedKeys=y),class:"zs-table","row-key":"id",data:e(Q),"row-selection":e(l).rowSelection,bordered:e(l).bordered,pagination:e(l).pagination,size:e(l).size,columns:e(V),stripe:e(l).stripe,loading:e(k)},{operate:a(({record:y})=>[t(I,{type:"text",onClick:ne=>e(S)(y,()=>e(g)("ZsAddEmployment"))},{default:a(()=>[T("编辑")]),_:2},1032,["onClick"])]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"]),e(u)==="ZsAddEmployment"?(R(),D(le,{key:0,data:e(z),onSuccess:e(w),onClose:r[3]||(r[3]=y=>e(S)({},()=>e(g)(null)))},null,8,["data","onSuccess"])):J("",!0)])}}});export{ue as default};
