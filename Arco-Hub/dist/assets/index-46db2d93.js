import{d as B,u as E,s as F,C as K,E as Z,r as p,o as i,l as _,w as a,g as e,c as o,e as U,j as k,F as I,f as T,i as y,V as z,k as x,t as J,_ as G}from"./index-8a2cb146.js";import{Z as H}from"./index-2bbe694f.js";import{O as D}from"./order-70291d37.js";const Q=["href"],W={class:"orderSubmit-footer box-flex jc-fe"},X=B({name:"OrderPlatformManageAuditing"}),Y=B({...X,setup($){const m=E(),M={},{form:t,formRef:c}=F(()=>({})),{jumpTabName:b}=K(),[h,V]=Z(null),g=u=>{c.value.validate(l=>{if(!l){if(u=="settleApplyRejectOfPlatform"&&!t.value.applyDesc)return z.error("请输入审核信息");A(u)}})},A=async u=>{const{err:l}=await x(()=>D[u]({applyDesc:t.value.applyDesc,groupIds:m.query.groupId?m.query.groupId:t.value.groupIds}),{before:()=>V("adoptLoading"),after:()=>V(""),successMsg:"操作成功"});l||b()};return(async()=>{const{res:u,err:l}=await x(()=>D.getAuditingDetail({groupIdList:m.query.groupId?[m.query.groupId]:JSON.parse(m.query.groupIds)}));if(l)return;const r=Object.entries(u==null?void 0:u.data.invoiceMap).map(([n,s])=>({groupId:n,fileList:s}));t.value={groupIds:u.data.groupIds,allMoney:u.data.allMoney,payUserName:u.data.payUserName,payBankName:u.data.payBankName,payNum:u.data.payNum,...u==null?void 0:u.data.settleRecordApply,costType:"订单费用",applyDesc:"",invoiceMap:r,settleType:u.data.settleRecordApply.settleType=="1"?"默认结算":"自定义结算"}})(),(u,l)=>{const r=p("a-input"),n=p("a-form-item"),s=p("a-grid-item"),R=p("a-input-number"),C=p("a-textarea"),O=p("a-grid"),N=p("a-card"),P=p("a-descriptions-item"),S=p("a-descriptions"),j=p("a-form"),f=p("a-button"),q=p("a-space");return i(),_(H,null,{default:a(()=>[e(j,{ref_key:"formRef",ref:c,model:o(t),"label-align":"left",size:"large","auto-label-width":"",rules:M},{default:a(()=>[e(N,{title:"结算审核",bordered:!1,class:"general-card"},{default:a(()=>[e(O,{cols:2,"col-gap":24,style:{"margin-top":"40px"}},{default:a(()=>[e(s,null,{default:a(()=>[e(n,{field:"groupIds",label:"结算团号:"},{default:a(()=>[e(r,{modelValue:o(t).groupIds,"onUpdate:modelValue":l[0]||(l[0]=d=>o(t).groupIds=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"supName",label:"供应商:"},{default:a(()=>[e(r,{modelValue:o(t).supName,"onUpdate:modelValue":l[1]||(l[1]=d=>o(t).supName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"receiveUserName",label:"收款账户名称:"},{default:a(()=>[e(r,{modelValue:o(t).receiveUserName,"onUpdate:modelValue":l[2]||(l[2]=d=>o(t).receiveUserName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"payUserName",label:"结算/付款账户名称:"},{default:a(()=>[e(r,{modelValue:o(t).payUserName,"onUpdate:modelValue":l[3]||(l[3]=d=>o(t).payUserName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"receiveBankName",label:"收款开户行:"},{default:a(()=>[e(r,{modelValue:o(t).receiveBankName,"onUpdate:modelValue":l[4]||(l[4]=d=>o(t).receiveBankName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"payBankName",label:"付款/结算开户行:"},{default:a(()=>[e(r,{modelValue:o(t).payBankName,"onUpdate:modelValue":l[5]||(l[5]=d=>o(t).payBankName=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"receiveNum",label:"收款账户:"},{default:a(()=>[e(r,{modelValue:o(t).receiveNum,"onUpdate:modelValue":l[6]||(l[6]=d=>o(t).receiveNum=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"payNum",label:"付款/结算账户:"},{default:a(()=>[e(r,{modelValue:o(t).payNum,"onUpdate:modelValue":l[7]||(l[7]=d=>o(t).payNum=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"allMoney",label:"结算金额(元):"},{default:a(()=>[e(R,{modelValue:o(t).allMoney,"onUpdate:modelValue":l[8]||(l[8]=d=>o(t).allMoney=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"costType",label:"费用类型:"},{default:a(()=>[e(r,{modelValue:o(t).costType,"onUpdate:modelValue":l[9]||(l[9]=d=>o(t).costType=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"settleType",label:"结算类型:"},{default:a(()=>[e(r,{modelValue:o(t).settleType,"onUpdate:modelValue":l[10]||(l[10]=d=>o(t).settleType=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"createTime",label:"创建时间:"},{default:a(()=>[e(r,{modelValue:o(t).createTime,"onUpdate:modelValue":l[11]||(l[11]=d=>o(t).createTime=d),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(n,{field:"applyDesc",label:"审核信息:"},{default:a(()=>[e(C,{modelValue:o(t).applyDesc,"onUpdate:modelValue":l[12]||(l[12]=d=>o(t).applyDesc=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{title:"发票文件",bordered:!1,class:"general-card margin-top"},{default:a(()=>[(i(!0),U(I,null,k(o(t).invoiceMap,(d,w)=>(i(),_(S,{column:{xs:1,md:2,lg:4},key:w},{default:a(()=>[(i(!0),U(I,null,k(d.fileList,(v,L)=>(i(),_(P,{label:d.groupId,key:L},{default:a(()=>[T("a",{href:v.attPath,color:"arcoblue"},J(v.attPath),9,Q)]),_:2},1032,["label"]))),128))]),_:2},1024))),128))]),_:1})]),_:1},8,["model"]),T("div",W,[e(q,null,{default:a(()=>[e(f,{type:"primary",status:"success",onClick:l[13]||(l[13]=()=>g("settleApplySuccessOfPlatform"))},{default:a(()=>[y("通过")]),_:1}),e(f,{type:"primary",status:"danger",onClick:l[14]||(l[14]=()=>g("settleApplyRejectOfPlatform"))},{default:a(()=>[y("驳回")]),_:1}),e(f,{onClick:l[15]||(l[15]=()=>o(b)())},{default:a(()=>[y("返回")]),_:1})]),_:1})])]),_:1})}}});const oe=G(Y,[["__scopeId","data-v-94ee09dd"]]);export{oe as default};
