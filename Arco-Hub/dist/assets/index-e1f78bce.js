import{Z as S}from"./index-13860ba0.js";import{d as _,u as z,h as x,x as h,i as C,r,o as V,l as v,w as t,a,b as l,e as y,m as R,R as B,T as q,V as U,p as I,s as k}from"./index-d007178a.js";import{p as K}from"./rules-f293393f.js";const Z=_({name:"ZsEditPassword"}),$=_({...Z,setup(W){const b=z(),[p,m]=x(null),{setUserInfo:c}=h(),{form:e,formRef:i}=C(()=>({oldPassWord:"",newPassWord:"",repeatPassWord:""})),f={oldPassWord:{required:!0,message:"请输入原密码"},newPassWord:{required:!0,message:"请输入新密码"},repeatPassWord:{required:!0,validator:(d,o)=>{d!==e.value.newPassWord&&o("两次密码输入不一致")}}},P=()=>{i.value.validate(async d=>{d||g()})},g=async()=>{const{err:d}=await R(()=>q.editPassword({oldPassWord:U(e.value.oldPassWord),newPassWord:U(e.value.newPassWord)}),{before:()=>m("确定"),after:()=>m(null),successMsg:"密码修改成功，请重新登录。"});d||(c({}),B.remove("userToken"),b.push("/login"))};return(d,o)=>{const u=r("a-input-password"),n=r("a-form-item"),N=r("a-button"),w=r("a-form");return V(),v(w,{ref_key:"formRef",ref:i,"label-align":"left",size:"large",direction:"vertical",layout:"vertical",style:{width:"600px"},"auto-label-width":"",model:l(e),rules:f},{default:t(()=>[a(n,{field:"oldPassWord",label:"原密码:",required:""},{default:t(()=>[a(u,{modelValue:l(e).oldPassWord,"onUpdate:modelValue":o[0]||(o[0]=s=>l(e).oldPassWord=s),placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),a(n,{field:"newPassWord",label:"新密码:",required:""},{default:t(()=>[a(u,{modelValue:l(e).newPassWord,"onUpdate:modelValue":o[1]||(o[1]=s=>l(e).newPassWord=s),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),a(n,{field:"repeatPassWord",label:"确定密码:",required:""},{default:t(()=>[a(u,{modelValue:l(e).repeatPassWord,"onUpdate:modelValue":o[2]||(o[2]=s=>l(e).repeatPassWord=s),placeholder:"请输入确定密码"},null,8,["modelValue"])]),_:1}),a(n,null,{default:t(()=>[a(N,{type:"primary",loading:l(p)==="确定",onClick:P},{default:t(()=>[y("确定")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}}),A=_({name:"ZsEditUser"}),E=_({...A,setup(W){const[b,p]=x(null),{userInfo:m,setUserInfo:c}=h(),{form:e,formRef:i}=C(()=>({...m})),f={phoneNumber:{required:!1,validator:(d,o)=>{d&&!K(d)&&o("请输入正确的手机号")}}},P=()=>{i.value.validate(async d=>{d||g()})},g=async()=>{const{err:d}=await R(()=>q.editUser({userName:e.value.userName,nickName:e.value.nickName,phoneNumber:e.value.phoneNumber,bz:e.value.bz}),{before:()=>p("确定"),after:()=>p(null),successMsg:"用户信息修改成功。"});d||c(e.value)};return(d,o)=>{const u=r("a-input"),n=r("a-form-item"),N=r("a-button"),w=r("a-form");return V(),v(w,{ref_key:"formRef",ref:i,"label-align":"left",size:"large",direction:"vertical",layout:"vertical",style:{width:"600px"},"auto-label-width":"",rules:f,model:l(e)},{default:t(()=>[a(n,{field:"loginName",label:"登录账号:"},{default:t(()=>[a(u,{modelValue:l(e).loginName,"onUpdate:modelValue":o[0]||(o[0]=s=>l(e).loginName=s),placeholder:"请输入登录账号",disabled:""},null,8,["modelValue"])]),_:1}),a(n,{field:"userName",label:"姓名:"},{default:t(()=>[a(u,{modelValue:l(e).userName,"onUpdate:modelValue":o[1]||(o[1]=s=>l(e).userName=s),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(n,{field:"nickName",label:"昵称:"},{default:t(()=>[a(u,{modelValue:l(e).nickName,"onUpdate:modelValue":o[2]||(o[2]=s=>l(e).nickName=s),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),a(n,{field:"phoneNumber",label:"手机号码:"},{default:t(()=>[a(u,{modelValue:l(e).phoneNumber,"onUpdate:modelValue":o[3]||(o[3]=s=>l(e).phoneNumber=s),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1}),l(e).dedicatedCode?(V(),v(n,{key:0,field:"dedicatedCode",label:"专属码:"},{default:t(()=>[a(u,{modelValue:l(e).dedicatedCode,"onUpdate:modelValue":o[4]||(o[4]=s=>l(e).dedicatedCode=s),placeholder:"请输入专属码",disabled:""},null,8,["modelValue"])]),_:1})):I("",!0),a(n,null,{default:t(()=>[a(N,{type:"primary",loading:l(b)==="确定",onClick:P},{default:t(()=>[y("确定")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}}),T={style:{"padding-left":"100px"}},D={style:{"padding-left":"100px"}},M=_({name:"SystemUserSetting"}),H=_({...M,setup(W){return(b,p)=>{const m=r("icon-user"),c=r("a-tab-pane"),e=r("icon-tool"),i=r("a-tabs"),f=r("a-card");return V(),v(S,null,{default:t(()=>[a(f,{bordered:!1,class:"general-card",style:{"padding-top":"16px"}},{default:t(()=>[a(i,{size:"large"},{default:t(()=>[a(c,{key:"1"},{title:t(()=>[a(m),y(" 个人信息 ")]),default:t(()=>[k("div",T,[a(E)])]),_:1}),a(c,{key:"2"},{title:t(()=>[a(e),y(" 修改密码 ")]),default:t(()=>[k("div",D,[a($)])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{H as default};
