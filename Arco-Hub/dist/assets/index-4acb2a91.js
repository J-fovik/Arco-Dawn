import{d as I,x as j,h as q,i as M,n as $,k as T,j as G,r as u,o as y,c as H,a as t,w as l,s as c,t as h,b as e,l as v,p as N,m as z}from"./index-d007178a.js";import{f as p,t as f,a as J,_ as W}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-430f1ffc.js";import{A as X}from"./options-aafac76d.js";import{V as Y}from"./vip-3bf0329d.js";import{C as Z}from"./customer-dc025a69.js";import"./index-13860ba0.js";const ee=()=>[{title:"序号",width:80,dataIndex:"sortTableNo",show:!0,align:"center"},{title:"交易时间",dataIndex:"createtime",show:!0,align:"center",render:({record:o})=>p(o.createtime)},{title:"交易类型",dataIndex:"transtype",show:!0,ellipsis:!0,align:"center",render:({record:o})=>p(o.transtype)},{title:"交易订单号",dataIndex:"transno",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:o})=>p(o.transno)},{title:"交易金额(元)",dataIndex:"amount",show:!0,ellipsis:!0,align:"center",render:({record:o})=>f(J(o.amount))},{title:"提成(元)",dataIndex:"agentCommission",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>f(o.agentCommission)},{title:"顾客手机号",dataIndex:"phone",show:!0,tooltip:!0,ellipsis:!0,align:"center",render:({record:o})=>p(o.phone)},{title:"代理商名称",dataIndex:"agentName",show:!0,align:"center",render:({record:o})=>p(o.agentName)}],te=c("span",null,"交易金额合计(元)：",-1),ae={class:"text-red text-price",style:{"font-size":"20px"}},ne=c("span",{style:{"margin-left":"20px"}},"提成合计(元)：",-1),le={class:"text-red text-price",style:{"font-size":"20px"}},oe=I({name:"customerList"}),fe=I({...oe,setup(o){const x=j();q(null);const{form:n,resetForm:k}=M(()=>({phone:"",transNo:"",transType:"",ivtransStartTime:"",ivtransEndTime:"",dedicatedCode:"",agentName:""}),()=>V()),{selectRow:se,columnsData:U,visibleColumnsData:A,tableBaseOptions:r,resetData:V,extendTableList:re,createRowNo:L,setSelectRow:ie,changeTableColumn:R,changeTableSize:D}=$(ee(),()=>F()),w=T([]);(async()=>{const{res:i,err:a}=await z(()=>Y.getQueryTypeList({}));if(a)return[];w.value=i==null?void 0:i.data})();const C=T(""),S=T(""),{data:E,loading:B,initData:F}=G(async()=>{const{res:i,err:a}=await z(()=>Z.getSpendingRecord({...n.value,ivtransStartTime:n.value.ivtransStartTime,ivtransEndTime:n.value.ivtransEndTime,currentPage:r.pagination.current,pageSize:r.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(C.value=i.data.totalAmount,S.value=i.data.totalAgentCommission,r.pagination.total=i.data.totalCount,i.data.resultList.map((g,d)=>({sortTableNo:L(d),...g})))});return(i,a)=>{const g=u("a-date-picker"),d=u("a-form-item"),m=u("a-grid-item"),O=u("a-select"),_=u("a-input"),P=u("a-grid"),K=u("a-form"),Q=u("a-table");return y(),H("div",null,[t(W,{fold:"","table-columns":e(U),"table-size":e(r).size,onResetSearch:e(k),onSearch:e(V),onChangeTableSize:e(D),onChangeTableColumn:e(R)},{statistics:l(()=>[c("div",null,[te,c("span",ae,h(e(f)(C.value)),1),ne,c("span",le,h(e(f)(S.value)),1)])]),form:l(({collapsed:b})=>[t(K,{model:e(n),"label-align":"left",size:"large","auto-label-width":""},{default:l(()=>[t(P,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!b},{default:l(()=>[t(m,null,{default:l(()=>[t(d,{label:"交易时间范围:"},{default:l(()=>[t(g,{style:{width:"200px"},modelValue:e(n).ivtransStartTime,"onUpdate:modelValue":a[0]||(a[0]=s=>e(n).ivtransStartTime=s)},null,8,["modelValue"]),t(g,{style:{width:"200px"},modelValue:e(n).ivtransEndTime,"onUpdate:modelValue":a[1]||(a[1]=s=>e(n).ivtransEndTime=s)},null,8,["modelValue"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(d,{label:"交易类型:"},{default:l(()=>[t(O,{modelValue:e(n).transType,"onUpdate:modelValue":a[2]||(a[2]=s=>e(n).transType=s),options:[...e(X),...w.value],"allow-clear":""},null,8,["modelValue","options"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(d,{label:"交易订单号:"},{default:l(()=>[t(_,{modelValue:e(n).transNo,"onUpdate:modelValue":a[3]||(a[3]=s=>e(n).transNo=s),placeholder:"请输入交易订单号"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,null,{default:l(()=>[t(d,{label:"顾客手机号:"},{default:l(()=>[t(_,{modelValue:e(n).phone,"onUpdate:modelValue":a[4]||(a[4]=s=>e(n).phone=s),placeholder:"请输入顾客手机号"},null,8,["modelValue"])]),_:1})]),_:1}),e(x).userInfo.roleCode!="dls"?(y(),v(m,{key:0},{default:l(()=>[t(d,{label:"代理商名称:"},{default:l(()=>[t(_,{modelValue:e(n).agentName,"onUpdate:modelValue":a[5]||(a[5]=s=>e(n).agentName=s),placeholder:"请输入代理商名称"},null,8,["modelValue"])]),_:1})]),_:1})):N("",!0),e(x).userInfo.roleCode!="dls"?(y(),v(m,{key:1},{default:l(()=>[t(d,{label:"代理商专属码:"},{default:l(()=>[t(_,{modelValue:e(n).dedicatedCode,"onUpdate:modelValue":a[6]||(a[6]=s=>e(n).dedicatedCode=s),placeholder:"请输入代理商专属码"},null,8,["modelValue"])]),_:1})]),_:1})):N("",!0)]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),table:l(()=>[t(Q,{"selected-keys":e(r).selectedKeys,"onUpdate:selectedKeys":a[7]||(a[7]=b=>e(r).selectedKeys=b),class:"zs-table","row-key":"id",data:e(E),"row-selection":e(r).rowSelection,bordered:e(r).bordered,pagination:e(r).pagination,size:e(r).size,columns:e(A),stripe:e(r).stripe,loading:e(B)},null,8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{fe as default};
