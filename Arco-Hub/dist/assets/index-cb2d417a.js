import{a as z,n as _,p as H,T as J,d as S,q as Q,s as W,v as X,x as Y,y as Z,r as s,o as g,e as ee,g as o,w as t,c as e,z as y,l as C,i as b,h as te,k as h,A as ae,B as w}from"./index-8a2cb146.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_name_ZsSearchTableMould_lang-54cd5f3e.js";import"./index-2bbe694f.js";const oe=()=>{const{getDictionaryItem:f}=z();return[{title:"标题",dataIndex:"title",show:!0,ellipsis:!0,tooltip:!0,align:"center",render:({record:l})=>_(l.title)},{title:"内容",dataIndex:"info",show:!0,ellipsis:!0,align:"center",render:({record:l})=>_(l.info)},{title:"类型",dataIndex:"type",show:!0,align:"center",render:({record:l})=>H(J,{color:"blue"},{default:()=>_(f("systemBulletin_type",l.type).detailName)})},{title:"状态",dataIndex:"state",show:!0,align:"center",render:({record:l})=>_(f("systemBulletin_state",l.state).detailName)},{title:"操作",width:200,dataIndex:"operate",slotName:"operate",show:!0,align:"center"}]},se=S({name:"AdministrationNoticeManage"}),ce=S({...se,setup(f){const{vAuthority:l}=Q(),{getDictionaryInfo:v}=z(),{warningModal:N}=ae(),{form:c,resetForm:A}=W(()=>({title:"",state:""}),()=>T()),{columnsData:D,visibleColumnsData:I,tableBaseOptions:n,resetData:T,extendTableList:M,changeTableColumn:V,changeTableSize:$}=X(oe(),()=>p()),B=i=>{N(`确定操作选中的${n.selectedKeys.length}数据吗？`,async a=>{const{res:d}=await h(()=>w[i]({idList:n.selectedKeys}),{successMsg:"操作成功"});a(!0),d&&(n.selectedKeys=[],p())})},K=i=>{N("确定发布公告吗？",async a=>{const{res:d}=await h(()=>w.releaseNotice({idList:i}),{successMsg:"操作成功"});a(!0),d&&p()})},{data:R,loading:L,initData:p}=Y(async()=>{const{res:i,err:a}=await h(()=>w.getNoticeList({...c.value,currentPage:n.pagination.current,pageSize:n.pagination.pageSize,pagingOrNot:"1"}));return a?[]:(n.pagination.total=i.data.totalCount,M(i==null?void 0:i.data.bulletinList))});return Z(p),(i,a)=>{const d=s("a-input"),x=s("a-form-item"),k=s("a-grid-item"),O=s("a-select"),U=s("a-grid"),q=s("a-form"),F=s("icon-plus"),m=s("a-button"),P=s("icon-close"),E=s("a-space"),j=s("a-button-group"),G=s("a-table");return g(),ee("div",null,[o(ne,{"table-columns":e(D),"table-size":e(n).size,onResetSearch:e(A),onSearch:e(T),onChangeTableSize:e($),onChangeTableColumn:e(V)},{form:t(({collapsed:r})=>[o(q,{model:e(c),"label-align":"left",size:"large","auto-label-width":""},{default:t(()=>[o(U,{cols:{md:3,lg:3,xl:3,xxl:4},"col-gap":12,collapsed:!r},{default:t(()=>[o(k,null,{default:t(()=>[o(x,{label:"标题:"},{default:t(()=>[o(d,{modelValue:e(c).title,"onUpdate:modelValue":a[0]||(a[0]=u=>e(c).title=u),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1})]),_:1}),o(k,null,{default:t(()=>[o(x,{label:"状态:"},{default:t(()=>[o(O,{modelValue:e(c).state,"onUpdate:modelValue":a[1]||(a[1]=u=>e(c).state=u),options:e(v)("systemBulletin_state"),"field-names":{label:"detailName",value:"detailCode"},placeholder:"请选择状态"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:2},1032,["collapsed"])]),_:2},1032,["model"])]),operate:t(()=>[o(E,null,{default:t(()=>[y((g(),C(m,{type:"outline",onClick:a[2]||(a[2]=r=>i.$router.push("/administration/noticeManage/operate"))},{icon:t(()=>[o(F)]),default:t(()=>[b(" 新增 ")]),_:1})),[[e(l),"AdministrationNoticeManageAdd"]]),y((g(),C(m,{type:"outline",status:"danger",disabled:!e(n).selectedKeys.length,onClick:a[3]||(a[3]=r=>B("deleteNotice"))},{icon:t(()=>[o(P)]),default:t(()=>[b(" 删除 ")]),_:1},8,["disabled"])),[[e(l),"AdministrationNoticeManageDelete"]])]),_:1})]),table:t(()=>[o(G,{"selected-keys":e(n).selectedKeys,"onUpdate:selectedKeys":a[4]||(a[4]=r=>e(n).selectedKeys=r),class:"zs-table","row-key":"id",data:e(R),"row-selection":e(n).rowSelection,bordered:e(n).bordered,pagination:e(n).pagination,size:e(n).size,columns:e(I),stripe:e(n).stripe,loading:e(L)},{operate:t(({record:r})=>[o(j,null,{default:t(()=>[o(m,{type:"text",status:"success",onClick:u=>i.$router.push(`/administration/noticeManage/operate?id=${r.id}&isReadOnly=true`)},{default:t(()=>[b("详情")]),_:2},1032,["onClick"]),r.state==="0"?y((g(),C(m,{key:0,type:"text",onClick:u=>K([r.id])},{default:t(()=>[b("发布")]),_:2},1032,["onClick"])),[[e(l),"AdministrationNoticeManageRelease"]]):te("",!0)]),_:2},1024)]),_:1},8,["selected-keys","data","row-selection","bordered","pagination","size","columns","stripe","loading"])]),_:1},8,["table-columns","table-size","onResetSearch","onSearch","onChangeTableSize","onChangeTableColumn"])])}}});export{ce as default};
