{
  "version": 3,
  "sources": ["../../../../@arco-design/web-vue/es/rate/rate.js", "../../../../@arco-design/web-vue/es/rate/index.js"],
  "sourcesContent": ["import { defineComponent, toRefs, toRef, ref, watch, computed, createVNode, mergeProps } from \"vue\";\nimport NP from \"number-precision\";\nimport IconStarFill from \"../icon/icon-star-fill/index.js\";\nimport IconFaceMehFill from \"../icon/icon-face-meh-fill/index.js\";\nimport IconFaceSmileFill from \"../icon/icon-face-smile-fill/index.js\";\nimport IconFaceFrownFill from \"../icon/icon-face-frown-fill/index.js\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { useFormItem } from \"../_hooks/use-form-item.js\";\nimport { isUndefined, isNull, isString, isObject } from \"../_utils/is.js\";\nvar _Rate = defineComponent({\n  name: \"Rate\",\n  props: {\n    count: {\n      type: Number,\n      default: 5\n    },\n    modelValue: {\n      type: Number,\n      default: void 0\n    },\n    defaultValue: {\n      type: Number,\n      default: 0\n    },\n    allowHalf: {\n      type: Boolean,\n      default: false\n    },\n    allowClear: {\n      type: Boolean,\n      default: false\n    },\n    grading: {\n      type: Boolean,\n      default: false\n    },\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    color: {\n      type: [String, Object]\n    }\n  },\n  emits: {\n    \"update:modelValue\": (value) => true,\n    \"change\": (value) => true,\n    \"hoverChange\": (value) => true\n  },\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      modelValue\n    } = toRefs(props);\n    const prefixCls = getPrefixCls(\"rate\");\n    const {\n      mergedDisabled: _mergedDisabled,\n      eventHandlers\n    } = useFormItem({\n      disabled: toRef(props, \"disabled\")\n    });\n    const _value = ref(props.defaultValue);\n    const animation = ref(false);\n    watch(modelValue, (value) => {\n      if (isUndefined(value) || isNull(value)) {\n        _value.value = 0;\n      }\n    });\n    const hoverIndex = ref(0);\n    const computedValue = computed(() => {\n      var _a;\n      return (_a = props.modelValue) != null ? _a : _value.value;\n    });\n    const displayIndex = computed(() => {\n      const fixedValue = props.allowHalf ? NP.times(NP.round(NP.divide(computedValue.value, 0.5), 0), 0.5) : Math.round(computedValue.value);\n      return hoverIndex.value || fixedValue;\n    });\n    const mergedDisabled = computed(() => _mergedDisabled.value || props.readonly);\n    const indexArray = computed(() => [...Array(props.grading ? 5 : props.count)]);\n    const customColor = computed(() => {\n      var _a;\n      if (isString(props.color)) {\n        return indexArray.value.map(() => props.color);\n      }\n      if (isObject(props.color)) {\n        const sortedKeys = Object.keys(props.color).map((key) => Number(key)).sort((a, b) => b - a);\n        let threshold = (_a = sortedKeys.pop()) != null ? _a : indexArray.value.length;\n        return indexArray.value.map((_, index) => {\n          var _a2;\n          if (index + 1 > threshold) {\n            threshold = (_a2 = sortedKeys.pop()) != null ? _a2 : threshold;\n          }\n          return props.color[String(threshold)];\n        });\n      }\n      return void 0;\n    });\n    const resetHoverIndex = () => {\n      if (hoverIndex.value) {\n        hoverIndex.value = 0;\n        emit(\"hoverChange\", 0);\n      }\n    };\n    const handleMouseEnter = (index, isHalf) => {\n      const newHoverIndex = isHalf && props.allowHalf ? index + 0.5 : index + 1;\n      if (newHoverIndex !== hoverIndex.value) {\n        hoverIndex.value = newHoverIndex;\n        emit(\"hoverChange\", newHoverIndex);\n      }\n    };\n    const handleClick = (index, isHalf) => {\n      var _a, _b, _c, _d;\n      const newValue = isHalf && props.allowHalf ? index + 0.5 : index + 1;\n      animation.value = true;\n      if (newValue !== computedValue.value) {\n        _value.value = newValue;\n        emit(\"update:modelValue\", newValue);\n        emit(\"change\", newValue);\n        (_b = (_a = eventHandlers.value) == null ? void 0 : _a.onChange) == null ? void 0 : _b.call(_a);\n      } else if (props.allowClear) {\n        _value.value = 0;\n        emit(\"update:modelValue\", 0);\n        emit(\"change\", 0);\n        (_d = (_c = eventHandlers.value) == null ? void 0 : _c.onChange) == null ? void 0 : _d.call(_c);\n      }\n    };\n    const handleAnimationEnd = (index) => {\n      if (animation.value && index + 1 >= computedValue.value - 1) {\n        animation.value = false;\n      }\n    };\n    const renderGradingCharacter = (index, displayIndex2) => {\n      if (index > displayIndex2) {\n        return createVNode(IconFaceMehFill, null, null);\n      }\n      if (displayIndex2 <= 2) {\n        return createVNode(IconFaceFrownFill, null, null);\n      }\n      if (displayIndex2 <= 3) {\n        return createVNode(IconFaceMehFill, null, null);\n      }\n      return createVNode(IconFaceSmileFill, null, null);\n    };\n    const getAriaProps = (index, isHalf = false) => {\n      return {\n        \"role\": \"radio\",\n        \"aria-checked\": index + (isHalf ? 0.5 : 1) <= computedValue.value,\n        \"aria-setsize\": indexArray.value.length,\n        \"aria-posinset\": index + (isHalf ? 0.5 : 1)\n      };\n    };\n    const renderElement = (index) => {\n      if (props.grading) {\n        return renderGradingCharacter(index, displayIndex.value);\n      }\n      if (slots.character) {\n        return slots.character({\n          index\n        });\n      }\n      return createVNode(IconStarFill, null, null);\n    };\n    const renderCharacter = (index) => {\n      const leftProps = mergedDisabled.value ? {} : {\n        onMouseenter: () => handleMouseEnter(index, true),\n        onClick: () => handleClick(index, true)\n      };\n      const rightProps = mergedDisabled.value ? {} : {\n        onMouseenter: () => handleMouseEnter(index, false),\n        onClick: () => handleClick(index, false)\n      };\n      const style = animation.value ? {\n        animationDelay: `${50 * index}ms`\n      } : void 0;\n      const parseDisplayIndex = Math.ceil(displayIndex.value) - 1;\n      const leftStyle = customColor.value && props.allowHalf && index + 0.5 === displayIndex.value ? {\n        color: customColor.value[parseDisplayIndex]\n      } : void 0;\n      const rightStyle = customColor.value && index + 1 <= displayIndex.value ? {\n        color: customColor.value[parseDisplayIndex]\n      } : void 0;\n      const cls2 = [`${prefixCls}-character`, {\n        [`${prefixCls}-character-half`]: props.allowHalf && index + 0.5 === displayIndex.value,\n        [`${prefixCls}-character-full`]: index + 1 <= displayIndex.value,\n        [`${prefixCls}-character-scale`]: animation.value && index + 1 < computedValue.value\n      }];\n      return createVNode(\"div\", mergeProps({\n        \"class\": cls2,\n        \"style\": style\n      }, !props.allowHalf ? getAriaProps(index) : void 0, {\n        \"onAnimationend\": () => handleAnimationEnd(index)\n      }), [createVNode(\"div\", mergeProps({\n        \"class\": `${prefixCls}-character-left`,\n        \"style\": leftStyle\n      }, leftProps, props.allowHalf ? getAriaProps(index, true) : void 0), [renderElement(index)]), createVNode(\"div\", mergeProps({\n        \"class\": `${prefixCls}-character-right`,\n        \"style\": rightStyle\n      }, rightProps, props.allowHalf ? getAriaProps(index) : void 0), [renderElement(index)])]);\n    };\n    const cls = computed(() => [prefixCls, {\n      [`${prefixCls}-readonly`]: props.readonly,\n      [`${prefixCls}-disabled`]: _mergedDisabled.value\n    }]);\n    return () => createVNode(\"div\", {\n      \"class\": cls.value,\n      \"onMouseleave\": resetHoverIndex\n    }, [indexArray.value.map((_, index) => renderCharacter(index))]);\n  }\n});\nexport { _Rate as default };\n", "import { setGlobalConfig, getComponentPrefix } from \"../_utils/global-config.js\";\nimport _Rate from \"./rate.js\";\nconst Rate = Object.assign(_Rate, {\n  install: (app, options) => {\n    setGlobalConfig(app, options);\n    const componentPrefix = getComponentPrefix(options);\n    app.component(componentPrefix + _Rate.name, _Rate);\n  }\n});\nexport { Rate as default };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,IAAI,QAAQ,gBAAgB;AAAA,EAC1B,MAAM;AAAA,EACN,OAAO;AAAA,IACL,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,QAAQ,MAAM;AAAA,IACvB;AAAA,EACF;AAAA,EACA,OAAO;AAAA,IACL,qBAAqB,CAAC,UAAU;AAAA,IAChC,UAAU,CAAC,UAAU;AAAA,IACrB,eAAe,CAAC,UAAU;AAAA,EAC5B;AAAA,EACA,MAAM,OAAO;AAAA,IACX;AAAA,IACA;AAAA,EACF,GAAG;AACD,UAAM;AAAA,MACJ;AAAA,IACF,IAAI,OAAO,KAAK;AAChB,UAAM,YAAY,aAAa,MAAM;AACrC,UAAM;AAAA,MACJ,gBAAgB;AAAA,MAChB;AAAA,IACF,IAAI,YAAY;AAAA,MACd,UAAU,MAAM,OAAO,UAAU;AAAA,IACnC,CAAC;AACD,UAAM,SAAS,IAAI,MAAM,YAAY;AACrC,UAAM,YAAY,IAAI,KAAK;AAC3B,UAAM,YAAY,CAAC,UAAU;AAC3B,UAAI,YAAY,KAAK,KAAK,OAAO,KAAK,GAAG;AACvC,eAAO,QAAQ;AAAA,MACjB;AAAA,IACF,CAAC;AACD,UAAM,aAAa,IAAI,CAAC;AACxB,UAAM,gBAAgB,SAAS,MAAM;AACnC,UAAI;AACJ,cAAQ,KAAK,MAAM,eAAe,OAAO,KAAK,OAAO;AAAA,IACvD,CAAC;AACD,UAAM,eAAe,SAAS,MAAM;AAClC,YAAM,aAAa,MAAM,YAAY,iBAAG,MAAM,iBAAG,MAAM,iBAAG,OAAO,cAAc,OAAO,GAAG,GAAG,CAAC,GAAG,GAAG,IAAI,KAAK,MAAM,cAAc,KAAK;AACrI,aAAO,WAAW,SAAS;AAAA,IAC7B,CAAC;AACD,UAAM,iBAAiB,SAAS,MAAM,gBAAgB,SAAS,MAAM,QAAQ;AAC7E,UAAM,aAAa,SAAS,MAAM,CAAC,GAAG,MAAM,MAAM,UAAU,IAAI,MAAM,KAAK,CAAC,CAAC;AAC7E,UAAM,cAAc,SAAS,MAAM;AACjC,UAAI;AACJ,UAAI,SAAS,MAAM,KAAK,GAAG;AACzB,eAAO,WAAW,MAAM,IAAI,MAAM,MAAM,KAAK;AAAA,MAC/C;AACA,UAAI,SAAS,MAAM,KAAK,GAAG;AACzB,cAAM,aAAa,OAAO,KAAK,MAAM,KAAK,EAAE,IAAI,CAAC,QAAQ,OAAO,GAAG,CAAC,EAAE,KAAK,CAAC,GAAG,MAAM,IAAI,CAAC;AAC1F,YAAI,aAAa,KAAK,WAAW,IAAI,MAAM,OAAO,KAAK,WAAW,MAAM;AACxE,eAAO,WAAW,MAAM,IAAI,CAAC,GAAG,UAAU;AACxC,cAAI;AACJ,cAAI,QAAQ,IAAI,WAAW;AACzB,yBAAa,MAAM,WAAW,IAAI,MAAM,OAAO,MAAM;AAAA,UACvD;AACA,iBAAO,MAAM,MAAM,OAAO,SAAS,CAAC;AAAA,QACtC,CAAC;AAAA,MACH;AACA,aAAO;AAAA,IACT,CAAC;AACD,UAAM,kBAAkB,MAAM;AAC5B,UAAI,WAAW,OAAO;AACpB,mBAAW,QAAQ;AACnB,aAAK,eAAe,CAAC;AAAA,MACvB;AAAA,IACF;AACA,UAAM,mBAAmB,CAAC,OAAO,WAAW;AAC1C,YAAM,gBAAgB,UAAU,MAAM,YAAY,QAAQ,MAAM,QAAQ;AACxE,UAAI,kBAAkB,WAAW,OAAO;AACtC,mBAAW,QAAQ;AACnB,aAAK,eAAe,aAAa;AAAA,MACnC;AAAA,IACF;AACA,UAAM,cAAc,CAAC,OAAO,WAAW;AACrC,UAAI,IAAI,IAAI,IAAI;AAChB,YAAM,WAAW,UAAU,MAAM,YAAY,QAAQ,MAAM,QAAQ;AACnE,gBAAU,QAAQ;AAClB,UAAI,aAAa,cAAc,OAAO;AACpC,eAAO,QAAQ;AACf,aAAK,qBAAqB,QAAQ;AAClC,aAAK,UAAU,QAAQ;AACvB,SAAC,MAAM,KAAK,cAAc,UAAU,OAAO,SAAS,GAAG,aAAa,OAAO,SAAS,GAAG,KAAK,EAAE;AAAA,MAChG,WAAW,MAAM,YAAY;AAC3B,eAAO,QAAQ;AACf,aAAK,qBAAqB,CAAC;AAC3B,aAAK,UAAU,CAAC;AAChB,SAAC,MAAM,KAAK,cAAc,UAAU,OAAO,SAAS,GAAG,aAAa,OAAO,SAAS,GAAG,KAAK,EAAE;AAAA,MAChG;AAAA,IACF;AACA,UAAM,qBAAqB,CAAC,UAAU;AACpC,UAAI,UAAU,SAAS,QAAQ,KAAK,cAAc,QAAQ,GAAG;AAC3D,kBAAU,QAAQ;AAAA,MACpB;AAAA,IACF;AACA,UAAM,yBAAyB,CAAC,OAAO,kBAAkB;AACvD,UAAI,QAAQ,eAAe;AACzB,eAAO,YAAY,iBAAiB,MAAM,IAAI;AAAA,MAChD;AACA,UAAI,iBAAiB,GAAG;AACtB,eAAO,YAAY,mBAAmB,MAAM,IAAI;AAAA,MAClD;AACA,UAAI,iBAAiB,GAAG;AACtB,eAAO,YAAY,iBAAiB,MAAM,IAAI;AAAA,MAChD;AACA,aAAO,YAAY,mBAAmB,MAAM,IAAI;AAAA,IAClD;AACA,UAAM,eAAe,CAAC,OAAO,SAAS,UAAU;AAC9C,aAAO;AAAA,QACL,QAAQ;AAAA,QACR,gBAAgB,SAAS,SAAS,MAAM,MAAM,cAAc;AAAA,QAC5D,gBAAgB,WAAW,MAAM;AAAA,QACjC,iBAAiB,SAAS,SAAS,MAAM;AAAA,MAC3C;AAAA,IACF;AACA,UAAM,gBAAgB,CAAC,UAAU;AAC/B,UAAI,MAAM,SAAS;AACjB,eAAO,uBAAuB,OAAO,aAAa,KAAK;AAAA,MACzD;AACA,UAAI,MAAM,WAAW;AACnB,eAAO,MAAM,UAAU;AAAA,UACrB;AAAA,QACF,CAAC;AAAA,MACH;AACA,aAAO,YAAY,cAAc,MAAM,IAAI;AAAA,IAC7C;AACA,UAAM,kBAAkB,CAAC,UAAU;AACjC,YAAM,YAAY,eAAe,QAAQ,CAAC,IAAI;AAAA,QAC5C,cAAc,MAAM,iBAAiB,OAAO,IAAI;AAAA,QAChD,SAAS,MAAM,YAAY,OAAO,IAAI;AAAA,MACxC;AACA,YAAM,aAAa,eAAe,QAAQ,CAAC,IAAI;AAAA,QAC7C,cAAc,MAAM,iBAAiB,OAAO,KAAK;AAAA,QACjD,SAAS,MAAM,YAAY,OAAO,KAAK;AAAA,MACzC;AACA,YAAM,QAAQ,UAAU,QAAQ;AAAA,QAC9B,gBAAgB,GAAG,KAAK,KAAK;AAAA,MAC/B,IAAI;AACJ,YAAM,oBAAoB,KAAK,KAAK,aAAa,KAAK,IAAI;AAC1D,YAAM,YAAY,YAAY,SAAS,MAAM,aAAa,QAAQ,QAAQ,aAAa,QAAQ;AAAA,QAC7F,OAAO,YAAY,MAAM,iBAAiB;AAAA,MAC5C,IAAI;AACJ,YAAM,aAAa,YAAY,SAAS,QAAQ,KAAK,aAAa,QAAQ;AAAA,QACxE,OAAO,YAAY,MAAM,iBAAiB;AAAA,MAC5C,IAAI;AACJ,YAAM,OAAO,CAAC,GAAG,SAAS,cAAc;AAAA,QACtC,CAAC,GAAG,SAAS,iBAAiB,GAAG,MAAM,aAAa,QAAQ,QAAQ,aAAa;AAAA,QACjF,CAAC,GAAG,SAAS,iBAAiB,GAAG,QAAQ,KAAK,aAAa;AAAA,QAC3D,CAAC,GAAG,SAAS,kBAAkB,GAAG,UAAU,SAAS,QAAQ,IAAI,cAAc;AAAA,MACjF,CAAC;AACD,aAAO,YAAY,OAAO,WAAW;AAAA,QACnC,SAAS;AAAA,QACT,SAAS;AAAA,MACX,GAAG,CAAC,MAAM,YAAY,aAAa,KAAK,IAAI,QAAQ;AAAA,QAClD,kBAAkB,MAAM,mBAAmB,KAAK;AAAA,MAClD,CAAC,GAAG,CAAC,YAAY,OAAO,WAAW;AAAA,QACjC,SAAS,GAAG,SAAS;AAAA,QACrB,SAAS;AAAA,MACX,GAAG,WAAW,MAAM,YAAY,aAAa,OAAO,IAAI,IAAI,MAAM,GAAG,CAAC,cAAc,KAAK,CAAC,CAAC,GAAG,YAAY,OAAO,WAAW;AAAA,QAC1H,SAAS,GAAG,SAAS;AAAA,QACrB,SAAS;AAAA,MACX,GAAG,YAAY,MAAM,YAAY,aAAa,KAAK,IAAI,MAAM,GAAG,CAAC,cAAc,KAAK,CAAC,CAAC,CAAC,CAAC;AAAA,IAC1F;AACA,UAAM,MAAM,SAAS,MAAM,CAAC,WAAW;AAAA,MACrC,CAAC,GAAG,SAAS,WAAW,GAAG,MAAM;AAAA,MACjC,CAAC,GAAG,SAAS,WAAW,GAAG,gBAAgB;AAAA,IAC7C,CAAC,CAAC;AACF,WAAO,MAAM,YAAY,OAAO;AAAA,MAC9B,SAAS,IAAI;AAAA,MACb,gBAAgB;AAAA,IAClB,GAAG,CAAC,WAAW,MAAM,IAAI,CAAC,GAAG,UAAU,gBAAgB,KAAK,CAAC,CAAC,CAAC;AAAA,EACjE;AACF,CAAC;;;ACpND,IAAM,OAAO,OAAO,OAAO,OAAO;AAAA,EAChC,SAAS,CAAC,KAAK,YAAY;AACzB,oBAAgB,KAAK,OAAO;AAC5B,UAAM,kBAAkB,mBAAmB,OAAO;AAClD,QAAI,UAAU,kBAAkB,MAAM,MAAM,KAAK;AAAA,EACnD;AACF,CAAC;",
  "names": []
}
