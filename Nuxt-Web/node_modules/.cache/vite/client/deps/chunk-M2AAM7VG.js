import {
  ResizeObserver_es_default
} from "./chunk-JLMVZVED.js";
import {
  getFirstComponent
} from "./chunk-C6MCIJWB.js";
import {
  isComponentInstance
} from "./chunk-XWASIDWF.js";
import {
  cloneVNode,
  computed,
  defineComponent,
  onMounted,
  onUnmounted,
  ref,
  watch
} from "./chunk-JYFD5GL7.js";

// node_modules/@arco-design/web-vue/es/_components/resize-observer.js
var ResizeObserver = defineComponent({
  name: "ResizeObserver",
  emits: [
    "resize"
  ],
  setup(props, {
    emit,
    slots
  }) {
    let resizeObserver;
    const componentRef = ref();
    const element = computed(() => isComponentInstance(componentRef.value) ? componentRef.value.$el : componentRef.value);
    const createResizeObserver = (target) => {
      if (!target)
        return;
      resizeObserver = new ResizeObserver_es_default((entries) => {
        const entry = entries[0];
        emit("resize", entry);
      });
      resizeObserver.observe(target);
    };
    const destroyResizeObserver = () => {
      if (resizeObserver) {
        resizeObserver.disconnect();
        resizeObserver = null;
      }
    };
    watch(element, (_element) => {
      if (resizeObserver)
        destroyResizeObserver();
      if (_element)
        createResizeObserver(_element);
    });
    onMounted(() => {
      if (element.value) {
        createResizeObserver(element.value);
      }
    });
    onUnmounted(() => {
      destroyResizeObserver();
    });
    return () => {
      var _a, _b;
      const firstChild = getFirstComponent((_b = (_a = slots.default) == null ? void 0 : _a.call(slots)) != null ? _b : []);
      if (firstChild) {
        return cloneVNode(firstChild, {
          ref: componentRef
        }, true);
      }
      return null;
    };
  }
});

export {
  ResizeObserver
};
//# sourceMappingURL=chunk-M2AAM7VG.js.map
