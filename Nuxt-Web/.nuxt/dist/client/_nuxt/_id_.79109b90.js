import{_ as O}from"./index.6045a630.js";import{u as Q,g as D,i as P,h as $,A as h,B as M,f as G,a5 as H,_ as W}from"./entry.1a40d7cc.js";import{_ as Y}from"./index.vue.52b77a9f.js";import{I as q}from"./index.79ae910d.js";import{I as J}from"./index.fae4296b.js";import{m as K,p as X,D as n,E as c,u as t,N as B,Q as s,R as r,P as _,O as Z,M as d,I as x,L as y,G as ee,_ as L,aa as te,ab as se}from"./swiper-vue.1d76a0fa.js";import{u as ae}from"./index.1286ba2d.js";const oe=""+globalThis.__publicAssetsURL("images/loading.gif"),ne=""+globalThis.__publicAssetsURL("images/ok.png"),l=u=>(te("data-v-bd2a3ad3"),u=u(),se(),u),ie={class:"max-w-container mx-auto min-h-[70vh]"},ce={key:0},le={class:"flex items-center justify-between mb-[10px]"},re={class:"mt-[20px]"},ue={class:"text-[#FFA864]"},_e=l(()=>s("span",null,"/",-1)),de=l(()=>s("div",null,null,-1)),pe={key:0},me={class:"mt-[40px] mb-[20px] text-[20px]"},ve=["onClick"],fe={class:"mt-[20px] flex items-center justify-between"},he={key:1,class:"flex items-center justify-center flex-col"},xe=l(()=>s("div",{class:"mt-[30px] text-[18px]"},"测评完成，正在生成报告...",-1)),ye=l(()=>s("img",{src:oe,alt:""},null,-1)),Le=[xe,ye],ge={key:2,class:"flex items-center justify-center flex-col"},ke=l(()=>s("div",{class:"flex items-center justify-center mt-[50px]"},[s("img",{src:ne,style:{width:"120px"},alt:""})],-1)),we=l(()=>s("div",{class:"text-[32px] font-bold"},"测评完成",-1)),Ae={class:"text-[14px] text-[#666] my-[10px]"},be=l(()=>s("div",null,"糟糕，页面好像没找到",-1)),Ee=K({__name:"[id]",setup(u){Q({title:"测评详情"});const{$zsFetch:p}=G(),[g,k]=D(!1),m=P(),{form:e}=$(()=>({error:!1,evaluateList:[],cur:0,isResult:!1,time:0,canClick:!0})),F=X(()=>{var i,a;return(a=(i=e.value.evaluateList)==null?void 0:i.map(o=>o.myAnswer).filter(o=>o!==""))==null?void 0:a.length}),w=async(i,a)=>{e.value.canClick&&(e.value.canClick=!1,e.value.evaluateList[a].myAnswer=i,await H(500),e.value.canClick=!0,a+1==e.value.evaluateList.length?await A():e.value.cur++)};ae((i,a)=>{w(i,a)},100);const S=()=>{e.value.cur--},A=async()=>{k(!0);const[i,a]=await p(h.EVALUATE.SUBMIT_EVALUATE,{body:{id:m.params.id,topicAndAnswer:e.value.evaluateList.filter(o=>o.myAnswer!=="").map(o=>o.titleSort+"-"+(o.myAnswer=="是"?"0":"1"))}});k(!1),a&&(e.value.isResult=!0)},T=async()=>{const[i,a]=await p(h.EVALUATE.VIEW_EVALUATE_REPORT,{body:{id:m.params.id}});a&&window.open(a.data,"_blank")};return(async()=>{const[i,a]=await p(h.EVALUATE.QUERY_QUESTIONS,{body:{id:m.params.id}});if(a.data==="未查询到当前测评试题!"){e.value.error=!0;return}e.value.evaluateList=a.data.resultList.map(o=>({...o,myAnswer:""}))})(),(i,a)=>{var b,E,C,I,R;const o=O,V=q,v=M,N=J,j=Y;return n(),c("div",ie,[t(e).error?(n(),_(j,{key:1},{default:d(()=>[be]),_:1})):(n(),c(B,{key:0},[!t(g)&&!t(e).isResult?(n(),c("div",ce,[s("div",le,[s("div",re,[s("span",ue,r(t(e).cur+1),1),_e,s("span",null,r((b=t(e).evaluateList)==null?void 0:b.length),1)]),de]),(n(),_(o,{width:t(e).cur/(t(e).evaluateList.length-1)*100>0?t(e).cur/(t(e).evaluateList.length-1)*100:1,background:"#7C92FF",isAnimate:!1,key:t(e).cur},null,8,["width"])),(E=t(e).evaluateList)!=null&&E.length?(n(),c("div",pe,[s("div",me,r((C=t(e).evaluateList[t(e).cur])==null?void 0:C.titleSort)+"、"+r((I=t(e).evaluateList[t(e).cur])==null?void 0:I.title),1),(n(!0),c(B,null,Z((R=t(e).evaluateList[t(e).cur])==null?void 0:R.answerOptionsList,(f,z)=>{var U;return n(),c("div",{key:z},[s("div",{class:ee(["relative h-[50px] leading-[50px] rounded-[8px] px-[30px] mb-[10px] cursor-pointer border-left transition",((U=t(e).evaluateList[t(e).cur])==null?void 0:U.myAnswer)==f?"bg-[#7c92ff]":"bg-[#F9F9F9]"]),onClick:Ie=>w(f,t(e).cur)},[s("div",null,r(f),1)],10,ve)])}),128)),s("div",fe,[t(e).cur!==0?(n(),_(v,{key:0,type:"primary",class:"openButton",onClick:S},{default:d(()=>[y(V,{class:"mr-[2px]"}),L("上一题 ")]),_:1})):x("",!0),t(F)>=30?(n(),_(v,{key:1,type:"primary",class:"openButton",onClick:A},{default:d(()=>[y(N,{class:"mr-[2px]"}),L("提交 ")]),_:1})):x("",!0)])])):x("",!0)])):t(g)&&!t(e).isResult?(n(),c("div",he,Le)):(n(),c("div",ge,[ke,we,s("div",Ae," 共完成 "+r(t(e).evaluateList.length)+" 题 ",1),y(v,{type:"primary",class:"openButton",onClick:T},{default:d(()=>[L("查看报告 ")]),_:1})]))],64))])}}});const Ne=W(Ee,[["__scopeId","data-v-bd2a3ad3"]]);export{Ne as default};
