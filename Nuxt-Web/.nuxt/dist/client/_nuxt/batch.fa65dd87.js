import{_ as A}from"./index.vue.bf4eae92.js";import{T as O}from"./index.112674ac.js";import{u as R,a as M,b as B,t as b,c as p,A as _,d as E,e as G,f as X}from"./entry.1a40d7cc.js";import"./index.a57cdc53.js";/* empty css              */import{m as K,ad as h,D as U,E as V,L as g,u as n,M as x,Q as C,R as S}from"./swiper-vue.1d76a0fa.js";import"./index.30d5eb30.js";const $={class:"max-w-container mx-auto min-h-[60vh]"},H={class:"text-right"},Q={class:"text-right"},nt=K({__name:"batch",async setup(j){let e,l;R({title:"批次查询"});const{$zsFetch:m}=X(),{userInfo:L}=M(),{provinceList:T}=B(),I=()=>[{title:"地区",dataIndex:"sf",align:"center",width:120,headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"}},{title:"年份",dataIndex:"nf",align:"center",width:120,headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"}},{title:"考生类别",dataIndex:"kl",width:120,align:"center",headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"}},{title:"录取批次",dataIndex:"pc",align:"center",width:120,headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"},render:({record:t})=>b(t.pc)},{title:"分数线",dataIndex:"score",align:"center",width:120,headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"},slotName:"score"},{title:"位次",dataIndex:"wc",align:"center",width:120,headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"},slotName:"wc"}],P=async t=>{t.sf!==r.value.sf&&(r.value.sf=t.sf,i.value.nf="",f.value.kl="",u.value.pc="",await z(),await k(),await v()),t.nf!==i.value.nf&&(i.value.nf=t.nf,f.value.kl="",u.value.pc="",await k(),await v()),t.kl!==f.value.kl&&(f.value.kl=t.kl),t.pc!==u.value.pc&&(u.value.pc=t.pc),W()},{data:r}=([e,l]=h(()=>p("sfList",async()=>({title:"所在地区",key:"sf",isShow:!0,multiple:!1,options:T.value.map(a=>({...a,value:a.sf,label:a.sf})),sf:L.value.province}))),e=await e,l(),e),{data:i,refresh:z}=([e,l]=h(async()=>p("nfList",async()=>{var o,s;const[t,a]=await m(_.MORE.GET_PCX_NF,{body:{sf:r.value.sf}}),c=((o=a==null?void 0:a.data)==null?void 0:o.map(d=>({value:d.nf,label:d.nf})))??[];return{title:"录取年份",key:"nf",isShow:!0,multiple:!1,options:c,nf:((s=c[0])==null?void 0:s.value)??""}})),e=await e,l(),e),{data:f,refresh:k}=([e,l]=h(async()=>p("klList",async()=>{var o;const[t,a]=await m(_.MORE.GET_PCX_KL,{body:{sf:r.value.sf,nf:i.value.nf}}),c=((o=a==null?void 0:a.data)==null?void 0:o.map(s=>({value:s.kl,label:s.kl})))??[];return{title:"考生类别",key:"kl",isShow:!0,multiple:!1,options:[...E,...c],kl:""}})),e=await e,l(),e),{data:u,refresh:v}=([e,l]=h(async()=>p("pcList",async()=>{var o;const[t,a]=await m(_.MORE.GET_PCX_PC,{body:{sf:r.value.sf,nf:i.value.nf}}),c=((o=a==null?void 0:a.data)==null?void 0:o.map(s=>({value:s.pc,label:s.pc})))??[];return{title:"录取批次",key:"pc",isShow:!0,multiple:!1,options:[...E,...c],pc:""}})),e=await e,l(),e),{data:F,status:N,refresh:W}=([e,l]=h(async()=>p("batchList",async()=>{const[t,a]=await m(_.MORE.GET_PCX_PC_LIST,{body:{sf:r.value.sf,nf:i.value.nf,kl:f.value.kl,pc:u.value.pc}});return(a==null?void 0:a.data)??[]})),e=await e,l(),e);return(t,a)=>{var s,d,D,y;const c=A,o=O;return U(),V("div",$,[g(c,{data:[n(r),n(i),n(f),n(u)],"default-values":{sf:(s=n(r))==null?void 0:s.sf,nf:(d=n(i))==null?void 0:d.nf,kl:(D=n(f))==null?void 0:D.kl,pc:(y=n(u))==null?void 0:y.pc},onChange:P,class:"mt-[20px]"},null,8,["data","default-values"]),g(o,{class:"mt-[20px] cursor-pointer","table-layout-fixed":"",columns:I(),data:n(F),bordered:{wrapper:!0,cell:!0},loading:n(N)==="pending"},{score:x(({record:w})=>[C("div",H,S(("textFormat"in t?t.textFormat:n(b))(w.score)),1)]),wc:x(({record:w})=>[C("div",Q,S(("textFormat"in t?t.textFormat:n(b))(("turnThousandth"in t?t.turnThousandth:n(G))(w.wc))),1)]),_:1},8,["columns","data","loading"])])}}});export{nt as default};
