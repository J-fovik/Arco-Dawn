import{u as ue,g as _e,i as re,h as pe,c as B,A as w,j as me,S as xe,k as he,t as ve,n as ye,f as fe,l as ge,B as we,I as Ce,T as be,m as Ee,o as Fe}from"./entry.1a40d7cc.js";import{P as Ie}from"./index.913d6537.js";import{_ as Se}from"./index.vue.52b77a9f.js";import{_ as ke,a as ze,b as De,c as Te}from"./index.f692fc7b.js";/* empty css              *//* empty css              */import{u as Ve}from"./useLoading.249b570c.js";import{m as $e,a as Re,p as qe,ad as Y,D as m,E as C,u as s,N as Me,Q as t,R as v,L as u,M as l,P as S,I as j,_ as E}from"./swiper-vue.1d76a0fa.js";import"./index.112674ac.js";import"./index.a57cdc53.js";import"./index.30d5eb30.js";import"./index.vue.c1324be8.js";import"./index.vue.bf4eae92.js";import"./usePagination.9cd68578.js";const Le={class:"max-w-container mx-auto min-h-[60vh]"},Ne={class:"flex items-center justify-between"},Oe={class:"mt-[20px]"},Be={class:"text-[18px] font-bold"},je={class:"mt-[10px] text-[14px] text-[#999]"},He={class:"ml-[10px]"},Ae=t("div",{class:"bg-[#F4F6F8] leading-[32px] px-[10px] rounded-[4px] cursor-pointer"},[t("i",{class:"iconfont icon-shangchuan fontSize mr-[3px]"}),E("导出 ")],-1),Ge=t("div",{class:"font-bold"},"操作",-1),Ue=["onClick"],Pe={class:"border-solid border border-[#EDEDED] w-[90px] h-[32px] leading-[32px] f-c-c rounded-[4px] m-auto"},We={key:1},Ze=["onClick"],Xe=t("i",{class:"iconfont icon-shanchu text-[#7C92FF]"},null,-1),Ke=[Xe],Je=["onClick"],Qe=t("i",{class:"iconfont icon-zengjia text-[#7C92FF]"},null,-1),Ye=[Qe],et={key:1,class:"mt-[30px]"},tt={class:"bg-[#F9F9F9] text-[#333] text-[14px] flex items-center !leading-[48px] font-bold text-center"},ot=t("div",{class:"w-[70px]"},"概率",-1),st=t("div",{class:"flex-1"},"招生院校",-1),nt={class:"w-[100px]"},at=t("div",{class:"w-[70px]"},null,-1),it={class:"w-[80px]"},lt={class:"w-[80px]"},ct={class:"w-[80px]"},dt=t("div",{class:"w-[150px]"},"操作",-1),ut={key:0},_t={class:"border-b border-solid border-[#EDEDED]"},rt={class:"mx-auto flex flex-col w-[90px]"},pt=["onClick"],mt={class:"border-solid border border-[#EDEDED] h-[32px] leading-[32px] f-c-c rounded-[4px] m-auto"},xt={key:1},ht={class:"flex items-center justify-around"},vt=["onClick"],yt=t("i",{class:"iconfont icon-shanchu text-[#7C92FF]"},null,-1),ft=[yt],gt=["onClick"],wt=t("i",{class:"iconfont icon-zengjia text-[#7C92FF]"},null,-1),Ct=[wt],bt={class:"mx-auto flex flex-col w-[90px]"},Et=["onClick"],Ft={class:"border-solid border border-[#EDEDED] h-[32px] leading-[32px] f-c-c rounded-[4px] m-auto"},It={key:1},St={class:"flex items-center justify-around"},kt=["onClick"],zt=t("i",{class:"iconfont icon-shanchu text-[#7C92FF]"},null,-1),Dt=[zt],Tt=["onClick"],Vt=t("i",{class:"iconfont icon-zengjia text-[#7C92FF]"},null,-1),$t=[Vt],Rt={key:1},qt=t("div",null,"糟糕，页面好像没找到",-1),Qt=$e({__name:"detail",async setup(Mt){let f,z;ue({title:"查看志愿表"});const{$zsFetch:g,$zsMsg:F}=fe(),{setGlobalLoading:D}=Ve(),[ee,T]=_e(null),te=re(),{warningModal:R}=Fe(),{form:y}=pe(()=>({selectRow:{},widErr:!1,curWishInfo:{}})),H=Re(te.query.wid),V=qe(()=>{var c,r,h;let e=[...n.value.isSchoolGroup==="1"?((r=(c=N.value)==null?void 0:c.list)==null?void 0:r.map(d=>d.zySeq))??[]:((h=y.value.curWishInfo.children)==null?void 0:h.map(d=>d))??[]].sort((d,b)=>d-b),i=1;for(let d=0;d<e.length;d++){if(e[d]!==i)return i;i++}return i}),oe=async()=>{R("确定导出志愿表吗",async o=>{D(!0),o(!0);const[e,i]=await g(w.CHOICE.WISH_EXPORT_EXCEL,{body:{id:n.value.id},responseType:"blob"});i&&(D(!1),ge(i,`${n.value.zybt}.xlsx`))})},se=async()=>{R("确定导出志愿表吗",async o=>{D(!0),o(!0);const[e,i]=await g(w.CHOICE.WISH_EXPORT_PDF,{body:{id:n.value.id}});i&&(D(!1),window.open(i.data,"_blank"))})},q=o=>{I(o),o.isInput||(o.isInput=!0)},M=async o=>{o.isInput=!1,await ne(),x.value.list=[],await $(),F("success","顺序调整成功!"),I(null)},L=async o=>{R("确定删除当前志愿吗",async e=>{const[i,c]=await g(w.CHOICE.DELETE_WISH_BY_ID,{body:{id:o.yxSeq?"":o.id,wid:o.yxSeq?n.value.id:"",yxmc:o.yxSeq?o.yxmc:""}});e(!0),c&&(x.value.list=[],await $(),F("success",c.data))})},ne=async()=>{var c,r;let o={};n.value.isSchoolGroup==="1"?o={id:y.value.selectRow.id,zySeq:y.value.selectRow.zySeq,wid:(c=n.value)==null?void 0:c.id}:o={yxmc:y.value.selectRow.yxmc,yxSeq:y.value.selectRow.yxSeq,wid:(r=n.value)==null?void 0:r.id,zySeq:y.value.selectRow.zySeq,id:y.value.selectRow.id};const[e,i]=await g(w.CHOICE.WISH_INPUT_SORT,{body:o})},A=async(o,e)=>{var r;const[i,c]=await g(w.CHOICE.MAJOR_ADD_VOLUNTEER,{body:{id:o.id,wishId:(r=n.value)==null?void 0:r.id,wishSort:e}});F("success",c.data)},ae=async o=>{await A(o,o.wSort),o.wSort="",G(),x.value.list=[],$()},ie=async o=>{var e,i,c,r,h,d;if(n.value.isSchoolGroup==="1"){if(V.value>((e=n.value)==null?void 0:e.zyTop)){F("waring","超过专业填报数量");return}}else{if(y.value.curWishInfo=((i=N.value)==null?void 0:i.specialList.find(b=>b.yxmc===o.yxmc))??{},V.value>((c=n.value)==null?void 0:c.zyTop)){F("waring","超过专业填报数量");return}if(((h=(r=N.value)==null?void 0:r.specialList)==null?void 0:h.length)>((d=n.value)==null?void 0:d.yxTop)){F("waring","超过院校填报数量");return}}await A(o,V.value),o.wSort=V.value,G(),x.value.list=[],$()},I=(o,e)=>{y.value.selectRow=o,e&&e()},{data:n,refresh:Lt}=([f,z]=Y(async()=>B("volunteerInfo",async()=>{var c;const[o,e]=await g(w.CHOICE.GET_VOLUNTEER_INFO,{body:{id:H.value??""}});let i={};return e.data==="未知志愿"?i.error=!0:i={...e==null?void 0:e.data,zyTop:((c=e==null?void 0:e.data)==null?void 0:c.zyTop)*1},i},{default:()=>{},watch:[H]})),f=await f,z(),f),{data:N,refresh:G}=B("filledIn",async()=>{var c;const[o,e]=await g(w.CHOICE.GET_FILLE_IN,{body:{id:n.value.id}}),i=n.value.isSchoolGroup==="1"?e==null?void 0:e.data:me(e==null?void 0:e.data,"yxmc","children","zySeq");return{list:e.data??[],specialList:i??[],total:((c=e==null?void 0:e.data)==null?void 0:c.length)??0}},{default:()=>{}}),{data:x,status:U,refresh:$}=([f,z]=Y(async()=>B("volunteerDetailList",async()=>{var i,c,r,h;const[o,e]=await g(w.CHOICE.GET_FILLE_IN,{body:{id:(i=n.value)==null?void 0:i.id,pagingOrNot:1}});return{list:((r=(c=e==null?void 0:e.data)==null?void 0:c.list)==null?void 0:r.map(d=>({...d,isInput:!1})))??[],year:((h=e==null?void 0:e.data)==null?void 0:h.year)??2024}},{default:()=>({list:[],year:2024})})),f=await f,z(),f);return(o,e)=>{var Z,X,K,J,Q;const i=we,c=Ie,r=xe,h=Ce,d=be,b=Ee,O=Se,le=ke,P=De,W=Te,ce=he,de=ze;return m(),C("div",Le,[s(n).error?(m(),S(O,{key:1},{default:l(()=>[qt]),_:1})):(m(),C(Me,{key:0},[t("div",Ne,[t("div",Oe,[t("div",Be,v((Z=s(n))==null?void 0:Z.zybt),1),t("div",je,[t("span",null,"成绩 "+v((X=s(n))==null?void 0:X.xk)+" "+v(((K=s(n))==null?void 0:K.score)+"分")+" "+v(((J=s(n))==null?void 0:J.wc)+"位"),1),t("span",He,"批次："+v(("textFormat"in o?o.textFormat:s(ve))((Q=s(n))==null?void 0:Q.pc)),1)])]),t("div",null,[u(r,null,{default:l(()=>[u(i,{type:"primary",size:"large",class:"w-[90px]",onClick:e[0]||(e[0]=a=>("navigateTo"in o?o.navigateTo:s(ye))(`/choice?wid=${s(n).id}`))},{default:l(()=>[E(" 继续填报 ")]),_:1}),u(c,{trigger:"hover",position:"bottom"},{content:l(()=>[t("div",{class:"leading-[30px] hover:bg-[#F2F5FF] hover:text-[#7C92FF] px-[20px] cursor-pointer",onClick:oe}," 导出Excel(表格版) "),t("div",{class:"leading-[30px] hover:bg-[#F2F5FF] hover:text-[#7C92FF] px-[20px] cursor-pointer",onClick:se}," 导出Pdf(打印版) ")]),default:l(()=>[Ae]),_:1})]),_:1})])]),s(n).isSchoolGroup==="1"?(m(),S(le,{key:0,class:"mt-[30px]",data:{list:s(x).list,year:s(x).year},loading:s(U)==="pending"},{operateTitle:l(({record:a})=>[Ge]),operate:l(({record:a})=>{var _;return[t("div",{onClick:p=>q(a)},[a.isInput?(m(),C("div",We,[u(b,{style:{width:"90px"},precision:0,min:0,max:(_=s(n))==null?void 0:_.zyTop,"hide-button":"",onBlur:p=>a.isInput=!1,onChange:p=>M(a),modelValue:a.zySeq,"onUpdate:modelValue":p=>a.zySeq=p,modelModifiers:{trim:!0}},null,8,["max","onBlur","onChange","modelValue","onUpdate:modelValue"])])):(m(),S(d,{key:0,content:"输入序号"},{default:l(()=>[t("div",Pe,[E(" 志愿 "+v(a.zySeq)+" ",1),u(h,{class:"ml-[4px]"})])]),_:2},1024))],8,Ue),u(r,{size:"large"},{default:l(()=>[u(d,{content:"删除"},{default:l(()=>[t("div",{onClick:p=>L(a)},Ke,8,Ze)]),_:2},1024),u(d,{content:"加入可报专业"},{default:l(()=>[t("div",{onClick:p=>{var k;return I({yxid:a.yxid,yxmc:a.yxmc,yxdm:a.yxdm,wid:(k=s(n))==null?void 0:k.id},()=>s(T)("ZsChoiceEligibleMajorModal"))}},Ye,8,Je)]),_:2},1024)]),_:2},1024)]}),empty:l(()=>[u(O,{url:"/images/no-volunteer.png"},{default:l(()=>[E(" 暂无志愿 ")]),_:1},8,["url"])]),_:1},8,["data","loading"])):j("",!0),s(n).isSchoolGroup==="2"?(m(),C("div",et,[t("div",tt,[ot,st,t("div",nt,v(s(x).year)+"计划",1),at,t("div",it,v(s(x).year)+"年份",1),t("div",lt,v(s(x).year-1)+"年份",1),t("div",ct,v(s(x).year-2)+"年份",1),dt]),u(ce,{loading:s(U)==="pending",class:"w-full min-h-[60vh] !leading-[25px]"},{default:l(()=>[s(x).list.length?(m(),C("div",ut,[u(W,{"default-list":s(x).list,"item-class":"bg-[#F9F9F9] ",isDraggable:!1},{row:l(({record:a})=>[t("div",_t,[u(P,{data:a},{operate:l(()=>[t("div",rt,[t("div",{onClick:_=>q(a)},[a.isInput?(m(),C("div",xt,[u(b,{style:{width:"90px"},precision:0,min:0,max:s(n).zyTop,"hide-button":"",onBlur:_=>a.isInput=!1,onChange:_=>M(a),modelValue:a.yxSeq,"onUpdate:modelValue":_=>a.yxSeq=_,modelModifiers:{trim:!0}},null,8,["max","onBlur","onChange","modelValue","onUpdate:modelValue"])])):(m(),S(d,{key:0,content:"输入序号"},{default:l(()=>[t("div",mt,[E(" 院校 "+v(a.yxSeq)+" ",1),u(h,{class:"ml-[4px]"})])]),_:2},1024))],8,pt),t("div",ht,[u(d,{content:"删除"},{default:l(()=>[t("div",{onClick:_=>L(a)},ft,8,vt)]),_:2},1024),u(d,{content:"加入可报专业"},{default:l(()=>[t("div",{onClick:_=>{var p;return I({yxid:a.yxid,yxmc:a.yxmc,yxdm:a.yxdm,wid:(p=s(n))==null?void 0:p.id},()=>s(T)("ZsChoiceEligibleMajorModal"))}},Ct,8,gt)]),_:2},1024)])])]),_:2},1032,["data"])])]),children:l(({record:a})=>[u(W,{"default-list":a.children,"item-class":"bg-white border-b border-solid border-[#EDEDED]",isDraggable:!1},{row:l(({record:_})=>[u(P,{data:_,isMajor:!0},{operate:l(()=>[t("div",bt,[t("div",{onClick:p=>q(_)},[_.isInput?(m(),C("div",It,[u(b,{style:{width:"90px"},precision:0,min:0,max:s(n).zyTop,"hide-button":"",onBlur:p=>_.isInput=!1,onChange:p=>M(_),modelValue:_.zySeq,"onUpdate:modelValue":p=>_.zySeq=p,modelModifiers:{trim:!0}},null,8,["max","onBlur","onChange","modelValue","onUpdate:modelValue"])])):(m(),S(d,{key:0,content:"输入序号"},{default:l(()=>[t("div",Ft,[E(" 专业 "+v(_.zySeq)+" ",1),u(h,{class:"ml-[4px]"})])]),_:2},1024))],8,Et),t("div",St,[u(d,{content:"删除"},{default:l(()=>[t("div",{onClick:p=>L(_)},Dt,8,kt)]),_:2},1024),u(d,{content:"加入可报专业"},{default:l(()=>[t("div",{onClick:p=>{var k;return I({yxid:_.yxid,yxmc:_.yxmc,yxdm:_.yxdm,wid:(k=s(n))==null?void 0:k.id},()=>s(T)("ZsChoiceEligibleMajorModal"))}},$t,8,Tt)]),_:2},1024)])])]),_:2},1032,["data"])]),_:2},1032,["default-list"])]),_:1},8,["default-list"])])):(m(),C("div",Rt,[u(O,{url:"/images/no-volunteer.png"},{default:l(()=>[E(" 暂无志愿 ")]),_:1},8,["url"])]))]),_:1},8,["loading"])])):j("",!0),s(ee)==="ZsChoiceEligibleMajorModal"?(m(),S(de,{key:2,data:s(y).selectRow,onCancelVolunteer:ae,onAddVolunteer:ie,onCancel:e[1]||(e[1]=a=>I({},()=>s(T)(null)))},null,8,["data"])):j("",!0)],64))])}}});export{Qt as default};
