{"version":3,"file":"buildWish-d99f2781.js","sources":["../../../../pages/choice/buildWish.vue"],"sourcesContent":["<template>\r\n\t<div class=\"max-w-container mx-auto min-h-[60vh]\">\r\n\t\t<div class=\"flex items-center justify-between mt-[10px]\">\r\n\t\t\t<div>\r\n\t\t\t\t我的成绩:\r\n\t\t\t\t<span\r\n\t\t\t\t\tclass=\"text-[#FFA864] cursor-pointer\"\r\n\t\t\t\t\t@click=\"setSelectRow(form, () => setActiveKey('ZsChoiceChangeScoreModal'))\"\r\n\t\t\t\t\t>{{ form.xk }} {{ form.score + '分' }}\r\n\t\t\t\t\t{{ turnThousandth(form.wc) + '位' }}\r\n\t\t\t\t\t<i class=\"iconfont icon-chuangzuo\"\r\n\t\t\t\t/></span>\r\n\t\t\t\t<span class=\"ml-[20px]\">类型:<span class=\"text-[#FFA864]\">普通类</span></span>\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"border border-solid border-[#EDEDED] rounded-[8px] leading-[41px] px-[10px] cursor-pointer\"\r\n\t\t\t\t@click=\"navigateTo(`/personal?tab=myVolunteer`)\"\r\n\t\t\t>\r\n\t\t\t\t我的志愿表\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 已建志愿表编辑 -->\r\n\t\t<template v-if=\"pcData?.wish?.id\">\r\n\t\t\t<zs-title title=\"已建志愿表编辑\" size=\"small\" class=\"mt-[10px]\" />\r\n\t\t\t<div class=\"bg-[#F2F5FF] p-[20px] flex items-center justify-between mt-[20px]\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t继续编辑模拟志愿表 <span class=\"text-[#FFA864]\">{{ pcData?.wish?.zybt }}</span\r\n\t\t\t\t\t>，或进入 <span class=\"text-[#7C92FF]\">我的志愿表</span> 选择\r\n\t\t\t\t</div>\r\n\t\t\t\t<a-button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tclass=\"w-[150px] border-radius-4\"\r\n\t\t\t\t\t@click=\"navigateTo(`/choice?wid=${pcData?.wish?.id}`)\"\r\n\t\t\t\t\t>继续模拟填志愿</a-button\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<!-- 新建模拟志愿表 -->\r\n\t\t<zs-title title=\"新建模拟志愿表\" size=\"small\" class=\"mt-[20px]\" />\r\n\t\t<a-table\r\n\t\t\tclass=\"mt-[20px] cursor-pointer\"\r\n\t\t\ttable-layout-fixed\r\n\t\t\t:columns=\"createTableColumns()\"\r\n\t\t\t:data=\"pcData?.pcList\"\r\n\t\t\t:loading=\"status === 'pending'\"\r\n\t\t\t:pagination=\"false\"\r\n\t\t>\r\n\t\t\t<template #operate=\"{ record }\">\r\n\t\t\t\t<a-button type=\"primary\" class=\"w-[110px] border-radius-4\" @click=\"addWish(record)\"\r\n\t\t\t\t\t>新建填志愿</a-button\r\n\t\t\t\t>\r\n\t\t\t</template>\r\n\t\t</a-table>\r\n\t\t<div class=\"mt-[20px] bg-[#FFF7F0] p-[20px] leading-[22px]\">\r\n\t\t\t<div class=\"font-bold text-[14px]\">系统使用须知</div>\r\n\t\t\t<div class=\"text-[12px]\">\r\n\t\t\t\t<div>1、当前为2024年招生计划数据；</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t2、本系统依据历年各院校录取数据提供模拟志愿服务，正式填报请前往考试院官网；\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t3、在正式填报时，以教育考试院公布的最新招生计划为准，本系统会在第一时间将最新的招生计划进行更新；\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>4、系统使用的“录取概率”根据过去历年的数据计算得出，仅作参考。</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 修改志愿表分数 -->\r\n\t\t<zs-choice-change-score-modal\r\n\t\t\tv-if=\"activeKey === 'ZsChoiceChangeScoreModal'\"\r\n\t\t\t:data=\"form.selectRow\"\r\n\t\t\t@cancel=\"setSelectRow({}, () => setActiveKey(null))\"\r\n\t\t\t@success=\"changeScore\"\r\n\t\t/>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// 设置头信息\r\nuseHead({\r\n\ttitle: '查看志愿表',\r\n});\r\n// 页面信息\r\ndefinePageMeta({\r\n\trequiresAuth: true,\r\n});\r\n// 全局插件\r\nconst { $zsFetch } = useNuxtApp();\r\n// 用户信息\r\nconst { userInfo } = useUser();\r\n// 页面唯一元素控制\r\nconst [activeKey, setActiveKey] = useBasicsState<string | null>(null);\r\n// form\r\nconst { form } = useForm(() => ({\r\n\t...userInfo.value,\r\n\tselectRow: {} as any, // 当前数据\r\n}));\r\n// 列属性\r\nconst createTableColumns = (): TableCustomColumnData[] => {\r\n\treturn [\r\n\t\t{\r\n\t\t\ttitle: '批次',\r\n\t\t\tdataIndex: 'pc',\r\n\t\t\talign: 'center',\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#FFFFFF',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '科目类型',\r\n\t\t\tdataIndex: 'kl',\r\n\t\t\talign: 'center',\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#FFFFFF',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '批次线',\r\n\t\t\tdataIndex: 'score',\r\n\t\t\talign: 'center',\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#FFFFFF',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '操作',\r\n\t\t\tdataIndex: 'operate',\r\n\t\t\talign: 'center',\r\n\t\t\tellipsis: true,\r\n\t\t\ttooltip: true,\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#FFFFFF',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t\tslotName: 'operate',\r\n\t\t},\r\n\t];\r\n};\r\n// 设置当前数据\r\nconst setSelectRow = (row: any, callBack?: () => void) => {\r\n\tform.value.selectRow = row;\r\n\tif (callBack) callBack();\r\n};\r\n// 新增志愿\r\nconst addWish = async (record: any) => {\r\n\tconst [err, res] = await $zsFetch(API_URLS.CHOICE.ADD_WISH, {\r\n\t\tbody: {\r\n\t\t\txk: form.value.xk,\r\n\t\t\tscore: form.value.score,\r\n\t\t\twc: form.value.wc,\r\n\t\t\tpc: record.pc,\r\n\t\t},\r\n\t});\r\n\t// 去填报\r\n\tnavigateTo(`/choice?wid=${res?.data}`);\r\n};\r\n// 分数改变\r\nconst changeScore = (item: any) => {\r\n\tconst xkList =\r\n\t\titem.gkms === '3+3'\r\n\t\t\t? item.subjectList\r\n\t\t\t: [...item.firstSubjectList, ...item.secondSubjectList];\r\n\tform.value = {\r\n\t\t...form.value,\r\n\t\t...item,\r\n\t\txk: xkList.join('/'),\r\n\t};\r\n\t// 关闭页面\r\n\tsetSelectRow({}, () => setActiveKey(null));\r\n\t// 重新请求数据\r\n\trefresh();\r\n};\r\n// 查询可新增志愿批次列表\r\nconst {\r\n\tdata: pcData,\r\n\tstatus,\r\n\trefresh,\r\n} = await useAsyncData(\r\n\t'queryAddWishPcList',\r\n\tasync () => {\r\n\t\tconst [err, res] = await $zsFetch(API_URLS.CHOICE.GET_ADD_WISH_PC_LIST, {\r\n\t\t\tbody: {\r\n\t\t\t\txk: form.value.xk,\r\n\t\t\t\tscore: form.value.score,\r\n\t\t\t},\r\n\t\t});\r\n\t\t// 暴露数据\r\n\t\treturn {\r\n\t\t\tpcList: res?.data?.pcList ?? [],\r\n\t\t\twish: res?.data?.wish ?? {},\r\n\t\t} as any;\r\n\t},\r\n\t{\r\n\t\tdefault: () => ({\r\n\t\t\tpcList: [],\r\n\t\t\twish: 2024,\r\n\t\t}),\r\n\t}\r\n);\r\n</script>\r\n<style scoped>\r\n.border-radius-4 {\r\n\tborder-radius: 4px;\r\n}\r\n</style>\r\n"],"names":["_withAsyncContext"],"mappings":"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"}