{"version":3,"file":"index-3e511c39.js","sources":["../../../../components/zsSelectFilter/index.vue"],"sourcesContent":["<template>\n\t<div class=\"text-[#333]\">\n\t\t<div v-for=\"(item, index) in data\" :key=\"item.key\">\n\t\t\t<div v-if=\"item.isShow && item.options.length\" class=\"flex\">\n\t\t\t\t<div class=\"text-[14px] mr-[15px] p-[5px_8px] text-[#606266]\">\n\t\t\t\t\t{{ item.title }}\n\t\t\t\t</div>\n\t\t\t\t<!-- 数据 -->\n\t\t\t\t<ul\n\t\t\t\t\tclass=\"flex flex-1 p-[0px] flex-row flex-wrap\"\n\t\t\t\t\t:class=\"item.isCollapse ? 'h-[30px] overflow-hidden' : ''\"\n\t\t\t\t>\n\t\t\t\t\t<li\n\t\t\t\t\t\tv-for=\"option in item.options\"\n\t\t\t\t\t\tclass=\"flex items-center p-[5px_8px] mb-[5px] px-[6px] mr-[10px] text-[14px] cursor-pointer rounded-[4px] hover:text-[#7C92FF]\"\n\t\t\t\t\t\t:key=\"option.value\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'bg-[#F2F5FF] text-[#7C92FF]':\n\t\t\t\t\t\t\t\toption.value === selected[item.key] ||\n\t\t\t\t\t\t\t\t(Array.isArray(selected[item.key]) &&\n\t\t\t\t\t\t\t\t\tselected[item.key].includes(option.value)),\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t@click=\"select(item, option)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{{ option.label }}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<a-button\n\t\t\t\t\tv-if=\"item.isCollapse || item.isCollapse === false\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tclass=\"!text-[#7C92FF]\"\n\t\t\t\t\t@click=\"changeCollapse(item.isCollapse, index)\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"mr-[5px]\">{{ item.isCollapse ? '更多' : '收起' }}</span>\n\t\t\t\t\t<icon-down v-if=\"item.isCollapse\" />\n\t\t\t\t\t<icon-up v-else />\n\t\t\t\t</a-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup lang=\"ts\" name=\"ZsSelectFilter\">\ninterface OptionsProps {\n\tvalue: string | number;\n\tlabel: string;\n}\n\ninterface SelectDataProps {\n\ttitle: string; // 列表标题\n\tisShow: boolean; // 是否展示\n\tkey: string; // 当前筛选项 key 值\n\tmultiple?: boolean; // 是否为多选\n\tisCollapse?: boolean; // 是否展示折叠\n\toptions: OptionsProps[]; // 筛选数据\n}\n\ninterface SelectFilterProps {\n\tdata?: any; // 选择的列表数据\n\tdefaultValues?: { [key: string]: any }; // 默认值\n}\n// 接受父组件参数及设置默认值\nconst props = withDefaults(defineProps<SelectFilterProps>(), {\n\tdata: () => [],\n\tdefaultValues: () => ({}),\n});\n\n// 给父组件传参\nconst emits = defineEmits(['change']);\n// 重新接收默认值\nconst selected = ref<{ [key: string]: any }>({});\nwatch(\n\t() => props.defaultValues,\n\t() => {\n\t\tprops.data.forEach((item: any) => {\n\t\t\tif (item.multiple) selected.value[item.key] = props.defaultValues[item.key] ?? [''];\n\t\t\telse selected.value[item.key] = props.defaultValues[item.key] ?? '';\n\t\t});\n\t},\n\t{ deep: true, immediate: true }\n);\n/**\n * @description 选择筛选项\n * @param {Object} item 选中的哪项列表\n * @param {Object} option 选中的值\n * @return void\n * */\nconst select = (item: SelectDataProps, option: OptionsProps) => {\n\tif (!item.multiple) {\n\t\t// * 单选\n\t\tif (selected.value[item.key] !== option.value) selected.value[item.key] = option.value;\n\t} else {\n\t\t// * 多选\n\t\t// 如果选中的是第一个值，则直接设置\n\t\tif (item.options[0].value === option.value) selected.value[item.key] = [option.value];\n\t\t// 如果选择的值已经选中了，则删除选中的值\n\t\tif (selected.value[item.key].includes(option.value)) {\n\t\t\tlet currentIndex = selected.value[item.key].findIndex((s: any) => s === option.value);\n\t\t\tselected.value[item.key].splice(currentIndex, 1);\n\t\t\t// 当全部删光时，把第第一个值选中\n\t\t\tif (selected.value[item.key].length == 0)\n\t\t\t\tselected.value[item.key] = [item.options[0].value];\n\t\t} else {\n\t\t\t// 未选中点击值的时候，追加选中值\n\t\t\tselected.value[item.key].push(option.value);\n\t\t\t// 单选中全部并且点击到了未选中的值，把第一个值删除掉\n\t\t\tif (selected.value[item.key].includes(item.options[0].value))\n\t\t\t\tselected.value[item.key].splice(0, 1);\n\t\t}\n\t}\n\temits('change', selected.value);\n};\n\n// 改变当前isCollapse\nconst changeCollapse = (isCollapse: boolean, index: any) => {\n\tprops.data[index].isCollapse = !isCollapse;\n};\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAuEA,UAAA,WAAA,IAAA,CAAA,CAAA;AACA;AAAA,MAAA,MAAA,MAAA;AAAA,MACa,MAAA;AAEX,cAAA,KAAA,QAAA,CAAA,SAAA;AACC,cAAA,KAAA;AAAmB,qBAAA,MAAA,KAAA,GAAA,IAAA,MAAA,cAAA,KAAA,GAAA,KAAA,CAAA,EAAA;AAAA;AACd,qBAAA,MAAA,KAAA,GAAA,IAAA,MAAA,cAAA,KAAA,GAAA,KAAA;AAAA,QAA4D,CAAA;AAAA,MACjE;AAAA,MACF,EAAA,MAAA,MAAA,WAAA,KAAA;AAAA,IAC8B;AAmC/B,UAAA,iBAAA,CAAA,YAAA,UAAA;AACC,YAAA,KAAA,KAAA,EAAA,aAAA,CAAA;AAAA,IAAgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}