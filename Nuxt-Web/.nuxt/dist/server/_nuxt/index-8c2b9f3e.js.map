{"version":3,"file":"index-8c2b9f3e.js","sources":["../../../../pages/jobLibrary/index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"max-w-container mx-auto\">\r\n\t\t<!-- 搜索框 -->\r\n\t\t<div class=\"flex items-center mt-[20px]\">\r\n\t\t\t<!-- 完全匹配 -->\r\n\t\t\t<div class=\"w-[150px]\">\r\n\t\t\t\t<a-button size=\"large\">\r\n\t\t\t\t\t<a-checkbox v-model=\"form.perfectMatch\" @change=\"!form.perfectMatch\">\r\n\t\t\t\t\t\t完全匹配\r\n\t\t\t\t\t</a-checkbox>\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t\t<!-- 搜索你感兴趣的职业 -->\r\n\t\t\t<div class=\"w-full ml-[20px]\">\r\n\t\t\t\t<a-input\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tv-model=\"form.professionName\"\r\n\t\t\t\t\tclass=\"rounded-lg h-[38px]\"\r\n\t\t\t\t\tplaceholder=\"搜索你感兴趣的职业\"\r\n\t\t\t\t\tallow-clear\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>\r\n\t\t\t\t\t\t<icon-search />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</a-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"w-[120px] ml-[20px]\">\r\n\t\t\t\t<a-button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tclass=\"openButton w-[120px]\"\r\n\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\tform.professionName\r\n\t\t\t\t\t\t\t? navigateTo(`/jobLibrary/search?keyword=${form.professionName}`)\r\n\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\"\r\n\t\t\t\t>\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 选择过滤 -->\r\n\t\t<zs-select-filter\r\n\t\t\t:data=\"filterData\"\r\n\t\t\t:default-values=\"form\"\r\n\t\t\t@change=\"changeFilter\"\r\n\t\t\tclass=\"mt-[20px]\"\r\n\t\t/>\r\n\t\t<div class=\"mt-[20px]\">\r\n\t\t\t<div class=\"mt-[10px]\">\r\n\t\t\t\t{{\r\n\t\t\t\t\tmiddleCategoriesCount +\r\n\t\t\t\t\t'个职业中类、' +\r\n\t\t\t\t\tsmallCategoriesCount +\r\n\t\t\t\t\t'个职业小类、' +\r\n\t\t\t\t\tjobsCount +\r\n\t\t\t\t\t'个职业'\r\n\t\t\t\t}}\r\n\t\t\t</div>\r\n\t\t\t<div v-for=\"(middle, index) in form.selectList\" :key=\"index\">\r\n\t\t\t\t<!-- 职业中类 -->\r\n\t\t\t\t<div class=\"flex items-center my-[20px]\">\r\n\t\t\t\t\t<div class=\"rounded-[0px_6px_6px_0px] bg-[#7C92FF] w-[8px] h-[20px]\"></div>\r\n\t\t\t\t\t<div class=\"ml-[10px] text-[18px] text-[#333] font-bold\">\r\n\t\t\t\t\t\t{{ middle.levelName }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a-card\r\n\t\t\t\t\tv-for=\"(small, index) in middle.children\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\tclass=\"mb-[10px] card-box-shadow rounded-[8px]\"\r\n\t\t\t\t\thoverable\r\n\t\t\t\t\t:bordered=\"false\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"flex items-center\">\r\n\t\t\t\t\t\t<!-- 职业小类 -->\r\n\t\t\t\t\t\t<!-- <a-tooltip :content=\"small.levelName\" position=\"lt\"> -->\r\n\t\t\t\t\t\t<div class=\"w-[300px] truncate text-[16px] font-bold\">\r\n\t\t\t\t\t\t\t{{ small.levelName }}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- </a-tooltip> -->\r\n\t\t\t\t\t\t<a-grid :cols=\"3\" :colGap=\"12\" :rowGap=\"16\" class=\"flex-1\">\r\n\t\t\t\t\t\t\t<a-grid-item\r\n\t\t\t\t\t\t\t\tv-for=\"(job, index) in small.children\"\r\n\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\tclass=\"h-[35px] leading-[35px] px-[10px]\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<!-- 职业 -->\r\n\t\t\t\t\t\t\t\t<nuxt-link :to=\"`/jobLibrary/${job.id}`\">\r\n\t\t\t\t\t\t\t\t\t<a-tooltip :content=\"job.levelName\" position=\"lt\">\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-[#7c92ff] truncate w-[80%] text-[16px] cursor-pointer\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ job.levelName }}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</a-tooltip>\r\n\t\t\t\t\t\t\t\t</nuxt-link>\r\n\t\t\t\t\t\t\t</a-grid-item>\r\n\t\t\t\t\t\t</a-grid>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-card>\r\n\t\t\t</div>\r\n\t\t\t<zs-no-data v-if=\"!form.selectList.length && form.show\">\r\n\t\t\t\t<div>糟糕，未查询到匹配职业</div>\r\n\t\t\t</zs-no-data>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// 设置头信息\r\nuseHead({\r\n\ttitle: '职业库',\r\n});\r\n// 网站全局控制\r\nconst { setGlobalLoading } = useLoading();\r\n// 全局插件\r\nconst { $zsFetch } = useNuxtApp();\r\n// form\r\nconst { form } = useForm(() => ({\r\n\tperfectMatch: false,\r\n\tprofessionName: '',\r\n\tlevelName: '',\r\n\tselectList: [] as any,\r\n\tshow: false,\r\n}));\r\n// change事件\r\nconst changeFilter = (val: any) => {\r\n\tform.value.levelName = val.levelName;\r\n\tform.value.selectList = findOptions(filterData.value[0].options, val.levelName).children;\r\n};\r\n\r\n// 数据列表\r\nconst filterData = ref([\r\n\t{\r\n\t\ttitle: '职业大类',\r\n\t\tkey: 'levelName',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: [],\r\n\t},\r\n]);\r\n// 获取职业列表\r\nconst getJobList = async () => {\r\n\t// 全局loading 开\r\n\tawait setGlobalLoading(true);\r\n\tconst [err, res] = await $zsFetch(API_URLS.MORE.GET_PROFESSION, {\r\n\t\tbody: {},\r\n\t});\r\n\t// 处理错误\r\n\tif (err) return setGlobalLoading(false);\r\n\tconst result =\r\n\t\tres.data.map((o: any) => {\r\n\t\t\treturn {\r\n\t\t\t\t...o,\r\n\t\t\t\tvalue: o.levelName,\r\n\t\t\t\tlabel: o.levelName,\r\n\t\t\t};\r\n\t\t}) ?? [];\r\n\tfilterData.value[0].options = result;\r\n\tform.value.show = true;\r\n\tform.value.levelName = result[0]?.levelName;\r\n\tform.value.selectList = result[0]?.children; // 赋值默认选中职业\r\n\t// 全局loading 关\r\n\tsetGlobalLoading(false);\r\n};\r\ngetJobList();\r\n\r\n// 计算属性来获取中类、小类和职业的数量\r\nconst middleCategoriesCount = computed(() => form.value.selectList.length);\r\nconst smallCategoriesCount = computed(() => {\r\n\treturn form.value.selectList.reduce((acc: any, middle: any) => acc + middle.children.length, 0);\r\n});\r\nconst jobsCount = computed(() => {\r\n\treturn form.value.selectList.reduce((acc: any, middle: any) => {\r\n\t\treturn (\r\n\t\t\tacc + middle.children.reduce((acc2: any, small: any) => acc2 + small.children.length, 0)\r\n\t\t);\r\n\t}, 0);\r\n});\r\n</script>\r\n<style scoped>\r\n.openButton {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n.openButton:hover {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA,YAAA;AAAA,MAAQ,OAAA;AAAA,IACA,CAAA;AAGR,UAAA,EAAA,qBAAA;AAEA,UAAA,EAAA,aAAA;AAEA,UAAA,EAAA,SAAA,QAAA,OAAA;AAAA,MAAgC,cAAA;AAAA,MACjB,gBAAA;AAAA,MACE,WAAA;AAAA,MACL,YAAA,CAAA;AAAA,MACE,MAAA;AAAA,IACP,EAAA;AAGP,UAAA,eAAA,CAAA,QAAA;AACC,WAAA,MAAA,YAAA,IAAA;AACA,WAAA,MAAA,aAAA,YAAA,WAAA,MAAA,CAAA,EAAA,SAAA,IAAA,SAAA,EAAA;AAAA,IAAgF;AAIjF,UAAA,aAAA,IAAA;AAAA,MAAuB;AAAA,QACtB,OAAA;AAAA,QACQ,KAAA;AAAA,QACF,QAAA;AAAA,QACG,UAAA;AAAA,QACE,SAAA,CAAA;AAAA,MACA;AAAA,IACX,CAAA;AAGD,UAAA,aAAA,YAAA;;AAEC,YAAA,iBAAA,IAAA;AACA,YAAA,CAAA,KAAA,GAAA,IAAA,MAAA,SAAA,SAAA,KAAA,gBAAA;AAAA,QAAgE,MAAA,CAAA;AAAA,MACxD,CAAA;AAGR,UAAA;AAAS,eAAA,iBAAA,KAAA;AACT,YAAA,SAAA,IAAA,KAAA,IAAA,CAAA,MAAA;AAEE,eAAA;AAAA,UAAO,GAAA;AAAA,UACH,OAAA,EAAA;AAAA,UACM,OAAA,EAAA;AAAA,QACA;AAAA,MACV,CAAA,KAAA,CAAA;AAEF,iBAAA,MAAA,CAAA,EAAA,UAAA;AACA,WAAA,MAAA,OAAA;AACA,WAAA,MAAA,aAAA,YAAA,CAAA,MAAA,mBAAA;AACA,WAAA,MAAA,cAAA,YAAA,CAAA,MAAA,mBAAA;AAEA,uBAAA,KAAA;AAAA,IAAsB;AAEvB;AAGA,UAAA,wBAAA,SAAA,MAAA,KAAA,MAAA,WAAA,MAAA;AACA,UAAA,uBAAA,SAAA,MAAA;AACC,aAAA,KAAA,MAAA,WAAA,OAAA,CAAA,KAAA,WAAA,MAAA,OAAA,SAAA,QAAA,CAAA;AAAA,IAA8F,CAAA;AAE/F,UAAA,YAAA,SAAA,MAAA;AACC,aAAA,KAAA,MAAA,WAAA,OAAA,CAAA,KAAA,WAAA;AACC,eAAA,MAAA,OAAA,SAAA,OAAA,CAAA,MAAA,UAAA,OAAA,MAAA,SAAA,QAAA,CAAA;AAAA,MACwF,GAAA,CAAA;AAAA,IAErF,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}