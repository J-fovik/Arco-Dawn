{"version":3,"file":"index-9a6e8b24.js","sources":["../../../../components/zsECharts/config/index.ts","../../../../components/zsECharts/index.vue"],"sourcesContent":["// ECharts 的核心模块\nimport * as echarts from 'echarts/core';\n// ECharts 的多个组件模块，包括标题组件、提示框组件、网格组件等\nimport {\n\tTitleComponent,\n\tTooltipComponent,\n\tGridComponent,\n\tDatasetComponent,\n\tTransformComponent,\n\tLegendComponent,\n\tPolarComponent,\n\tGeoComponent,\n\tToolboxComponent,\n\tDataZoomComponent,\n} from 'echarts/components';\n// ECharts 的多个图表类型模块，包括柱状图、折线图、饼图等\nimport {\n\tBarChart,\n\tLineChart,\n\tLinesChart,\n\tPieChart,\n\tScatterChart,\n\tRadarChart,\n\tGaugeChart,\n} from 'echarts/charts';\n//  ECharts 的多个特性模块，包括标签布局和通用过渡效果\nimport { LabelLayout, UniversalTransition } from 'echarts/features';\n//  ECharts 的 Canvas 渲染器模块\nimport { CanvasRenderer } from 'echarts/renderers';\n// 圆环\nimport { GraphicComponent } from 'echarts/components';\n// ECharts 的一个插件，用于生成液态填充图表\n// import 'echarts-liquidfill';\n// 注册了所有的图表类型、组件和特性\necharts.use([\n\tTitleComponent,\n\tTooltipComponent,\n\tGridComponent,\n\tDatasetComponent,\n\tTransformComponent,\n\tLegendComponent,\n\tPolarComponent,\n\tGeoComponent,\n\tToolboxComponent,\n\tDataZoomComponent,\n\tBarChart,\n\tLineChart,\n\tLinesChart,\n\tPieChart,\n\tScatterChart,\n\tRadarChart,\n\tGaugeChart,\n\tLabelLayout,\n\tUniversalTransition,\n\tCanvasRenderer,\n\tGraphicComponent,\n]);\n\nexport default echarts;\n","<template>\r\n\t<div ref=\"eChartRef\" :style=\"echartsStyle\"></div>\r\n</template>\r\n\r\n<script setup lang=\"ts\" name=\"EChart\">\r\nimport echarts from './config';\r\n// 防抖监听窗口变化\r\nimport { useDebounceFn, useResizeObserver } from '@vueuse/core';\r\n// 定义 Props 接口，用于接收来自父组件的配置\r\ninterface Props {\r\n\toptions: Object; // 图表配置选项\r\n\trenderer?: 'canvas' | 'svg'; // 图表渲染方式\r\n\ttheme?: 'dark' | 'light'; // 图表主题\r\n\twidth?: number | string; // 图表宽度\r\n\theight?: number | string; // 图表高度\r\n\tonClick?: (event: any) => any; // 图表点击事件的处理函数\r\n\tonMove?: (event: any) => any; // 图表鼠标移动事件的处理函数\r\n}\r\n// 使用 withDefaults 函数为 Props 接口提供默认值\r\nconst props = withDefaults(defineProps<Props>(), {\r\n\trenderer: 'canvas',\r\n\ttheme: 'light',\r\n});\r\n// ref实例\r\nconst eChartRef = ref<HTMLDivElement | null>(null);\r\n// 定义实例\r\nlet instance: any;\r\n// 计算图表的样式\r\nconst echartsStyle = computed(() => {\r\n\tconst width = props.width || '100%';\r\n\tconst height = props.height || '100%';\r\n\treturn { height, width };\r\n});\r\n// 处理图表点击事件\r\nconst handleClick = (event: any) => props.onClick && props.onClick(event);\r\n// 处理图表鼠标移动事件\r\nconst handleMousemove = (event: any) => props.onMove && props.onMove(event);\r\n\r\n// 节流\r\nconst debounceFn = useDebounceFn(() => {\r\n\tinstance.resize({\r\n\t\tanimation: {\r\n\t\t\tduration: 500,\r\n\t\t},\r\n\t});\r\n}, 500);\r\n// 初始化图表\r\nconst init = () => {\r\n\t// 响应式数据\r\n\tconst options = toRef(props, 'options');\r\n\t// 确保获取到ref\r\n\tif (eChartRef.value) {\r\n\t\tinstance = echarts.init(eChartRef.value as HTMLDivElement, props.theme, {\r\n\t\t\t// 指定渲染器类型，默认是 'canvas'\r\n\t\t\trenderer: props.renderer,\r\n\t\t});\r\n\t\t// 配置\r\n\t\tinstance.setOption(options.value as any, { notMerge: true });\r\n\t\t// 添加点击事件监听器\r\n\t\tinstance.on('click', handleClick);\r\n\t\t// 添加鼠标移动事件监听器\r\n\t\tinstance.on('mousemove', handleMousemove);\r\n\t}\r\n};\r\n// 监听 props 变化，并重新绘制图表\r\nwatch(\r\n\tprops,\r\n\t() => {\r\n\t\t// 销毁之后再初始化\r\n\t\tif (instance) echarts.dispose(instance);\r\n\t\tinit();\r\n\t},\r\n\t{ immediate: true }\r\n);\r\n// 使用useResizeObserver监听容器大小变化\r\nuseResizeObserver(eChartRef, () => {\r\n\tif (instance) {\r\n\t\tdebounceFn();\r\n\t}\r\n});\r\n// 缓存组件之后用 onActivated 和 onDeactivated(解决全屏dataScreen页面为缓存问题)\r\nonMounted(() => {\r\n\tinit();\r\n});\r\n// 离开页面之前卸载实例\r\nonBeforeUnmount(() => {\r\n\tif (instance) echarts.dispose(instance);\r\n});\r\n// 向父组件暴漏API\r\ndefineExpose({\r\n\tgetInstance: () => instance,\r\n\tdebounceFn,\r\n\tinit,\r\n});\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;;AAkCA,QAAQ,IAAI;AAAA,EACX;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,CAAC;;;;;;;;;;;;;;;AChCK,UAAA,YAAY,IAA2B,IAAI;AAE7C,QAAA;AAEE,UAAA,eAAe,SAAS,MAAM;AAC7B,YAAA,QAAQ,MAAM,SAAS;AACvB,YAAA,SAAS,MAAM,UAAU;AACxB,aAAA,EAAE,QAAQ;IAAM,CACvB;AAED,UAAM,cAAc,CAAC,UAAe,MAAM,WAAW,MAAM,QAAQ,KAAK;AAExE,UAAM,kBAAkB,CAAC,UAAe,MAAM,UAAU,MAAM,OAAO,KAAK;AAGpE,UAAA,aAAa,cAAc,MAAM;AACtC,eAAS,OAAO;AAAA,QACf,WAAW;AAAA,UACV,UAAU;AAAA,QACX;AAAA,MAAA,CACA;AAAA,OACC,GAAG;AAEN,UAAM,OAAO,MAAM;AAEZ,YAAA,UAAU,MAAM,OAAO,SAAS;AAEtC,UAAI,UAAU,OAAO;AACpB,mBAAW,QAAQ,KAAK,UAAU,OAAyB,MAAM,OAAO;AAAA;AAAA,UAEvE,UAAU,MAAM;AAAA,QAAA,CAChB;AAED,iBAAS,UAAU,QAAQ,OAAc,EAAE,UAAU,MAAM;AAElD,iBAAA,GAAG,SAAS,WAAW;AAEvB,iBAAA,GAAG,aAAa,eAAe;AAAA,MACzC;AAAA,IAAA;AAGD;AAAA,MACC;AAAA,MACA,MAAM;AAED,YAAA;AAAU,kBAAQ,QAAQ,QAAQ;AACjC;MACN;AAAA,MACA,EAAE,WAAW,KAAK;AAAA,IAAA;AAGnB,sBAAkB,WAAW,MAAM;AAClC,UAAI,UAAU;AACF;MACZ;AAAA,IAAA,CACA;AAUY,aAAA;AAAA,MACZ,aAAa,MAAM;AAAA,MACnB;AAAA,MACA;AAAA,IAAA,CACA;;;;;;;;;;;;;;;;"}