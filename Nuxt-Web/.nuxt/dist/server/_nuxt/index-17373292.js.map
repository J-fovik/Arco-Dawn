{"version":3,"file":"index-17373292.js","sources":["../../../../pages/evaluate/index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"max-w-container mx-auto min-h-[60vh]\">\r\n\t\t<a-list :bordered=\"false\" :loading=\"status === 'pending'\">\r\n\t\t\t<a-list-item v-for=\"(item, index) in evaluateList\" :key=\"index\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"bg-[url('/images/evaluate.png')] bg-no-repeat bg-[length:100%_100%] mt-[20px] p-[20px_40px]\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"text-[28px] font-bold\">{{ item.name }}</div>\r\n\t\t\t\t\t<div class=\"mt-[10px] text-[16px] w-[700px]\">{{ item.advertiseTitle }}</div>\r\n\t\t\t\t\t<div class=\"mt-[10px]\">\r\n\t\t\t\t\t\t<span class=\"mr-[30px]\">\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclass=\"iconfont icon-wodeguanzhu font-bold text-[#666666] mr-[5px]\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t>已测人数：<span>{{ turnThousandth(item.userNum) }}</span> 万</span\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span class=\"mr-[30px]\">\r\n\t\t\t\t\t\t\t<i class=\"iconfont icon-rili font-bold text-[#666666] mr-[5px]\" />\r\n\t\t\t\t\t\t\t<span>测评周期：<span>1天</span>/次</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span class=\"mr-[30px]\">\r\n\t\t\t\t\t\t\t<i class=\"iconfont icon-wenjuan font-bold text-[#666666] mr-[5px]\" />\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t>精选题目：<span>{{ item.topicNum }}</span\r\n\t\t\t\t\t\t\t\t>题</span\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<i class=\"iconfont icon-bofangjilu font-bold text-[#666666] mr-[5px]\" />\r\n\t\t\t\t\t\t\t<span>建议时常：<span>不限</span></span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<template v-if=\"item.userEvaluationState == '1'\">\r\n\t\t\t\t\t\t<a-button\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tclass=\"openButton mt-[20px]\"\r\n\t\t\t\t\t\t\t@click=\"determineLogin(() => navigateTo(`/evaluate/${item.id}`))\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t开始测评\r\n\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<a-space>\r\n\t\t\t\t\t\t\t<a-button\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\tclass=\"openButton mt-[20px]\"\r\n\t\t\t\t\t\t\t\t@click=\"getEvaluateTime(item)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t开始测评\r\n\t\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t\t\t<a-button\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t:loading=\"activeKey === item.id + '查看报告'\"\r\n\t\t\t\t\t\t\t\tclass=\"viewResult mt-[20px]\"\r\n\t\t\t\t\t\t\t\t@click=\"viewReport(item.id)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t查看报告\r\n\t\t\t\t\t\t\t</a-button>\r\n\t\t\t\t\t\t</a-space>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</div>\r\n\t\t\t</a-list-item>\r\n\t\t</a-list>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// 设置头信息\r\nuseHead({\r\n\ttitle: '生涯测评',\r\n});\r\n// 页面信息\r\ndefinePageMeta({\r\n\trequiresAuth: true,\r\n});\r\n// 全局插件\r\nconst { $zsFetch, $zsMsg } = useNuxtApp();\r\n// 用户信息\r\nconst { determineLogin } = useUser();\r\n// 页面唯一元素控制\r\nconst [activeKey, setActiveKey] = useBasicsState<string | null>(null);\r\n// 获取测评列表\r\nconst { data: evaluateList, status } = await useAsyncData<any>(\r\n\t'evaluateList',\r\n\tasync () => {\r\n\t\tconst [err, res] = await $zsFetch(API_URLS.EVALUATE.GET_EVALUATE_LIST, {});\r\n\t\treturn res.data ?? [];\r\n\t},\r\n\t{ default: () => [] }\r\n);\r\n// 获取测评时间\r\nconst getEvaluateTime = async (item: any) => {\r\n\tconst [err, res] = await $zsFetch(API_URLS.EVALUATE.GET_EVALUATE_TIME, {\r\n\t\tbody: {\r\n\t\t\tid: item.id,\r\n\t\t},\r\n\t});\r\n\t// result == 1 直接做题否则提示还剩多少时间\r\n\tif (res.data?.result == 1) {\r\n\t\tnavigateTo(`/evaluate/${item.id}`);\r\n\t} else {\r\n\t\t$zsMsg('waring', res.data?.arriveTime);\r\n\t}\r\n};\r\n// 查看报告\r\nconst viewReport = async (id: any) => {\r\n\t// 设置当前值\r\n\tsetActiveKey(id + '查看报告');\r\n\tconst [err, res] = await $zsFetch(API_URLS.EVALUATE.VIEW_EVALUATE_REPORT, {\r\n\t\tbody: {\r\n\t\t\tid: id,\r\n\t\t},\r\n\t});\r\n\tif (res) {\r\n\t\t// 清空当前值并打开报告\r\n\t\tsetActiveKey(null);\r\n\t\twindow.open(res.data, '_blank');\r\n\t}\r\n};\r\n</script>\r\n<style scoped>\r\n.openButton {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n.openButton:hover {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n.viewResult {\r\n\tborder-radius: 8px 8px 8px 8px;\r\n\tborder: 1px solid #7c92ff;\r\n\tcolor: #7c92ff;\r\n\tbackground-color: transparent;\r\n}\r\n.viewResult:hover {\r\n\tborder-radius: 8px 8px 8px 8px;\r\n\tborder: 1px solid #7c92ff;\r\n\tcolor: #7c92ff;\r\n\tbackground-color: transparent;\r\n}\r\n</style>\r\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA,YAAA;AAAA,MAAQ,OAAA;AAAA,IACA,CAAA;AAOR,UAAA,EAAA,UAAA,OAAA,IAAA,WAAA;AAEA,UAAA,EAAA,mBAAA;AAEA,UAAA,CAAA,WAAA,YAAA,IAAA,eAAA,IAAA;AAEA,UAAA,EAAA,MAAA,cAAA,OAAA,KAAA,CAAA,QAAA,SAAA,IAAAA,iBAAA,YAAA;AAAA,MAA6C;AAAA,MAC5C,YAAA;AAEC,cAAA,CAAA,KAAA,GAAA,IAAA,MAAA,SAAA,SAAA,SAAA,mBAAA,CAAA,CAAA;AACA,eAAA,IAAA,QAAA;MAAoB;AAAA,MACrB,EAAA,SAAA,MAAA,GAAA;AAAA,IACoB,CAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;AAGrB,UAAA,kBAAA,OAAA,SAAA;;AACC,YAAA,CAAA,KAAA,GAAA,IAAA,MAAA,SAAA,SAAA,SAAA,mBAAA;AAAA,QAAuE,MAAA;AAAA,UAChE,IAAA,KAAA;AAAA,QACI;AAAA,MACV,CAAA;AAGD,YAAA,SAAA,SAAA,mBAAA,WAAA,GAAA;AACC,mBAAA,aAAA,KAAA,EAAA,EAAA;AAAA,MAAiC,OAAA;AAEjC,eAAA,WAAA,SAAA,SAAA,mBAAA,UAAA;AAAA,MAAqC;AAAA,IACtC;AAGD,UAAA,aAAA,OAAA,OAAA;AAEC,mBAAA,KAAA,MAAA;AACA,YAAA,CAAA,KAAA,GAAA,IAAA,MAAA,SAAA,SAAA,SAAA,sBAAA;AAAA,QAA0E,MAAA;AAAA,UACnE;AAAA,QACL;AAAA,MACD,CAAA;AAED,UAAA,KAAA;AAEC,qBAAA,IAAA;AACA,eAAA,KAAA,IAAA,MAAA,QAAA;AAAA,MAA8B;AAAA,IAC/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}