{"version":3,"file":"schoolRank-2ecd14fb.js","sources":["../../../../pages/schoolRank.vue"],"sourcesContent":["<template>\r\n\t<div class=\"max-w-container mx-auto\">\r\n\t\t<!-- 搜索框 -->\r\n\t\t<div class=\"flex items-center mt-[20px]\">\r\n\t\t\t<!-- 完全匹配 -->\r\n\t\t\t<div class=\"w-[150px]\">\r\n\t\t\t\t<a-button size=\"large\">\r\n\t\t\t\t\t<a-checkbox v-model=\"form.isMatch\" @change=\"resetData\"> 完全匹配 </a-checkbox>\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t\t<!-- 搜索你感兴趣的院校 -->\r\n\t\t\t<div class=\"w-full ml-[20px]\">\r\n\t\t\t\t<a-input\r\n\t\t\t\t\tv-model.trim=\"form.yxmc\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tclass=\"rounded-lg h-[38px]\"\r\n\t\t\t\t\tplaceholder=\"搜索你感兴趣的院校\"\r\n\t\t\t\t\tallow-clear\r\n\t\t\t\t\t@clear=\"resetData\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>\r\n\t\t\t\t\t\t<icon-search />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</a-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"w-[120px] ml-[20px]\">\r\n\t\t\t\t<a-button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tclass=\"openButton w-[120px] rounded-[4px]\"\r\n\t\t\t\t\t@click=\"resetData\"\r\n\t\t\t\t>\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 选择过滤 -->\r\n\t\t<zs-select-filter\r\n\t\t\t:data=\"filterData\"\r\n\t\t\t:default-values=\"form\"\r\n\t\t\t@change=\"changeFilter\"\r\n\t\t\tclass=\"mt-[20px]\"\r\n\t\t/>\r\n\t\t<!-- 院校列表 -->\r\n\t\t<a-list class=\"list-border mt-[20px]\" :bordered=\"false\" :loading=\"status === 'pending'\">\r\n\t\t\t<a-list-item v-for=\"(school, index) in data.schoolList\" :key=\"school.id\">\r\n\t\t\t\t<div class=\"flex items-center\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"flex items-center justify-center w-[40px] h-[40px] bg-[#F5F5F5] rounded-[40px] mr-[30px]\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ school?.rankOut }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"flex-1\" @click=\"navigateTo(`/college/${school.id}`)\">\r\n\t\t\t\t\t\t<zs-school-list-meta :school=\"school\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</a-list-item>\r\n\t\t\t<template #empty>\r\n\t\t\t\t<zs-no-data-small />\r\n\t\t\t</template>\r\n\t\t</a-list>\r\n\t\t<!-- 分页 -->\r\n\t\t<a-pagination\r\n\t\t\tclass=\"justify-end mt-[20px]\"\r\n\t\t\t:total=\"data.total\"\r\n\t\t\t:current=\"pagination.current\"\r\n\t\t\t:page-size=\"pagination.pageSize\"\r\n\t\t\t@change=\"onPageChange\"\r\n\t\t\t@page-size-change=\"onPageSizeChange\"\r\n\t\t\tshow-total\r\n\t\t\tshow-jumper\r\n\t\t\tshow-page-size\r\n\t\t/>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// 设置头信息\r\nuseHead({\r\n\ttitle: '大学排名',\r\n});\r\n// 全局插件\r\nconst { $zsFetch } = useNuxtApp();\r\n// 网站信息\r\nconst { getDictionValue } = useWebsiteInformation();\r\n// form\r\nconst { form } = useForm(() => ({\r\n\tyxmc: '',\r\n\tisMatch: false,\r\n\trankType: getDictionValue('RANK')[0].value,\r\n\tsortType: '',\r\n}));\r\n// 分页控制\r\nconst { pagination, resetData, onPageChange, onPageSizeChange } = usePagination(() => {\r\n\t// 滚动到顶部\r\n\twindow.scrollTo(0, 0);\r\n\t// 请求数据\r\n\trefresh();\r\n});\r\n// 数据列表\r\nconst filterData = ref([\r\n\t{\r\n\t\ttitle: '排名类型',\r\n\t\tkey: 'rankType',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: getDictionValue('RANK'),\r\n\t},\r\n\t{\r\n\t\ttitle: '院校类型',\r\n\t\tkey: 'sortType',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: [...NO_LIMIT_OPTIONS, ...getDictionValue('YXLX')],\r\n\t},\r\n]);\r\n// change事件\r\nconst changeFilter = (val: any) => {\r\n\t// 切换排名类型 不等于第一项软科时\r\n\tif (form.value.rankType !== val.rankType) {\r\n\t\tform.value.rankType = val.rankType;\r\n\t\tform.value.sortType = '';\r\n\t} else {\r\n\t\tform.value.sortType = val.sortType;\r\n\t}\r\n\tif (form.value.rankType !== getDictionValue('RANK')[0]?.value) {\r\n\t\tfilterData.value[1].isShow = false;\r\n\t} else {\r\n\t\tfilterData.value[1].isShow = true;\r\n\t}\r\n\t// 请求数据\r\n\tresetData();\r\n};\r\n\r\n// 服务端请求院校排名列表\r\nconst { data, status, refresh } = await useAsyncData(\r\n\t'schoolRankList',\r\n\tasync () => {\r\n\t\tconst [err, res] = await $zsFetch(API_URLS.MORE.GET_SCHOOL_RANK, {\r\n\t\t\tbody: {\r\n\t\t\t\t...form.value,\r\n\t\t\t\tisMatch: form.value.isMatch ? '1' : '0',\r\n\t\t\t\tcurrentPage: pagination.value.current,\r\n\t\t\t\tpageSize: pagination.value.pageSize,\r\n\t\t\t\tpagingOrNot: 1,\r\n\t\t\t},\r\n\t\t});\r\n\t\t// 返回数据\r\n\t\treturn {\r\n\t\t\ttotal: res?.data?.totalCount ?? 0,\r\n\t\t\tschoolList: res?.data?.list ?? [],\r\n\t\t};\r\n\t},\r\n\t{\r\n\t\tdefault: () => ({\r\n\t\t\ttotal: 0,\r\n\t\t\tschoolList: [],\r\n\t\t}),\r\n\t}\r\n);\r\n</script>\r\n<style scoped>\r\n.list-border {\r\n\tborder-bottom: 1px solid var(--color-neutral-3);\r\n\tborder-top: 1px solid var(--color-neutral-3);\r\n}\r\n.openButton {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n.openButton:hover {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n</style>\r\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,YAAA;AAAA,MAAQ,OAAA;AAAA,IACA,CAAA;AAGR,UAAA,EAAA,aAAA;AAEA,UAAA,EAAA,oBAAA;AAEA,UAAA,EAAA,SAAA,QAAA,OAAA;AAAA,MAAgC,MAAA;AAAA,MACzB,SAAA;AAAA,MACG,UAAA,gBAAA,MAAA,EAAA,CAAA,EAAA;AAAA,MAC4B,UAAA;AAAA,IAC3B,EAAA;AAGX,UAAA,EAAA,YAAA,WAAA,cAAA,iBAAA,IAAA,cAAA,MAAA;AAEC,aAAA,SAAA,GAAA,CAAA;AAEA;IAAQ,CAAA;AAGT,UAAA,aAAA,IAAA;AAAA,MAAuB;AAAA,QACtB,OAAA;AAAA,QACQ,KAAA;AAAA,QACF,QAAA;AAAA,QACG,UAAA;AAAA,QACE,SAAA,gBAAA,MAAA;AAAA,MACqB;AAAA,MAChC;AAAA,QACA,OAAA;AAAA,QACQ,KAAA;AAAA,QACF,QAAA;AAAA,QACG,UAAA;AAAA,QACE,SAAA,CAAA,GAAA,kBAAA,GAAA,gBAAA,MAAA,CAAA;AAAA,MAC+C;AAAA,IAC1D,CAAA;AAGD,UAAA,eAAA,CAAA,QAAA;;AAEC,UAAA,KAAA,MAAA,aAAA,IAAA,UAAA;AACC,aAAA,MAAA,WAAA,IAAA;AACA,aAAA,MAAA,WAAA;AAAA,MAAsB,OAAA;AAEtB,aAAA,MAAA,WAAA,IAAA;AAAA,MAA0B;AAE3B,UAAA,KAAA,MAAA,eAAA,qBAAA,MAAA,EAAA,CAAA,MAAA,mBAAA,QAAA;AACC,mBAAA,MAAA,CAAA,EAAA,SAAA;AAAA,MAA6B,OAAA;AAE7B,mBAAA,MAAA,CAAA,EAAA,SAAA;AAAA,MAA6B;AAG9B;IAAU;AAIX,UAAA,EAAA,MAAA,QAAA,QAAA,KAAA,CAAA,QAAA,SAAA,IAAAA,iBAAA,YAAA;AAAA,MAAwC;AAAA,MACvC,YAAA;;AAEC,cAAA,CAAA,KAAA,GAAA,IAAA,MAAA,SAAA,SAAA,KAAA,iBAAA;AAAA,UAAiE,MAAA;AAAA,YAC1D,GAAA,KAAA;AAAA,YACG,SAAA,KAAA,MAAA,UAAA,MAAA;AAAA,YAC4B,aAAA,WAAA,MAAA;AAAA,YACN,UAAA,WAAA,MAAA;AAAA,YACH,aAAA;AAAA,UACd;AAAA,QACd,CAAA;AAGD,eAAA;AAAA,UAAO,SAAA,gCAAA,SAAA,mBAAA,eAAA;AAAA,UAC0B,cAAA,gCAAA,SAAA,mBAAA,SAAA,CAAA;AAAA,QACA;AAAA,MACjC;AAAA,MACD;AAAA,QACA,SAAA,OAAA;AAAA,UACiB,OAAA;AAAA,UACR,YAAA,CAAA;AAAA,QACM;AAAA,MACd;AAAA,IACD,CAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}