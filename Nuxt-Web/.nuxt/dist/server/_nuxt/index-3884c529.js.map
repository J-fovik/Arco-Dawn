{"version":3,"file":"index-3884c529.js","sources":["../../../../pages/college/index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"max-w-container mx-auto min-h-[70vh]\">\r\n\t\t<!-- 搜索框 -->\r\n\t\t<div class=\"flex items-center mt-[20px]\">\r\n\t\t\t<!-- 完全匹配 -->\r\n\t\t\t<div class=\"w-[150px]\">\r\n\t\t\t\t<a-button size=\"large\">\r\n\t\t\t\t\t<a-checkbox v-model=\"form.isMatch\" @change=\"resetData\"> 完全匹配 </a-checkbox>\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t\t<!-- 搜索你感兴趣的院校 -->\r\n\t\t\t<div class=\"w-full ml-[20px]\">\r\n\t\t\t\t<a-input\r\n\t\t\t\t\tv-model.trim=\"form.yxmc\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tclass=\"rounded-lg h-[38px]\"\r\n\t\t\t\t\tplaceholder=\"搜索你感兴趣的院校\"\r\n\t\t\t\t\tallow-clear\r\n\t\t\t\t\t@clear=\"resetData\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>\r\n\t\t\t\t\t\t<icon-search />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</a-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"w-[120px] ml-[20px]\">\r\n\t\t\t\t<a-button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tclass=\"openButton w-[120px]\"\r\n\t\t\t\t\t@click=\"resetData\"\r\n\t\t\t\t>\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 选择过滤 -->\r\n\t\t<zs-select-filter\r\n\t\t\t:data=\"filterData\"\r\n\t\t\t:default-values=\"form\"\r\n\t\t\t@change=\"changeFilter\"\r\n\t\t\tclass=\"mt-[20px]\"\r\n\t\t/>\r\n\r\n\t\t<!-- 学校列表 -->\r\n\t\t<div class=\"mt-[20px] flex flex-col\">\r\n\t\t\t<!-- 排序 -->\r\n\t\t\t<a-space class=\"h-[40px]\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"p-[5px_10px] border-solid border border-[#EDEDED] rounded cursor-pointer\"\r\n\t\t\t\t\t:class=\"{ 'bg-[#7C92FF] text-white': form.sort.startsWith('sf') }\"\r\n\t\t\t\t\t@click=\"toggleSort('sf')\"\r\n\t\t\t\t>\r\n\t\t\t\t\t省份\r\n\t\t\t\t\t<icon-arrow-rise v-if=\"form.sort === 'sf asc'\" />\r\n\t\t\t\t\t<icon-arrow-fall v-else />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"p-[5px_10px] border-solid border border-[#EDEDED] rounded cursor-pointer\"\r\n\t\t\t\t\t:class=\"{ 'bg-[#7C92FF] text-white': form.sort.startsWith('score') }\"\r\n\t\t\t\t\t@click=\"toggleSort('score')\"\r\n\t\t\t\t>\r\n\t\t\t\t\t录取分数\r\n\t\t\t\t\t<icon-arrow-rise v-if=\"form.sort === 'score asc'\" />\r\n\t\t\t\t\t<icon-arrow-fall v-else />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"p-[5px_10px] border-solid border border-[#EDEDED] rounded cursor-pointer\"\r\n\t\t\t\t\t:class=\"{ 'bg-[#7C92FF] text-white': form.sort.startsWith('strength') }\"\r\n\t\t\t\t\t@click=\"toggleSort('strength')\"\r\n\t\t\t\t>\r\n\t\t\t\t\t院校实力\r\n\t\t\t\t\t<icon-arrow-rise v-if=\"form.sort === 'strength asc'\" />\r\n\t\t\t\t\t<icon-arrow-fall v-else />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t共找到符合条件的院校\r\n\t\t\t\t\t<span class=\"text-[#FFA864]\">{{ turnThousandth(data.total) }}</span> 所\r\n\t\t\t\t</div>\r\n\t\t\t</a-space>\r\n\t\t\t<!-- 院校列表 -->\r\n\t\t\t<a-list class=\"list-border\" :bordered=\"false\" :loading=\"status === 'pending'\">\r\n\t\t\t\t<a-list-item v-for=\"school in data.schoolList\" :key=\"school.id\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\t\tnavigateTo(`/college/${school.id}`, {\r\n\t\t\t\t\t\t\t\topen: {\r\n\t\t\t\t\t\t\t\t\ttarget: '_blank',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<zs-school-list-meta :school=\"school\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-list-item>\r\n\t\t\t\t<template #empty>\r\n\t\t\t\t\t<zs-no-data-small />\r\n\t\t\t\t</template>\r\n\t\t\t</a-list>\r\n\t\t\t<!-- 分页 -->\r\n\t\t\t<a-pagination\r\n\t\t\t\tclass=\"justify-end mt-[20px]\"\r\n\t\t\t\t:total=\"data.total\"\r\n\t\t\t\t:current=\"pagination.current\"\r\n\t\t\t\t:page-size=\"pagination.pageSize\"\r\n\t\t\t\t@change=\"onPageChange\"\r\n\t\t\t\t@page-size-change=\"onPageSizeChange\"\r\n\t\t\t\tshow-total\r\n\t\t\t\tshow-jumper\r\n\t\t\t\tshow-page-size\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// 设置头信息\r\nuseHead({\r\n\ttitle: '查大学',\r\n});\r\n// 全局插件\r\nconst { $zsFetch } = useNuxtApp();\r\n// 网站信息\r\nconst { provinceCityList, getDictionValue } = useWebsiteInformation();\r\n// form\r\nconst { form } = useForm(() => ({\r\n\tlocation: [''],\r\n\ttype: '',\r\n\tcc: '',\r\n\tproperties: '',\r\n\tstrengthTags: '',\r\n\tfeaturesTags: '',\r\n\tsort: '',\r\n\tisMatch: false,\r\n\tyxmc: '',\r\n}));\r\n// 分页控制\r\nconst { pagination, resetData, onPageChange, onPageSizeChange } = usePagination(() => {\r\n\t// 滚动到顶部\r\n\twindow.scrollTo(0, 0);\r\n\t// 请求数据\r\n\trefresh();\r\n});\r\n// 数据列表\r\nconst filterData = ref([\r\n\t{\r\n\t\ttitle: '所在地区',\r\n\t\tkey: 'location',\r\n\t\tisShow: true,\r\n\t\tmultiple: true,\r\n\t\toptions: [...NO_LIMIT_OPTIONS, ...provinceCityList.value],\r\n\t},\r\n\t{\r\n\t\ttitle: '院校类型',\r\n\t\tkey: 'type',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: [...NO_LIMIT_OPTIONS, ...getDictionValue('YXLX')],\r\n\t},\r\n\t{\r\n\t\ttitle: '院校层次',\r\n\t\tkey: 'cc',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: [...NO_LIMIT_OPTIONS, ...getDictionValue('BXCC')],\r\n\t},\r\n\t{\r\n\t\ttitle: '办学性质',\r\n\t\tkey: 'properties',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: [...NO_LIMIT_OPTIONS, ...getDictionValue('BXXZ')],\r\n\t},\r\n\t{\r\n\t\ttitle: '实力标签',\r\n\t\tkey: 'strengthTags',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\tisCollapse: true,\r\n\t\toptions: [...NO_LIMIT_OPTIONS, ...getDictionValue('SLBQ')],\r\n\t},\r\n\t{\r\n\t\ttitle: '特色标签',\r\n\t\tkey: 'featuresTags',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\tisCollapse: true,\r\n\t\toptions: [...NO_LIMIT_OPTIONS, ...getDictionValue('TSBQ')],\r\n\t},\r\n]);\r\n// 设置排序值\r\nconst toggleSort = (key: any) => {\r\n\t// 根据当前的排序状态来更新排序\r\n\tif (form.value.sort === `${key} desc`) {\r\n\t\tform.value.sort = `${key} asc`; // 从降序切换到升序\r\n\t} else if (form.value.sort === `${key} asc`) {\r\n\t\tform.value.sort = ''; // 从升序切换到无排序\r\n\t} else {\r\n\t\tform.value.sort = `${key} desc`; // 从无排序切换到降序\r\n\t}\r\n\t// 请求数据\r\n\tresetData();\r\n};\r\n// change事件\r\nconst changeFilter = (val: any) => {\r\n\tform.value = {\r\n\t\t...form.value,\r\n\t\t...val,\r\n\t};\r\n\t// 请求数据\r\n\tresetData();\r\n};\r\n// 服务端请求院校列表\r\nconst { data, status, refresh } = await useAsyncData(\r\n\t'collegeList',\r\n\tasync () => {\r\n\t\tconst [err, res] = await $zsFetch(API_URLS.COLLEGE.GET_COLLEGE_LIST, {\r\n\t\t\tbody: {\r\n\t\t\t\t...form.value,\r\n\t\t\t\tisMatch: form.value.isMatch ? '1' : '0',\r\n\t\t\t\tlocation: form.value.location.join('/'),\r\n\t\t\t\tcurrentPage: pagination.value.current,\r\n\t\t\t\tpageSize: pagination.value.pageSize,\r\n\t\t\t\tpagingOrNot: 1,\r\n\t\t\t},\r\n\t\t});\r\n\t\t// 返回数据\r\n\t\treturn {\r\n\t\t\ttotal: res?.data?.totalCount ?? 0,\r\n\t\t\tschoolList: res?.data?.list ?? [],\r\n\t\t};\r\n\t},\r\n\t{\r\n\t\tdefault: () => ({\r\n\t\t\ttotal: 0,\r\n\t\t\tschoolList: [],\r\n\t\t}),\r\n\t}\r\n);\r\n</script>\r\n<style scoped>\r\n.list-border {\r\n\tborder-bottom: 1px solid var(--color-neutral-3);\r\n\tborder-top: 1px solid var(--color-neutral-3);\r\n}\r\n.openButton {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n.openButton:hover {\r\n\tbackground: #7c92ff;\r\n\tcolor: white;\r\n\tborder-radius: 4px;\r\n}\r\n</style>\r\n"],"names":["_withAsyncContext"],"mappings":"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"}