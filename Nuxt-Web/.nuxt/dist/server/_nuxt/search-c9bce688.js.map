{"version":3,"file":"search-c9bce688.js","sources":["../../../../pages/jobLibrary/search.vue"],"sourcesContent":["<template>\r\n\t<div class=\"max-w-container mx-auto min-h-[70vh]\">\r\n\t\t<!-- 搜索框 -->\r\n\t\t<div class=\"flex items-center mt-[20px]\">\r\n\t\t\t<!-- 完全匹配 -->\r\n\t\t\t<div class=\"w-[150px]\">\r\n\t\t\t\t<a-button size=\"large\">\r\n\t\t\t\t\t<a-checkbox v-model=\"form.isMatch\" @change=\"resetData\"> 完全匹配 </a-checkbox>\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t\t<!-- 搜索你感兴趣的职业 -->\r\n\t\t\t<div class=\"w-full ml-[20px]\">\r\n\t\t\t\t<a-input\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tv-model.trim=\"form.professionName\"\r\n\t\t\t\t\tclass=\"rounded-lg h-[38px]\"\r\n\t\t\t\t\tplaceholder=\"搜索你感兴趣的职业\"\r\n\t\t\t\t\t@clear=\"resetData\"\r\n\t\t\t\t\tallow-clear\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>\r\n\t\t\t\t\t\t<icon-search />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</a-input>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"w-[120px] ml-[20px]\">\r\n\t\t\t\t<a-button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tclass=\"openButton w-[120px]\"\r\n\t\t\t\t\t@click=\"resetData\"\r\n\t\t\t\t>\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</a-button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<a-table\r\n\t\t\tclass=\"mt-[20px] cursor-pointer\"\r\n\t\t\ttable-layout-fixed\r\n\t\t\t:columns=\"columns\"\r\n\t\t\t:data=\"data\"\r\n\t\t\t:bordered=\"{ wrapper: true, cell: true }\"\r\n\t\t\t:pagination=\"pagination\"\r\n\t\t\t@row-click=\"cellClick\"\r\n\t\t\t@page-change=\"onPageChange\"\r\n\t\t\t@page-size-change=\"onPageSizeChange\"\r\n\t\t\t:loading=\"loading\"\r\n\t\t/>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// 设置头信息\r\nuseHead({\r\n\ttitle: '职业库',\r\n});\r\n// 路由信息\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\n// 全局插件\r\nconst { $zsFetch } = useNuxtApp();\r\n// loading\r\nconst [loading, setLoading] = useBasicsState(false);\r\n// form\r\nconst { form } = useForm(() => ({\r\n\tisMatch: false,\r\n\tprofessionName: (route.query.keyword ?? '') as string,\r\n}));\r\n\r\n// 分页控制\r\nconst { pagination, resetData, onPageChange, onPageSizeChange } = usePagination(() => {\r\n\t// 滚动到顶部\r\n\twindow.scrollTo(0, 100);\r\n\t// 路由重定向\r\n\trouter.replace({\r\n\t\tquery: { ...route.query, keyword: form.value.professionName },\r\n\t});\r\n\t// 请求数据\r\n\tinitJobList();\r\n});\r\n// 列数据\r\nconst columns = [\r\n\t{\r\n\t\ttitle: '职业名称',\r\n\t\tdataIndex: 'levelName',\r\n\t\talign: 'center',\r\n\t\tellipsis: true,\r\n\t\ttooltip: true,\r\n\t\tcellStyle: {\r\n\t\t\ttextDecorationLine: 'underline',\r\n\t\t},\r\n\t\theaderCellStyle: {\r\n\t\t\tfontSize: '14px',\r\n\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\tfontWeight: 'bold',\r\n\t\t\ttextDecorationLine: 'none',\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\ttitle: '所属大类',\r\n\t\tdataIndex: 'level1Name',\r\n\t\talign: 'center',\r\n\t\tellipsis: true,\r\n\t\ttooltip: true,\r\n\t\theaderCellStyle: {\r\n\t\t\tfontSize: '14px',\r\n\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\tfontWeight: 'bold',\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\ttitle: '所属中类',\r\n\t\tdataIndex: 'level2Name',\r\n\t\talign: 'center',\r\n\t\tellipsis: true,\r\n\t\ttooltip: true,\r\n\t\theaderCellStyle: {\r\n\t\t\tfontSize: '14px',\r\n\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\tfontWeight: 'bold',\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\ttitle: '所属小类',\r\n\t\tdataIndex: 'level3Name',\r\n\t\talign: 'center',\r\n\t\tellipsis: true,\r\n\t\ttooltip: true,\r\n\t\theaderCellStyle: {\r\n\t\t\tfontSize: '14px',\r\n\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\tfontWeight: 'bold',\r\n\t\t},\r\n\t},\r\n] as any;\r\n\r\n// 点击单元格时触发\r\nconst cellClick = (record: any) => {\r\n\tnavigateTo(`/jobLibrary/${record.id}`);\r\n};\r\n// 表格数据\r\nconst data = ref([] as any);\r\n// 获取职业列表\r\nconst initJobList = async () => {\r\n\t// 开启Loading\r\n\tsetLoading(true);\r\n\tconst [err, res] = await $zsFetch(API_URLS.MORE.GET_PROFESSION_FILTERING, {\r\n\t\tbody: {\r\n\t\t\tprofessionName: form.value.professionName,\r\n\t\t\tisMatch: form.value.isMatch ? '1' : '0',\r\n\t\t\tcurrentPage: pagination.value.current,\r\n\t\t\tpageSize: pagination.value.pageSize,\r\n\t\t\tpagingOrNot: 1,\r\n\t\t},\r\n\t});\r\n\t// 处理错误\r\n\tif (err) return setLoading(false);\r\n\t// 关闭Loading\r\n\tsetLoading(false);\r\n\t// 赋值总页码\r\n\tpagination.value.total = res.data.totalCount;\r\n\t// 赋值数据\r\n\tdata.value = res.data.list;\r\n};\r\ninitJobList();\r\n</script>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,YAAA;AAAA,MAAQ,OAAA;AAAA,IACA,CAAA;AAGR,UAAA,QAAA;AACA,UAAA,SAAA;AAGA,UAAA,EAAA,aAAA;AAEA,UAAA,CAAA,SAAA,UAAA,IAAA,eAAA,KAAA;AAEA,UAAA,EAAA,SAAA,QAAA,OAAA;AAAA,MAAgC,SAAA;AAAA,MACtB,gBAAA,MAAA,MAAA,WAAA;AAAA,IAC+B,EAAA;AAIzC,UAAA,EAAA,YAAA,WAAA,cAAA,iBAAA,IAAA,cAAA,MAAA;AAEC,aAAA,SAAA,GAAA,GAAA;AAEA,aAAA,QAAA;AAAA,QAAe,OAAA,EAAA,GAAA,MAAA,OAAA,SAAA,KAAA,MAAA,eAAA;AAAA,MAC8C,CAAA;AAG7D;IAAY,CAAA;AAGb,UAAA,UAAA;AAAA,MAAgB;AAAA,QACf,OAAA;AAAA,QACQ,WAAA;AAAA,QACI,OAAA;AAAA,QACJ,UAAA;AAAA,QACG,SAAA;AAAA,QACD,WAAA;AAAA,UACE,oBAAA;AAAA,QACU;AAAA,QACrB,iBAAA;AAAA,UACiB,UAAA;AAAA,UACN,iBAAA;AAAA,UACO,YAAA;AAAA,UACL,oBAAA;AAAA,QACQ;AAAA,MACrB;AAAA,MACD;AAAA,QACA,OAAA;AAAA,QACQ,WAAA;AAAA,QACI,OAAA;AAAA,QACJ,UAAA;AAAA,QACG,SAAA;AAAA,QACD,iBAAA;AAAA,UACQ,UAAA;AAAA,UACN,iBAAA;AAAA,UACO,YAAA;AAAA,QACL;AAAA,MACb;AAAA,MACD;AAAA,QACA,OAAA;AAAA,QACQ,WAAA;AAAA,QACI,OAAA;AAAA,QACJ,UAAA;AAAA,QACG,SAAA;AAAA,QACD,iBAAA;AAAA,UACQ,UAAA;AAAA,UACN,iBAAA;AAAA,UACO,YAAA;AAAA,QACL;AAAA,MACb;AAAA,MACD;AAAA,QACA,OAAA;AAAA,QACQ,WAAA;AAAA,QACI,OAAA;AAAA,QACJ,UAAA;AAAA,QACG,SAAA;AAAA,QACD,iBAAA;AAAA,UACQ,UAAA;AAAA,UACN,iBAAA;AAAA,UACO,YAAA;AAAA,QACL;AAAA,MACb;AAAA,IACD;AAID,UAAA,YAAA,CAAA,WAAA;AACC,iBAAA,eAAA,OAAA,EAAA,EAAA;AAAA,IAAqC;AAGtC,UAAA,OAAA,IAAA,CAAA,CAAA;AAEA,UAAA,cAAA,YAAA;AAEC,iBAAA,IAAA;AACA,YAAA,CAAA,KAAA,GAAA,IAAA,MAAA,SAAA,SAAA,KAAA,0BAAA;AAAA,QAA0E,MAAA;AAAA,UACnE,gBAAA,KAAA,MAAA;AAAA,UACsB,SAAA,KAAA,MAAA,UAAA,MAAA;AAAA,UACS,aAAA,WAAA,MAAA;AAAA,UACN,UAAA,WAAA,MAAA;AAAA,UACH,aAAA;AAAA,QACd;AAAA,MACd,CAAA;AAGD,UAAA;AAAS,eAAA,WAAA,KAAA;AAET,iBAAA,KAAA;AAEA,iBAAA,MAAA,QAAA,IAAA,KAAA;AAEA,WAAA,QAAA,IAAA,KAAA;AAAA,IAAsB;AAEvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}