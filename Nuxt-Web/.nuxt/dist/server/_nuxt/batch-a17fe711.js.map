{"version":3,"file":"batch-a17fe711.js","sources":["../../../../pages/batch.vue"],"sourcesContent":["<template>\r\n\t<div class=\"max-w-container mx-auto min-h-[60vh]\">\r\n\t\t<!-- 选择过滤 -->\r\n\t\t<zs-select-filter\r\n\t\t\t:data=\"[sfData, nfData, klData, pcData]\"\r\n\t\t\t:default-values=\"{\r\n\t\t\t\tsf: sfData?.sf,\r\n\t\t\t\tnf: nfData?.nf,\r\n\t\t\t\tkl: klData?.kl,\r\n\t\t\t\tpc: pcData?.pc,\r\n\t\t\t}\"\r\n\t\t\t@change=\"changeFilter\"\r\n\t\t\tclass=\"mt-[20px]\"\r\n\t\t/>\r\n\t\t<a-table\r\n\t\t\tclass=\"mt-[20px] cursor-pointer\"\r\n\t\t\ttable-layout-fixed\r\n\t\t\t:columns=\"createTableColumns()\"\r\n\t\t\t:data=\"batchData\"\r\n\t\t\t:bordered=\"{ wrapper: true, cell: true }\"\r\n\t\t\t:loading=\"status === 'pending'\"\r\n\t\t>\r\n\t\t\t<template #score=\"{ record }\">\r\n\t\t\t\t<div class=\"text-right\">{{ textFormat(record.score) }}</div>\r\n\t\t\t</template>\r\n\t\t\t<template #wc=\"{ record }\">\r\n\t\t\t\t<div class=\"text-right\">{{ textFormat(turnThousandth(record.wc)) }}</div>\r\n\t\t\t</template>\r\n\t\t</a-table>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// 设置头信息\r\nuseHead({\r\n\ttitle: '批次查询',\r\n});\r\n// 全局插件\r\nconst { $zsFetch } = useNuxtApp();\r\n// 用户信息\r\nconst { userInfo } = useUser();\r\n// 网站信息\r\nconst { provinceList } = useWebsiteInformation();\r\n// 列属性\r\nconst createTableColumns = (): TableCustomColumnData[] => {\r\n\treturn [\r\n\t\t{\r\n\t\t\ttitle: '地区',\r\n\t\t\tdataIndex: 'sf',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 120,\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\t\tcolor: '#333333',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '年份',\r\n\t\t\tdataIndex: 'nf',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 120,\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\t\tcolor: '#333333',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '考生类别',\r\n\t\t\tdataIndex: 'kl',\r\n\t\t\twidth: 120,\r\n\t\t\talign: 'center',\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\t\tcolor: '#333333',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '录取批次',\r\n\t\t\tdataIndex: 'pc',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 120,\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\t\tcolor: '#333333',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t\trender: ({ record }) => {\r\n\t\t\t\treturn textFormat(record.pc);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '分数线',\r\n\t\t\tdataIndex: 'score',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 120,\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\t\tcolor: '#333333',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t\tslotName: 'score',\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '位次',\r\n\t\t\tdataIndex: 'wc',\r\n\t\t\talign: 'center',\r\n\t\t\twidth: 120,\r\n\t\t\theaderCellStyle: {\r\n\t\t\t\tfontSize: '14px',\r\n\t\t\t\tbackgroundColor: '#EDEDED',\r\n\t\t\t\tcolor: '#333333',\r\n\t\t\t\tfontWeight: 'bold',\r\n\t\t\t},\r\n\t\t\tslotName: 'wc',\r\n\t\t},\r\n\t];\r\n};\r\n// change事件\r\nconst changeFilter = async (val: any) => {\r\n\t// 切换省份\r\n\tif (val.sf !== sfData.value!.sf) {\r\n\t\t// 赋值省份，清空年份、科类、批次\r\n\t\tsfData.value!.sf = val.sf;\r\n\t\tnfData.value!.nf = '';\r\n\t\tklData.value!.kl = '';\r\n\t\tpcData.value!.pc = '';\r\n\t\t// 查询年份、科类、批次\r\n\t\tawait refreshNfData();\r\n\t\tawait refreshKlData();\r\n\t\tawait refreshPcData();\r\n\t}\r\n\t// 切换年份\r\n\tif (val.nf !== nfData.value!.nf) {\r\n\t\t// 赋值年份，清空科类、批次\r\n\t\tnfData.value!.nf = val.nf;\r\n\t\tklData.value!.kl = '';\r\n\t\tpcData.value!.pc = '';\r\n\t\t// 查询科类、批次\r\n\t\tawait refreshKlData();\r\n\t\tawait refreshPcData();\r\n\t}\r\n\t// 切换选科\r\n\tif (val.kl !== klData.value!.kl) {\r\n\t\tklData.value!.kl = val.kl;\r\n\t}\r\n\t// 切换批次\r\n\tif (val.pc !== pcData.value!.pc) {\r\n\t\tpcData.value!.pc = val.pc;\r\n\t}\r\n\t// 查询列表\r\n\trefreshBatchData();\r\n};\r\n// 获取省份数据;\r\nconst { data: sfData } = await useAsyncData('sfList', async () => {\r\n\t// 暴露数据\r\n\tconst sfList = provinceList.value.map((o: any) => {\r\n\t\treturn {\r\n\t\t\t...o,\r\n\t\t\tvalue: o.sf,\r\n\t\t\tlabel: o.sf,\r\n\t\t};\r\n\t});\r\n\treturn {\r\n\t\ttitle: '所在地区',\r\n\t\tkey: 'sf',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: sfList,\r\n\t\tsf: userInfo.value.province,\r\n\t};\r\n});\r\n// 获取年份数据\r\nconst { data: nfData, refresh: refreshNfData } = await useAsyncData('nfList', async () => {\r\n\tconst [err, res] = await $zsFetch(API_URLS.MORE.GET_PCX_NF, {\r\n\t\tbody: {\r\n\t\t\tsf: sfData.value!.sf,\r\n\t\t},\r\n\t});\r\n\t// 处理数据\r\n\tconst nfList =\r\n\t\tres?.data?.map((o: any) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: o.nf,\r\n\t\t\t\tlabel: o.nf,\r\n\t\t\t};\r\n\t\t}) ?? [];\r\n\t// 暴露数据\r\n\treturn {\r\n\t\ttitle: '录取年份',\r\n\t\tkey: 'nf',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: nfList,\r\n\t\tnf: nfList[0]?.value ?? '',\r\n\t};\r\n});\r\n// 获取科类数据\r\nconst { data: klData, refresh: refreshKlData } = await useAsyncData('klList', async () => {\r\n\tconst [err, res] = await $zsFetch(API_URLS.MORE.GET_PCX_KL, {\r\n\t\tbody: {\r\n\t\t\tsf: sfData.value!.sf,\r\n\t\t\tnf: nfData.value!.nf,\r\n\t\t},\r\n\t});\r\n\t// 处理数据\r\n\tconst klList =\r\n\t\tres?.data?.map((o: any) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: o.kl,\r\n\t\t\t\tlabel: o.kl,\r\n\t\t\t};\r\n\t\t}) ?? [];\r\n\t// 暴露数据\r\n\treturn {\r\n\t\ttitle: '考生类别',\r\n\t\tkey: 'kl',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: [...ALL_OPTIONS, ...klList],\r\n\t\tkl: '',\r\n\t};\r\n});\r\n// 获取批次数据\r\nconst { data: pcData, refresh: refreshPcData } = await useAsyncData('pcList', async () => {\r\n\tconst [err, res] = await $zsFetch(API_URLS.MORE.GET_PCX_PC, {\r\n\t\tbody: {\r\n\t\t\tsf: sfData.value!.sf,\r\n\t\t\tnf: nfData.value!.nf,\r\n\t\t},\r\n\t});\r\n\t// 处理数据\r\n\tconst pcList =\r\n\t\tres?.data?.map((o: any) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: o.pc,\r\n\t\t\t\tlabel: o.pc,\r\n\t\t\t};\r\n\t\t}) ?? [];\r\n\t// 暴露数据\r\n\treturn {\r\n\t\ttitle: '录取批次',\r\n\t\tkey: 'pc',\r\n\t\tisShow: true,\r\n\t\tmultiple: false,\r\n\t\toptions: [...ALL_OPTIONS, ...pcList],\r\n\t\tpc: '',\r\n\t};\r\n});\r\n// 获取批次线列表\r\nconst {\r\n\tdata: batchData,\r\n\tstatus,\r\n\trefresh: refreshBatchData,\r\n} = await useAsyncData('batchList', async () => {\r\n\tconst [err, res] = await $zsFetch(API_URLS.MORE.GET_PCX_PC_LIST, {\r\n\t\tbody: {\r\n\t\t\tsf: sfData.value!.sf,\r\n\t\t\tnf: nfData.value!.nf,\r\n\t\t\tkl: klData.value!.kl,\r\n\t\t\tpc: pcData.value!.pc,\r\n\t\t},\r\n\t});\r\n\t// 暴露数据\r\n\treturn res?.data ?? [];\r\n});\r\n</script>\r\n"],"names":["_withAsyncContext"],"mappings":"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"}