import{B as D,S as R,r as H,_ as A,a as ie,g as ce,b as de,h as _e,J as z,aw as pe,ac as G,aa as me,ab as fe,A as q,a2 as ve,F as be,G as Se,z as ge,C as xe,x as Ce,m as Ie,w as Oe,q as ke,f as je}from"./entry.1a40d7cc.js";import{m as J,D as i,P as f,M as s,Q as u,L as o,_ as v,aa as K,ab as W,p as Le,u as l,E as C,O as h,G as w,R as y,N as I,I as V,a9 as Ee}from"./swiper-vue.1d76a0fa.js";const F=c=>(K("data-v-96e9f0ee"),c=c(),W(),c),Ne={class:"bg-white p-[0px_30px] rounded-[5px_5px] w-[480px]"},Te=F(()=>u("div",{class:"flex justify-between items-center cursor-pointer mb-[20px]"},[u("div",{class:"text-[24px] font-bold"},"提示")],-1)),he=F(()=>u("div",{class:"f-c-c"},[u("i",{class:"iconfont icon-dengpaotishi text-[#FFA864] fontSize"})],-1)),we=F(()=>u("div",{class:"text-[16px] leading-[22px]"}," 是否同步成绩到当前志愿表，分数改变后之前填报计划录取概率会相应改变 ， 如科目改变将清空已选志愿，请确认继续操作? ",-1)),ye={class:"flex justify-end items-center mt-[20px]"},Ve=J({__name:"index",emits:["cancel","success"],setup(c,{emit:O}){return(p,d)=>{const r=D,k=R,j=H;return i(),f(j,{title:"","align-center":"",onCancel:d[2]||(d[2]=b=>p.$emit("cancel"))},{default:s(()=>[u("div",Ne,[Te,he,we,u("div",ye,[o(k,null,{default:s(()=>[o(r,{size:"large",class:"cancel",onClick:d[0]||(d[0]=b=>p.$emit("cancel"))},{default:s(()=>[v("取消")]),_:1}),o(r,{size:"large",class:"submit",onClick:d[1]||(d[1]=b=>p.$emit("success"))},{default:s(()=>[v("确定")]),_:1})]),_:1})])])]),_:1})}}});const Fe=A(Ve,[["__scopeId","data-v-96e9f0ee"]]),P=c=>(K("data-v-bf0d1591"),c=c(),W(),c),Pe={class:"bg-white p-[0px_30px] rounded-[5px_5px] w-[850px]"},$e=P(()=>u("div",{class:"flex justify-between items-center cursor-pointer mb-[30px]"},[u("div",{class:"text-[24px] font-bold"},"设置成绩")],-1)),Ue=P(()=>u("div",null,"分",-1)),Be=P(()=>u("div",null,"位",-1)),ze={class:"flex justify-center items-center mt-[30px]"},Ge=J({__name:"index",props:{data:{default:()=>{}},isRequest:{type:Boolean,default:!1}},emits:["cancel","success"],setup(c,{emit:O}){const p=c,{$zsFetch:d,$zsMsg:r}=je(),{userInfo:k}=ie(),[j,b]=ce(!1),{provinceList:L}=de(),{form:e,formRef:$}=_e(()=>{var t;return{...p.data,uType:!0,subjectList:[],firstSubjectList:[],secondSubjectList:[],gkms:(t=z(L.value,k.value.province))==null?void 0:t.gkms,isSure:!1}});if(p.data.score){const t=p.data.xk.split("/"),a=e.value.gkms==="3+1+2"&&["物","史"].includes(t[0]);e.value={...e.value,subjectList:a?[]:t,firstSubjectList:a?[t[0]]:[],secondSubjectList:a?[...t.slice(1,3)]:[]}}const M=Le(()=>!e.value.wc),Y={province:{required:!0,message:"请选择高考省份"},gkYear:{required:!0,message:"请选择高考年份"},score:{required:!0,message:"请输入分数"}},Q=t=>{var a;e.value.gkms=(a=z(L.value,t))==null?void 0:a.gkms,e.value.subjectList=[],e.value.firstSubjectList=[],e.value.secondSubjectList=[],e.value.score=void 0,e.value.wc=void 0},X=()=>{e.value.subjectList.length===3&&e.value.score&&x()},Z=()=>{e.value.score=void 0,e.value.wc=void 0,e.value.firstSubjectList.length===1&&e.value.secondSubjectList.length===2&&e.value.score&&x()},ee=()=>{e.value.secondSubjectList.length===2&&e.value.score&&x()},te=t=>{e.value.score=t,e.value.wc=void 0,t>100&&x()},x=async()=>{const t=e.value.gkms==="3+3"?e.value.subjectList:[...e.value.firstSubjectList,...e.value.secondSubjectList];if(!e.value.province)return r("error","请选择省份");if(["3+1+2","3+3"].includes(e.value.gkms)&&t.length!=3)return r("error","请选择对应数量科目");if(!e.value.score)return r("error","请输入分数");const[a,S]=await d(q.PUBLIC.GET_WC,{method:"POST",body:{score:e.value.score,province:e.value.province,xk:t.join("/")}});a||(e.value.wc=S.data??"")},U=()=>{$.value.validate(t=>{if(!t){if(e.value.gkms==="3+3"&&e.value.subjectList.length!==3||e.value.gkms==="3+1+2"&&(e.value.firstSubjectList.length!==1||e.value.secondSubjectList.length!==2))return r("error","请选择对应数量科目");if(!e.value.wc)return r("error","未查询到对应位次");p.isRequest?e.value.isSure=!0:(r("success","保存成功"),O("success",e.value))}})},se=async()=>{b(!0);const t=e.value,a=t.gkms==="3+3"?t.subjectList:[...t.firstSubjectList,...t.secondSubjectList],[S,_]=await d(q.CHOICE.CHANGE_WISH_INFO,{method:"POST",body:{id:e.value.id,score:t.score,wc:t.wc,xk:a.join("/")}});if(S)return b(!1);r("success","保存成功"),b(!1),O("success",e.value)};return(t,a)=>{const S=ve,_=be,m=Se,ae=ge,E=R,N=xe,T=Ce,B=Ie,oe=Oe,le=ke,ne=D,ue=Fe,re=H;return i(),f(re,{title:"","align-center":"",onCancel:a[10]||(a[10]=n=>t.$emit("cancel"))},{default:s(()=>[u("div",Pe,[$e,o(le,{ref_key:"formRef",ref:$,model:l(e),"label-align":"right",size:"large","auto-label-width":"",rules:Y,onKeyup:Ee(U,["enter"])},{default:s(()=>[o(oe,{cols:2,colGap:12,rowGap:12},{default:s(()=>[o(m,null,{default:s(()=>[o(_,{label:"高考省份:",field:"province","validate-trigger":["blur"]},{default:s(()=>[o(S,{modelValue:l(e).province,"onUpdate:modelValue":a[0]||(a[0]=n=>l(e).province=n),placeholder:"请选择高考省份","allow-clear":"",disabled:"",options:l(L),onChange:Q},null,8,["modelValue","options"])]),_:1})]),_:1}),o(m,null,{default:s(()=>[o(_,{label:"高考年份:",field:"gkYear","validate-trigger":["blur"]},{default:s(()=>[o(S,{modelValue:l(e).gkYear,"onUpdate:modelValue":a[1]||(a[1]=n=>l(e).gkYear=n),placeholder:"请选择高考年份","allow-clear":"",disabled:"",options:("GK_DATE_OPTIONS"in t?t.GK_DATE_OPTIONS:l(pe))()},null,8,["modelValue","options"])]),_:1})]),_:1}),o(m,{span:24},{default:s(()=>[o(_,{label:"考试类型:",required:""},{default:s(()=>[o(ae,{modelValue:l(e).uType,"onUpdate:modelValue":a[2]||(a[2]=n=>l(e).uType=n)},{default:s(()=>[v("普通类")]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(e).gkms==="3+3"?(i(),f(m,{key:0,span:24},{default:s(()=>[o(_,{label:"选择科目(6选3):",required:""},{default:s(()=>[o(T,{max:3,modelValue:l(e).subjectList,"onUpdate:modelValue":a[3]||(a[3]=n=>l(e).subjectList=n),onChange:X},{default:s(()=>[(i(!0),C(I,null,h(l(e).province==="浙江"?"SUBJECT_OPTIONS"in t?t.SUBJECT_OPTIONS:l(G):("SUBJECT_OPTIONS"in t?t.SUBJECT_OPTIONS:l(G)).slice(0,6),n=>(i(),f(N,{key:n.value,value:n.value},{checkbox:s(({checked:g})=>[o(E,{align:"start",class:w(["rounded-[4px] p-[10px_20px] text-center border",{"border-[#1677ff] bg-[#F2F5FF]":g}])},{default:s(()=>[v(y(n.label),1)]),_:2},1032,["class"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):V("",!0),l(e).gkms==="3+1+2"?(i(),C(I,{key:1},[o(m,{span:24},{default:s(()=>[o(_,{label:"首选科目(2选1):",required:""},{default:s(()=>[o(T,{max:1,modelValue:l(e).firstSubjectList,"onUpdate:modelValue":a[4]||(a[4]=n=>l(e).firstSubjectList=n),onChange:Z},{default:s(()=>[(i(!0),C(I,null,h("FIRST_CHOICE_SCIENCES_OPTIONS"in t?t.FIRST_CHOICE_SCIENCES_OPTIONS:l(me),n=>(i(),f(N,{key:n.value,value:n.value},{checkbox:s(({checked:g})=>[o(E,{align:"start",class:w(["rounded-[4px] p-[10px_20px] text-center border",{"border-[#1677ff] bg-[#F2F5FF]":g}])},{default:s(()=>[v(y(n.label),1)]),_:2},1032,["class"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(m,{span:24},{default:s(()=>[o(_,{label:"次选科目(4选2):",required:""},{default:s(()=>[o(T,{max:2,modelValue:l(e).secondSubjectList,"onUpdate:modelValue":a[5]||(a[5]=n=>l(e).secondSubjectList=n),onChange:ee},{default:s(()=>[(i(!0),C(I,null,h("SECOND_CHOICE_SCIENCES_OPTIONS"in t?t.SECOND_CHOICE_SCIENCES_OPTIONS:l(fe),n=>(i(),f(N,{key:n.value,value:n.value},{checkbox:s(({checked:g})=>[o(E,{align:"start",class:w(["rounded-[4px] p-[10px_20px] text-center border",{"border-[#1677ff] bg-[#F2F5FF]":g}])},{default:s(()=>[v(y(n.label),1)]),_:2},1032,["class"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})],64)):V("",!0),o(m,null,{default:s(()=>[o(_,{label:"高考分数:",field:"score","validate-trigger":["input"]},{default:s(()=>[o(B,{modelValue:l(e).score,"onUpdate:modelValue":a[6]||(a[6]=n=>l(e).score=n),modelModifiers:{trim:!0},precision:0,min:0,max:750,"hide-button":"","allow-clear":"",placeholder:"请输入高考分数",onInput:te},{append:s(()=>[Ue]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(m,null,{default:s(()=>[o(_,{label:"省排名:",required:""},{default:s(()=>[o(B,{modelValue:l(e).wc,"onUpdate:modelValue":a[7]||(a[7]=n=>l(e).wc=n),modelModifiers:{trim:!0},readonly:"","hide-button":"",placeholder:"预估位次（自动换算）"},{append:s(()=>[Be]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","onKeyup"]),u("div",ze,[o(ne,{size:"large",class:"submit",onClick:U,disabled:l(M),loading:l(j)},{default:s(()=>[v("确定修改")]),_:1},8,["disabled","loading"])])]),l(e).isSure?(i(),f(ue,{key:0,onSuccess:a[8]||(a[8]=()=>{l(e).isSure=!1,se()}),onCancel:a[9]||(a[9]=n=>l(e).isSure=!1)})):V("",!0)]),_:1})}}});const Re=A(Ge,[["__scopeId","data-v-bf0d1591"]]);export{Re as _};
