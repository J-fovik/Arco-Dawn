import{_ as Z}from"./index.vue.bf4eae92.js";import{u as ee,a as te,b as ae,h as ne,t as h,e as p,c as v,A as b,p as oe,B as se,f as re,s as le,_ as ie}from"./entry.1a40d7cc.js";import{_ as ce}from"./index.vue.c1324be8.js";import{_ as ue,L as de}from"./index.vue.d7eeb65e.js";import{T as fe}from"./index.112674ac.js";import"./index.a57cdc53.js";/* empty css              */import{u as pe}from"./usePagination.9cd68578.js";import{m as me,p as _e,ad as g,D as w,E as F,L as m,u as a,Q as c,M as V,R as y,N as he,O as ve,I as ge,_ as ye,aa as xe,ab as ke}from"./swiper-vue.1d76a0fa.js";import"./index.1286ba2d.js";import"./index.30d5eb30.js";const Se=x=>(xe("data-v-81235bd2"),x=x(),ke(),x),Ie={class:"max-w-container mx-auto"},be={class:"flex items-center mt-[20px]"},we={class:"w-[400px]"},Fe={class:"w-[120px] ml-[20px]"},Le={class:"bg-[#FFF7F0] p-[15px_20px] text-[#FFA864] mt-[10px] rounded-[4px]"},Ce={class:"my-[5px]"},De={class:"h-[350px] border-solid border border-[#EDEDED] rounded-[4px] mt-[10px]"},Ee={key:0,class:"mt-[20px]"},Te=Se(()=>c("div",{class:"mb-[10px]"},"历史同位次考生得分",-1)),ze=me({__name:"rank",async setup(x){let o,l;ee({title:"位次查询"});const{$zsFetch:k}=re(),{userInfo:C}=te(),{provinceList:O}=ae(),{form:n}=ne(()=>({sf:C.value.province,nf:"",kl:"",lineChart:[],lineInfo:{},score:"",scoreSearchInfo:{}})),{pagination:L,resetData:B,onPageChange:G,onPageSizeChange:K}=pe(()=>{window.scrollTo(0,0),Q()}),M=_e(()=>({tooltip:{trigger:"axis",formatter:e=>{var i;let t,s,r=!1;return n.value.lineInfo=S.value.find(_=>_.score==e[0].axisValueLabel),(i=n.value.lineInfo)!=null&&i.historyList&&n.value.lineInfo.historyList.length>0&&(r=!0,s=n.value.lineInfo.historyList.map(_=>`<span style="margin-right:10px">${_.score}(${_.nf})</span>`).join("")),t=` <div style="background:white;padding:10px">
									<div>高考分数：${n.value.lineInfo.score}分</div>
									${n.value.lineInfo.pc?`<div>${n.value.lineInfo.pc}：${n.value.lineInfo.pcx}分 </div>`:""}
									<div>同分人数：${p(n.value.lineInfo.cnt)}名 </div>
									<div>排名区间：${p(n.value.lineInfo.wcRange.split("-")[0]+"-"+p(n.value.lineInfo.wcRange.split("-")[1]))}名 </div>
									 ${r?`<div>历史同位次考生得分：</div> ${s}`:""}

								</div>
								`,t}},title:{left:"center"},xAxis:{type:"category",boundaryGap:!1,name:"分数",nameLocation:"end",nameTextStyle:{color:"#333",fontSize:14},data:S.value.map(e=>e.score)},yAxis:{type:"value",name:"人数",nameLocation:"end",nameTextStyle:{color:"#333",fontSize:14},axisLabel:{show:!0,formatter:function(e){return p(e)}}},series:[{type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"#FFA864"},areaStyle:{color:new de(0,0,0,1,[{offset:0,color:"#FFF2E7"},{offset:1,color:"#FFFFFF"}])},data:S.value.map(e=>e.cnt)}]})),W=()=>[{title:"分数",dataIndex:"score",align:"center",headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"}},{title:"本段人数",dataIndex:"cnt",align:"center",headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"},render:({record:e})=>h(p(e.cnt))},{title:"累计人数",dataIndex:"wc",align:"center",headerCellStyle:{fontSize:"14px",backgroundColor:"#EDEDED",color:"#333333",fontWeight:"bold"},render:({record:e})=>h(p(e.wc))}],D=()=>{var e,t;n.value.scoreSearchInfo=S.value.find(s=>s.score==n.value.score)??{},n.value.scoreSearchInfo.isHistory=((t=(e=n.value.scoreSearchInfo)==null?void 0:e.historyList)==null?void 0:t.length)>0},H=async e=>{e.sf!==u.value.sf&&(u.value.sf=e.sf,d.value.nf="",f.value.kl="",await U(),await E()),e.nf!==d.value.nf&&(d.value.nf=e.nf,f.value.kl="",await E()),e.kl!==f.value.kl&&(f.value.kl=e.kl),q(),B()},{data:u}=([o,l]=g(()=>v("sfList",async()=>({title:"所在地区",key:"sf",isShow:!0,multiple:!1,options:O.value.map(t=>({...t,value:t.sf,label:t.sf})),sf:C.value.province}))),o=await o,l(),o),{data:d,refresh:U}=([o,l]=g(async()=>v("nfList",async()=>{var r;const[e,t]=await k(b.MORE.GET_RANK_NF,{body:{sf:u.value.sf}}),s=((r=t==null?void 0:t.data)==null?void 0:r.map(i=>({value:i.nf,label:i.nf})))??[];return{title:"录取年份",key:"nf",isShow:!0,multiple:!1,options:s,nf:s[0].value??""}})),o=await o,l(),o),{data:f,refresh:E}=([o,l]=g(async()=>v("klList",async()=>{var r;const[e,t]=await k(b.MORE.GET_RANK_KL,{body:{sf:u.value.sf,nf:d.value.nf}}),s=((r=t==null?void 0:t.data)==null?void 0:r.map(i=>({value:i.kl,label:i.kl})))??[];return{title:"考生类别",key:"kl",isShow:!0,multiple:!1,options:s,kl:s[0].value??""}})),o=await o,l(),o),{data:T,status:j,refresh:Q}=([o,l]=g(async()=>v("rankList",async()=>{var s,r;const[e,t]=await k(b.MORE.GET_RANK_WC_LIST,{body:{sf:u.value.sf,nf:d.value.nf,kl:f.value.kl,currentPage:L.value.current,pageSize:L.value.pageSize,pagingOrNot:1}});return{list:((s=t==null?void 0:t.data)==null?void 0:s.rankList)??[],total:((r=t==null?void 0:t.data)==null?void 0:r.totalCount)??0}})),o=await o,l(),o),{data:S,refresh:q}=([o,l]=g(async()=>v("lineList",async()=>{const[e,t]=await k(b.MORE.GET_RANK_WC_LINE_CHART,{body:{sf:u.value.sf,nf:d.value.nf,kl:f.value.kl}});return(t==null?void 0:t.data)??[]})),o=await o,l(),o);return(e,t)=>{var A,N,R,$,P;const s=Z,r=le,i=oe,_=se,z=ce,J=ue,X=fe;return w(),F("div",Ie,[m(s,{data:[a(u),a(d),a(f)],"default-values":{sf:(A=a(u))==null?void 0:A.sf,nf:(N=a(d))==null?void 0:N.nf,kl:(R=a(f))==null?void 0:R.kl},onChange:H,class:"mt-[20px]"},null,8,["data","default-values"]),c("div",be,[c("div",we,[m(i,{modelValue:a(n).score,"onUpdate:modelValue":t[0]||(t[0]=I=>a(n).score=I),modelModifiers:{trim:!0},size:"large",class:"rounded-lg h-[38px]",placeholder:"请输入您的分数","allow-clear":"",onClear:D},{prefix:V(()=>[m(r)]),_:1},8,["modelValue"])]),c("div",Fe,[m(_,{type:"primary",size:"large",class:"openButton w-[120px]",onClick:D},{default:V(()=>[ye(" 搜索 ")]),_:1})])]),m(z,{title:"折线图",size:"small",class:"mt-[20px]"}),c("div",Le,[c("div",null,"高考分数："+y(("textFormat"in e?e.textFormat:a(h))(a(n).scoreSearchInfo.score))+"分",1),c("div",Ce," 同分人数："+y(("textFormat"in e?e.textFormat:a(h))(("turnThousandth"in e?e.turnThousandth:a(p))(a(n).scoreSearchInfo.cnt)))+"人 ",1),c("div",null,"排名区间："+y(("textFormat"in e?e.textFormat:a(h))(("turnThousandth"in e?e.turnThousandth:a(p))(a(n).scoreSearchInfo.wc)))+"名",1)]),c("div",De,[m(J,{options:a(M)},null,8,["options"])]),($=a(n).scoreSearchInfo)!=null&&$.isHistory?(w(),F("div",Ee,[Te,(w(!0),F(he,null,ve((P=a(n).scoreSearchInfo)==null?void 0:P.historyList,(I,Y)=>(w(),F("span",{class:"mr-[20px]",key:Y},y(I.score)+"分 ("+y(I.nf)+") ",1))),128))])):ge("",!0),m(z,{title:"一分一段表",size:"small",class:"mt-[20px]"}),m(X,{class:"mt-[20px] cursor-pointer","table-layout-fixed":"",columns:W(),data:a(T).list,bordered:{wrapper:!0,cell:!0},pagination:{...a(L),total:a(T).total},onPageChange:a(G),onPageSizeChange:a(K),loading:a(j)==="pending"},null,8,["columns","data","pagination","onPageChange","onPageSizeChange","loading"])])}}});const We=ie(ze,[["__scopeId","data-v-81235bd2"]]);export{We as default};
